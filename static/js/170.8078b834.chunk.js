/*! For license information please see 170.8078b834.chunk.js.LICENSE.txt */
(self.webpackChunkcoin=self.webpackChunkcoin||[]).push([[170],{5854:function(t,e,n){"use strict";n.d(e,{BH:function(){return g},L:function(){return f},LL:function(){return E},P0:function(){return y},Sg:function(){return k},ZR:function(){return _},aH:function(){return m},eu:function(){return w},hl:function(){return b},m9:function(){return x},vZ:function(){return C}});var i=n(7326),r=n(3144),a=n(5671),o=n(136),s=n(7277),u=n(8664),l=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var a=t[r],o=r+1<t.length,s=o?t[r+1]:0,u=r+2<t.length,l=u?t[r+2]:0,c=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|l>>6,v=63&l;u||(v=64,o||(f=64)),i.push(n[c],n[h],n[f],n[v])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var a=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&a)}else if(r>239&&r<365){var o=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(o>>10)),e[i++]=String.fromCharCode(56320+(1023&o))}else{var s=t[n++],u=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&u)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var a=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0,s=++r<t.length?n[t.charAt(r)]:64,u=++r<t.length?n[t.charAt(r)]:64;if(++r,null==a||null==o||null==s||null==u)throw new h;var l=a<<2|o>>4;if(i.push(l),64!==s){var c=o<<4&240|s>>2;if(i.push(c),64!==u){var f=s<<6&192|u;i.push(f)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(){var t;return(0,a.Z)(this,n),(t=e.apply(this,arguments)).name="DecodeBase64StringError",t}return(0,r.Z)(n)}((0,u.Z)(Error)),f=function(t){return function(t){var e=l(t);return c.encodeByteArray(e,!0)}(t).replace(/\./g,"")},v=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var d=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},p=function(){try{return d()||function(){if("undefined"!==typeof process){var t={NODE_ENV:"production",PUBLIC_URL:"/Final-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBt7N61CM97WwbVTWzB6prFW9Lr5uN6_ao",REACT_APP_APP_ID:"1:172183502444:web:69ea222ad17bc0d474e249",REACT_APP_AUTH_DOMAIN:"hell-study-113f7.firebaseapp.com",REACT_APP_FX_IDC_API_URL:"http://ec2-54-180-142-133.ap-northeast-2.compute.amazonaws.com:8080/api/exchange-rate",REACT_APP_MESSAGING_SENDER_ID:"172183502444",REACT_APP_PROJECT_ID:"hell-study-113f7",REACT_APP_STORAGE_BUCKET:"hell-study-113f7.appspot.com"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0}}()||function(){if("undefined"!==typeof document){var t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var e=t&&v(t[1]);return e&&JSON.parse(e)}}()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},y=function(t){var e=function(t){var e,n;return null===(n=null===(e=p())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]}(t);if(e){var n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));var i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]}},m=function(){var t;return null===(t=p())||void 0===t?void 0:t.config},g=function(){function t(){var e=this;(0,a.Z)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return(0,r.Z)(t,[{key:"wrapCallback",value:function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}}}]),t}();function k(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(a)),""].join(".")}function b(){try{return"object"===typeof indexedDB}catch(t){return!1}}function w(){return new Promise((function(t,e){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=function(){r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=function(){n=!1},r.onerror=function(){var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(a){e(a)}}))}var _=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r,o){var s;return(0,a.Z)(this,n),(s=e.call(this,r)).code=t,s.customData=o,s.name="FirebaseError",Object.setPrototypeOf((0,i.Z)(s),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,i.Z)(s),E.prototype.create),s}return(0,r.Z)(n)}((0,u.Z)(Error)),E=function(){function t(e,n,i){(0,a.Z)(this,t),this.service=e,this.serviceName=n,this.errors=i}return(0,r.Z)(t,[{key:"create",value:function(t){var e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(S,(function(t,n){var i=e[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,e):"Error",a="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new _(n,a,e)}}]),t}();var S=/\{\$([^}]+)}/g;function C(t,e){if(t===e)return!0;for(var n=Object.keys(t),i=Object.keys(e),r=0,a=n;r<a.length;r++){var o=a[r];if(!i.includes(o))return!1;var s=t[o],u=e[o];if(T(s)&&T(u)){if(!C(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=i;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function T(t){return null!==t&&"object"===typeof t}function x(t){return t&&t._delegate?t._delegate:t}},2618:function(t,e,n){var i;!function(){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()},763:function(t,e,n){var i;t=n.nmd(t),function(){var r,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,h=128,f=256,v=1/0,d=9007199254740991,p=NaN,y=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",f]],g="[object Arguments]",k="[object Array]",b="[object Boolean]",w="[object Date]",_="[object Error]",E="[object Function]",S="[object GeneratorFunction]",C="[object Map]",T="[object Number]",x="[object Object]",Z="[object Promise]",A="[object RegExp]",O="[object Set]",M="[object String]",L="[object Symbol]",I="[object WeakMap]",N="[object ArrayBuffer]",D="[object DataView]",R="[object Float32Array]",P="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",V="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",j="[object Uint16Array]",q="[object Uint32Array]",W=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,Q=/[&<>"']/g,J=RegExp(G.source),X=RegExp(Q.source),Y=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,at=RegExp(rt.source),ot=/^\s+/,st=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/[()=,{}\[\]\/\s]/,vt=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,kt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,Et=/['\n\r\u2028\u2029\\]/g,St="\\ud800-\\udfff",Ct="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Tt="\\u2700-\\u27bf",xt="a-z\\xdf-\\xf6\\xf8-\\xff",Zt="A-Z\\xc0-\\xd6\\xd8-\\xde",At="\\ufe0e\\ufe0f",Ot="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mt="['\u2019]",Lt="["+St+"]",It="["+Ot+"]",Nt="["+Ct+"]",Dt="\\d+",Rt="["+Tt+"]",Pt="["+xt+"]",Ft="[^"+St+Ot+Dt+Tt+xt+Zt+"]",Ut="\\ud83c[\\udffb-\\udfff]",Vt="[^"+St+"]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+Zt+"]",qt="\\u200d",Wt="(?:"+Pt+"|"+Ft+")",Ht="(?:"+jt+"|"+Ft+")",Kt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Gt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Qt="(?:"+Nt+"|"+Ut+")"+"?",Jt="["+At+"]?",Xt=Jt+Qt+("(?:"+qt+"(?:"+[Vt,Bt,zt].join("|")+")"+Jt+Qt+")*"),Yt="(?:"+[Rt,Bt,zt].join("|")+")"+Xt,$t="(?:"+[Vt+Nt+"?",Nt,Bt,zt,Lt].join("|")+")",te=RegExp(Mt,"g"),ee=RegExp(Nt,"g"),ne=RegExp(Ut+"(?="+Ut+")|"+$t+Xt,"g"),ie=RegExp([jt+"?"+Pt+"+"+Kt+"(?="+[It,jt,"$"].join("|")+")",Ht+"+"+Gt+"(?="+[It,jt+Wt,"$"].join("|")+")",jt+"?"+Wt+"+"+Kt,jt+"+"+Gt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,Yt].join("|"),"g"),re=RegExp("["+qt+St+Ct+At+"]"),ae=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,ue={};ue[R]=ue[P]=ue[F]=ue[U]=ue[V]=ue[B]=ue[z]=ue[j]=ue[q]=!0,ue[g]=ue[k]=ue[N]=ue[b]=ue[D]=ue[w]=ue[_]=ue[E]=ue[C]=ue[T]=ue[x]=ue[A]=ue[O]=ue[M]=ue[I]=!1;var le={};le[g]=le[k]=le[N]=le[D]=le[b]=le[w]=le[R]=le[P]=le[F]=le[U]=le[V]=le[C]=le[T]=le[x]=le[A]=le[O]=le[M]=le[L]=le[B]=le[z]=le[j]=le[q]=!0,le[_]=le[E]=le[I]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,fe=parseInt,ve="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,de="object"==typeof self&&self&&self.Object===Object&&self,pe=ve||de||Function("return this")(),ye=e&&!e.nodeType&&e,me=ye&&t&&!t.nodeType&&t,ge=me&&me.exports===ye,ke=ge&&ve.process,be=function(){try{var t=me&&me.require&&me.require("util").types;return t||ke&&ke.binding&&ke.binding("util")}catch(e){}}(),we=be&&be.isArrayBuffer,_e=be&&be.isDate,Ee=be&&be.isMap,Se=be&&be.isRegExp,Ce=be&&be.isSet,Te=be&&be.isTypedArray;function xe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ze(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function Ae(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Me(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Le(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function Ie(t,e){return!!(null==t?0:t.length)&&je(t,e,0)>-1}function Ne(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function De(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Re(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Pe(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function Fe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ue(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Ve=Ke("length");function Be(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function ze(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function je(t,e,n){return e===e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):ze(t,We,n)}function qe(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function We(t){return t!==t}function He(t,e){var n=null==t?0:t.length;return n?Je(t,e)/n:p}function Ke(t){return function(e){return null==e?r:e[t]}}function Ge(t){return function(e){return null==t?r:t[e]}}function Qe(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function Je(t,e){for(var n,i=-1,a=t.length;++i<a;){var o=e(t[i]);o!==r&&(n=n===r?o:n+o)}return n}function Xe(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ye(t){return t?t.slice(0,yn(t)+1).replace(ot,""):t}function $e(t){return function(e){return t(e)}}function tn(t,e){return De(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,i=t.length;++n<i&&je(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&je(e,t[n],0)>-1;);return n}var an=Ge({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Ge({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+ce[t]}function un(t){return re.test(t)}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n];o!==e&&o!==s||(t[n]=s,a[r++]=n)}return a}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function vn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function dn(t){return un(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):Ve(t)}function pn(t){return un(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function yn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var mn=Ge({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function t(e){var n=(e=null==e?pe:gn.defaults(pe.Object(),e,gn.pick(pe,oe))).Array,i=e.Date,st=e.Error,St=e.Function,Ct=e.Math,Tt=e.Object,xt=e.RegExp,Zt=e.String,At=e.TypeError,Ot=n.prototype,Mt=St.prototype,Lt=Tt.prototype,It=e["__core-js_shared__"],Nt=Mt.toString,Dt=Lt.hasOwnProperty,Rt=0,Pt=function(){var t=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ft=Lt.toString,Ut=Nt.call(Tt),Vt=pe._,Bt=xt("^"+Nt.call(Dt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=ge?e.Buffer:r,jt=e.Symbol,qt=e.Uint8Array,Wt=zt?zt.allocUnsafe:r,Ht=cn(Tt.getPrototypeOf,Tt),Kt=Tt.create,Gt=Lt.propertyIsEnumerable,Qt=Ot.splice,Jt=jt?jt.isConcatSpreadable:r,Xt=jt?jt.iterator:r,Yt=jt?jt.toStringTag:r,$t=function(){try{var t=ha(Tt,"defineProperty");return t({},"",{}),t}catch(e){}}(),ne=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,re=i&&i.now!==pe.Date.now&&i.now,ce=e.setTimeout!==pe.setTimeout&&e.setTimeout,ve=Ct.ceil,de=Ct.floor,ye=Tt.getOwnPropertySymbols,me=zt?zt.isBuffer:r,ke=e.isFinite,be=Ot.join,Ve=cn(Tt.keys,Tt),Ge=Ct.max,kn=Ct.min,bn=i.now,wn=e.parseInt,_n=Ct.random,En=Ot.reverse,Sn=ha(e,"DataView"),Cn=ha(e,"Map"),Tn=ha(e,"Promise"),xn=ha(e,"Set"),Zn=ha(e,"WeakMap"),An=ha(Tt,"create"),On=Zn&&new Zn,Mn={},Ln=Pa(Sn),In=Pa(Cn),Nn=Pa(Tn),Dn=Pa(xn),Rn=Pa(Zn),Pn=jt?jt.prototype:r,Fn=Pn?Pn.valueOf:r,Un=Pn?Pn.toString:r;function Vn(t){if(es(t)&&!qo(t)&&!(t instanceof qn)){if(t instanceof jn)return t;if(Dt.call(t,"__wrapped__"))return Fa(t)}return new jn(t)}var Bn=function(){function t(){}return function(e){if(!ts(e))return{};if(Kt)return Kt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function zn(){}function jn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function qn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Kn;++e<n;)this.add(t[e])}function Qn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Jn(t,e){var n=qo(t),i=!n&&jo(t),r=!n&&!i&&Go(t),a=!n&&!i&&!r&&ls(t),o=n||i||r||a,s=o?Xe(t.length,Zt):[],u=s.length;for(var l in t)!e&&!Dt.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ga(l,u))||s.push(l);return s}function Xn(t){var e=t.length;return e?t[Gi(0,e-1)]:r}function Yn(t,e){return Na(Ar(t),si(e,0,t.length))}function $n(t){return Na(Ar(t))}function ti(t,e,n){(n!==r&&!Vo(t[e],n)||n===r&&!(e in t))&&ai(t,e,n)}function ei(t,e,n){var i=t[e];Dt.call(t,e)&&Vo(i,n)&&(n!==r||e in t)||ai(t,e,n)}function ni(t,e){for(var n=t.length;n--;)if(Vo(t[n][0],e))return n;return-1}function ii(t,e,n,i){return fi(t,(function(t,r,a){e(i,t,n(t),a)})),i}function ri(t,e){return t&&Or(e,Ms(e),t)}function ai(t,e,n){"__proto__"==e&&$t?$t(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function oi(t,e){for(var i=-1,a=e.length,o=n(a),s=null==t;++i<a;)o[i]=s?r:Ts(t,e[i]);return o}function si(t,e,n){return t===t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function ui(t,e,n,i,a,o){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=a?n(t,i,a,o):n(t)),s!==r)return s;if(!ts(t))return t;var h=qo(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Dt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return Ar(t,s)}else{var f=da(t),v=f==E||f==S;if(Go(t))return Er(t,u);if(f==x||f==g||v&&!a){if(s=l||v?{}:ya(t),!u)return l?function(t,e){return Or(t,va(t),e)}(t,function(t,e){return t&&Or(e,Ls(e),t)}(s,t)):function(t,e){return Or(t,fa(t),e)}(t,ri(s,t))}else{if(!le[f])return a?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case N:return Sr(t);case b:case w:return new i(+t);case D:return function(t,e){var n=e?Sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case R:case P:case F:case U:case V:case B:case z:case j:case q:return Cr(t,n);case C:return new i;case T:case M:return new i(t);case A:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case O:return new i;case L:return r=t,Fn?Tt(Fn.call(r)):{}}var r}(t,f,u)}}o||(o=new Qn);var d=o.get(t);if(d)return d;o.set(t,s),os(t)?t.forEach((function(i){s.add(ui(i,e,n,i,t,o))})):ns(t)&&t.forEach((function(i,r){s.set(r,ui(i,e,n,r,t,o))}));var p=h?r:(c?l?ra:ia:l?Ls:Ms)(t);return Ae(p||t,(function(i,r){p&&(i=t[r=i]),ei(s,r,ui(i,e,n,r,t,o))})),s}function li(t,e,n){var i=n.length;if(null==t)return!i;for(t=Tt(t);i--;){var a=n[i],o=e[a],s=t[a];if(s===r&&!(a in t)||!o(s))return!1}return!0}function ci(t,e,n){if("function"!=typeof t)throw new At(a);return Oa((function(){t.apply(r,n)}),e)}function hi(t,e,n,i){var r=-1,a=Ie,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=De(e,$e(n))),i?(a=Ne,o=!1):e.length>=200&&(a=en,o=!1,e=new Gn(e));t:for(;++r<s;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,o&&h===h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else a(e,h,i)||u.push(c)}return u}Vn.templateSettings={escape:Y,evaluate:$,interpolate:tt,variable:"",imports:{_:Vn}},Vn.prototype=zn.prototype,Vn.prototype.constructor=Vn,jn.prototype=Bn(zn.prototype),jn.prototype.constructor=jn,qn.prototype=Bn(zn.prototype),qn.prototype.constructor=qn,Wn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===o?r:n}return Dt.call(e,t)?e[t]:r},Wn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==r:Dt.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===r?o:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=ni(e,t);return!(n<0)&&(n==e.length-1?e.pop():Qt.call(e,n,1),--this.size,!0)},Hn.prototype.get=function(t){var e=this.__data__,n=ni(e,t);return n<0?r:e[n][1]},Hn.prototype.has=function(t){return ni(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,i=ni(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Cn||Hn),string:new Wn}},Kn.prototype.delete=function(t){var e=la(this,t).delete(t);return this.size-=e?1:0,e},Kn.prototype.get=function(t){return la(this,t).get(t)},Kn.prototype.has=function(t){return la(this,t).has(t)},Kn.prototype.set=function(t,e){var n=la(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Gn.prototype.add=Gn.prototype.push=function(t){return this.__data__.set(t,o),this},Gn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Qn.prototype.get=function(t){return this.__data__.get(t)},Qn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var i=n.__data__;if(!Cn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kn(i)}return n.set(t,e),this.size=n.size,this};var fi=Ir(bi),vi=Ir(wi,!0);function di(t,e){var n=!0;return fi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function pi(t,e,n){for(var i=-1,a=t.length;++i<a;){var o=t[i],s=e(o);if(null!=s&&(u===r?s===s&&!us(s):n(s,u)))var u=s,l=o}return l}function yi(t,e){var n=[];return fi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function mi(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=ma),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?mi(s,e-1,n,i,r):Re(r,s):i||(r[r.length]=s)}return r}var gi=Nr(),ki=Nr(!0);function bi(t,e){return t&&gi(t,e,Ms)}function wi(t,e){return t&&ki(t,e,Ms)}function _i(t,e){return Le(e,(function(e){return Xo(t[e])}))}function Ei(t,e){for(var n=0,i=(e=kr(e,t)).length;null!=t&&n<i;)t=t[Ra(e[n++])];return n&&n==i?t:r}function Si(t,e,n){var i=e(t);return qo(t)?i:Re(i,n(t))}function Ci(t){return null==t?t===r?"[object Undefined]":"[object Null]":Yt&&Yt in Tt(t)?function(t){var e=Dt.call(t,Yt),n=t[Yt];try{t[Yt]=r;var i=!0}catch(o){}var a=Ft.call(t);i&&(e?t[Yt]=n:delete t[Yt]);return a}(t):function(t){return Ft.call(t)}(t)}function Ti(t,e){return t>e}function xi(t,e){return null!=t&&Dt.call(t,e)}function Zi(t,e){return null!=t&&e in Tt(t)}function Ai(t,e,i){for(var a=i?Ne:Ie,o=t[0].length,s=t.length,u=s,l=n(s),c=1/0,h=[];u--;){var f=t[u];u&&e&&(f=De(f,$e(e))),c=kn(f.length,c),l[u]=!i&&(e||o>=120&&f.length>=120)?new Gn(u&&f):r}f=t[0];var v=-1,d=l[0];t:for(;++v<o&&h.length<c;){var p=f[v],y=e?e(p):p;if(p=i||0!==p?p:0,!(d?en(d,y):a(h,y,i))){for(u=s;--u;){var m=l[u];if(!(m?en(m,y):a(t[u],y,i)))continue t}d&&d.push(y),h.push(p)}}return h}function Oi(t,e,n){var i=null==(t=xa(t,e=kr(e,t)))?t:t[Ra(Qa(e))];return null==i?r:xe(i,t,n)}function Mi(t){return es(t)&&Ci(t)==g}function Li(t,e,n,i,a){return t===e||(null==t||null==e||!es(t)&&!es(e)?t!==t&&e!==e:function(t,e,n,i,a,o){var s=qo(t),u=qo(e),l=s?k:da(t),c=u?k:da(e),h=(l=l==g?x:l)==x,f=(c=c==g?x:c)==x,v=l==c;if(v&&Go(t)){if(!Go(e))return!1;s=!0,h=!1}if(v&&!h)return o||(o=new Qn),s||ls(t)?ea(t,e,n,i,a,o):function(t,e,n,i,r,a,o){switch(n){case D:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case N:return!(t.byteLength!=e.byteLength||!a(new qt(t),new qt(e)));case b:case w:case T:return Vo(+t,+e);case _:return t.name==e.name&&t.message==e.message;case A:case M:return t==e+"";case C:var s=ln;case O:var u=1&i;if(s||(s=fn),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;i|=2,o.set(t,e);var c=ea(s(t),s(e),i,r,a,o);return o.delete(t),c;case L:if(Fn)return Fn.call(t)==Fn.call(e)}return!1}(t,e,l,n,i,a,o);if(!(1&n)){var d=h&&Dt.call(t,"__wrapped__"),p=f&&Dt.call(e,"__wrapped__");if(d||p){var y=d?t.value():t,m=p?e.value():e;return o||(o=new Qn),a(y,m,n,i,o)}}if(!v)return!1;return o||(o=new Qn),function(t,e,n,i,a,o){var s=1&n,u=ia(t),l=u.length,c=ia(e),h=c.length;if(l!=h&&!s)return!1;var f=l;for(;f--;){var v=u[f];if(!(s?v in e:Dt.call(e,v)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var y=!0;o.set(t,e),o.set(e,t);var m=s;for(;++f<l;){var g=t[v=u[f]],k=e[v];if(i)var b=s?i(k,g,v,e,t,o):i(g,k,v,t,e,o);if(!(b===r?g===k||a(g,k,n,i,o):b)){y=!1;break}m||(m="constructor"==v)}if(y&&!m){var w=t.constructor,_=e.constructor;w==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(y=!1)}return o.delete(t),o.delete(e),y}(t,e,n,i,a,o)}(t,e,n,i,Li,a))}function Ii(t,e,n,i){var a=n.length,o=a,s=!i;if(null==t)return!o;for(t=Tt(t);a--;){var u=n[a];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<o;){var l=(u=n[a])[0],c=t[l],h=u[1];if(s&&u[2]){if(c===r&&!(l in t))return!1}else{var f=new Qn;if(i)var v=i(c,h,l,t,e,f);if(!(v===r?Li(h,c,3,i,f):v))return!1}}return!0}function Ni(t){return!(!ts(t)||(e=t,Pt&&Pt in e))&&(Xo(t)?Bt:gt).test(Pa(t));var e}function Di(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?qo(t)?Bi(t[0],t[1]):Vi(t):fu(t)}function Ri(t){if(!Ea(t))return Ve(t);var e=[];for(var n in Tt(t))Dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pi(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Ea(t),n=[];for(var i in t)("constructor"!=i||!e&&Dt.call(t,i))&&n.push(i);return n}function Fi(t,e){return t<e}function Ui(t,e){var i=-1,r=Ho(t)?n(t.length):[];return fi(t,(function(t,n,a){r[++i]=e(t,n,a)})),r}function Vi(t){var e=ca(t);return 1==e.length&&e[0][2]?Ca(e[0][0],e[0][1]):function(n){return n===t||Ii(n,t,e)}}function Bi(t,e){return ba(t)&&Sa(e)?Ca(Ra(t),e):function(n){var i=Ts(n,t);return i===r&&i===e?xs(n,t):Li(e,i,3)}}function zi(t,e,n,i,a){t!==e&&gi(e,(function(o,s){if(a||(a=new Qn),ts(o))!function(t,e,n,i,a,o,s){var u=Za(t,n),l=Za(e,n),c=s.get(l);if(c)return void ti(t,n,c);var h=o?o(u,l,n+"",t,e,s):r,f=h===r;if(f){var v=qo(l),d=!v&&Go(l),p=!v&&!d&&ls(l);h=l,v||d||p?qo(u)?h=u:Ko(u)?h=Ar(u):d?(f=!1,h=Er(l,!0)):p?(f=!1,h=Cr(l,!0)):h=[]:rs(l)||jo(l)?(h=u,jo(u)?h=ms(u):ts(u)&&!Xo(u)||(h=ya(l))):f=!1}f&&(s.set(l,h),a(h,l,i,o,s),s.delete(l));ti(t,n,h)}(t,e,s,n,zi,i,a);else{var u=i?i(Za(t,s),o,s+"",t,e,a):r;u===r&&(u=o),ti(t,s,u)}}),Ls)}function ji(t,e){var n=t.length;if(n)return ga(e+=e<0?n:0,n)?t[e]:r}function qi(t,e,n){e=e.length?De(e,(function(t){return qo(t)?function(e){return Ei(e,1===t.length?t[0]:t)}:t})):[iu];var i=-1;e=De(e,$e(ua()));var r=Ui(t,(function(t,n,r){var a=De(e,(function(e){return e(t)}));return{criteria:a,index:++i,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,(function(t,e){return function(t,e,n){var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;for(;++i<o;){var u=Tr(r[i],a[i]);if(u)return i>=s?u:u*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}function Wi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=Ei(t,o);n(s,o)&&$i(a,kr(o,t),s)}return a}function Hi(t,e,n,i){var r=i?qe:je,a=-1,o=e.length,s=t;for(t===e&&(e=Ar(e)),n&&(s=De(t,$e(n)));++a<o;)for(var u=0,l=e[a],c=n?n(l):l;(u=r(s,c,u,i))>-1;)s!==t&&Qt.call(s,u,1),Qt.call(t,u,1);return t}function Ki(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;ga(r)?Qt.call(t,r,1):hr(t,r)}}return t}function Gi(t,e){return t+de(_n()*(e-t+1))}function Qi(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function Ji(t,e){return Ma(Ta(t,e,iu),t+"")}function Xi(t){return Xn(Vs(t))}function Yi(t,e){var n=Vs(t);return Na(n,si(e,0,n.length))}function $i(t,e,n,i){if(!ts(t))return t;for(var a=-1,o=(e=kr(e,t)).length,s=o-1,u=t;null!=u&&++a<o;){var l=Ra(e[a]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(a!=s){var h=u[l];(c=i?i(h,l,u):r)===r&&(c=ts(h)?h:ga(e[a+1])?[]:{})}ei(u,l,c),u=u[l]}return t}var tr=On?function(t,e){return On.set(t,e),t}:iu,er=$t?function(t,e){return $t(t,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:iu;function nr(t){return Na(Vs(t))}function ir(t,e,i){var r=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(i=i>a?a:i)<0&&(i+=a),a=e>i?0:i-e>>>0,e>>>=0;for(var o=n(a);++r<a;)o[r]=t[r+e];return o}function rr(t,e){var n;return fi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function ar(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!us(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return or(t,e,iu,n)}function or(t,e,n,i){var a=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!==e,u=null===e,l=us(e),c=e===r;a<o;){var h=de((a+o)/2),f=n(t[h]),v=f!==r,d=null===f,p=f===f,y=us(f);if(s)var m=i||p;else m=c?p&&(i||v):u?p&&v&&(i||!d):l?p&&v&&!d&&(i||!y):!d&&!y&&(i?f<=e:f<e);m?a=h+1:o=h}return kn(o,4294967294)}function sr(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!Vo(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function ur(t){return"number"==typeof t?t:us(t)?p:+t}function lr(t){if("string"==typeof t)return t;if(qo(t))return De(t,lr)+"";if(us(t))return Un?Un.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function cr(t,e,n){var i=-1,r=Ie,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=Ne;else if(a>=200){var l=e?null:Qr(t);if(l)return fn(l);o=!1,r=en,u=new Gn}else u=e?[]:s;t:for(;++i<a;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else r(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function hr(t,e){return null==(t=xa(t,e=kr(e,t)))||delete t[Ra(Qa(e))]}function fr(t,e,n,i){return $i(t,e,n(Ei(t,e)),i)}function vr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?ir(t,i?0:a,i?a+1:r):ir(t,i?a+1:0,i?r:a)}function dr(t,e){var n=t;return n instanceof qn&&(n=n.value()),Pe(e,(function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))}),n)}function pr(t,e,i){var r=t.length;if(r<2)return r?cr(t[0]):[];for(var a=-1,o=n(r);++a<r;)for(var s=t[a],u=-1;++u<r;)u!=a&&(o[a]=hi(o[a]||s,t[u],e,i));return cr(mi(o,1),e,i)}function yr(t,e,n){for(var i=-1,a=t.length,o=e.length,s={};++i<a;){var u=i<o?e[i]:r;n(s,t[i],u)}return s}function mr(t){return Ko(t)?t:[]}function gr(t){return"function"==typeof t?t:iu}function kr(t,e){return qo(t)?t:ba(t,e)?[t]:Da(gs(t))}var br=Ji;function wr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:ir(t,e,n)}var _r=ne||function(t){return pe.clearTimeout(t)};function Er(t,e){if(e)return t.slice();var n=t.length,i=Wt?Wt(n):new t.constructor(n);return t.copy(i),i}function Sr(t){var e=new t.constructor(t.byteLength);return new qt(e).set(new qt(t)),e}function Cr(t,e){var n=e?Sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Tr(t,e){if(t!==e){var n=t!==r,i=null===t,a=t===t,o=us(t),s=e!==r,u=null===e,l=e===e,c=us(e);if(!u&&!c&&!o&&t>e||o&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!a)return 1;if(!i&&!o&&!c&&t<e||c&&n&&a&&!i&&!o||u&&n&&a||!s&&a||!l)return-1}return 0}function xr(t,e,i,r){for(var a=-1,o=t.length,s=i.length,u=-1,l=e.length,c=Ge(o-s,0),h=n(l+c),f=!r;++u<l;)h[u]=e[u];for(;++a<s;)(f||a<o)&&(h[i[a]]=t[a]);for(;c--;)h[u++]=t[a++];return h}function Zr(t,e,i,r){for(var a=-1,o=t.length,s=-1,u=i.length,l=-1,c=e.length,h=Ge(o-u,0),f=n(h+c),v=!r;++a<h;)f[a]=t[a];for(var d=a;++l<c;)f[d+l]=e[l];for(;++s<u;)(v||a<o)&&(f[d+i[s]]=t[a++]);return f}function Ar(t,e){var i=-1,r=t.length;for(e||(e=n(r));++i<r;)e[i]=t[i];return e}function Or(t,e,n,i){var a=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],l=i?i(n[u],t[u],u,n,t):r;l===r&&(l=t[u]),a?ai(n,u,l):ei(n,u,l)}return n}function Mr(t,e){return function(n,i){var r=qo(n)?Ze:ii,a=e?e():{};return r(n,t,ua(i,2),a)}}function Lr(t){return Ji((function(e,n){var i=-1,a=n.length,o=a>1?n[a-1]:r,s=a>2?n[2]:r;for(o=t.length>3&&"function"==typeof o?(a--,o):r,s&&ka(n[0],n[1],s)&&(o=a<3?r:o,a=1),e=Tt(e);++i<a;){var u=n[i];u&&t(e,u,i,o)}return e}))}function Ir(t,e){return function(n,i){if(null==n)return n;if(!Ho(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=Tt(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function Nr(t){return function(e,n,i){for(var r=-1,a=Tt(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(!1===n(a[u],u,a))break}return e}}function Dr(t){return function(e){var n=un(e=gs(e))?pn(e):r,i=n?n[0]:e.charAt(0),a=n?wr(n,1).join(""):e.slice(1);return i[t]()+a}}function Rr(t){return function(e){return Pe(Xs(js(e).replace(te,"")),t,"")}}function Pr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),i=t.apply(n,e);return ts(i)?i:n}}function Fr(t){return function(e,n,i){var a=Tt(e);if(!Ho(e)){var o=ua(n,3);e=Ms(e),n=function(t){return o(a[t],t,a)}}var s=t(e,n,i);return s>-1?a[o?e[s]:s]:r}}function Ur(t){return na((function(e){var n=e.length,i=n,o=jn.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new At(a);if(o&&!u&&"wrapper"==oa(s))var u=new jn([],!0)}for(i=u?i:n;++i<n;){var l=oa(s=e[i]),c="wrapper"==l?aa(s):r;u=c&&wa(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[oa(c[0])].apply(u,c[3]):1==s.length&&wa(s)?u[l]():u.thru(s)}return function(){var t=arguments,i=t[0];if(u&&1==t.length&&qo(i))return u.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}}))}function Vr(t,e,i,a,o,s,u,l,c,f){var v=e&h,d=1&e,p=2&e,y=24&e,m=512&e,g=p?r:Pr(t);return function h(){for(var k=arguments.length,b=n(k),w=k;w--;)b[w]=arguments[w];if(y)var _=sa(h),E=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(b,_);if(a&&(b=xr(b,a,o,y)),s&&(b=Zr(b,s,u,y)),k-=E,y&&k<f){var S=hn(b,_);return Kr(t,e,Vr,h.placeholder,i,b,S,l,c,f-k)}var C=d?i:this,T=p?C[t]:t;return k=b.length,l?b=function(t,e){var n=t.length,i=kn(e.length,n),a=Ar(t);for(;i--;){var o=e[i];t[i]=ga(o,n)?a[o]:r}return t}(b,l):m&&k>1&&b.reverse(),v&&c<k&&(b.length=c),this&&this!==pe&&this instanceof h&&(T=g||Pr(T)),T.apply(C,b)}}function Br(t,e){return function(n,i){return function(t,e,n,i){return bi(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function zr(t,e){return function(n,i){var a;if(n===r&&i===r)return e;if(n!==r&&(a=n),i!==r){if(a===r)return i;"string"==typeof n||"string"==typeof i?(n=lr(n),i=lr(i)):(n=ur(n),i=ur(i)),a=t(n,i)}return a}}function jr(t){return na((function(e){return e=De(e,$e(ua())),Ji((function(n){var i=this;return t(e,(function(t){return xe(t,i,n)}))}))}))}function qr(t,e){var n=(e=e===r?" ":lr(e)).length;if(n<2)return n?Qi(e,t):e;var i=Qi(e,ve(t/dn(e)));return un(e)?wr(pn(i),0,t).join(""):i.slice(0,t)}function Wr(t){return function(e,i,a){return a&&"number"!=typeof a&&ka(e,i,a)&&(i=a=r),e=vs(e),i===r?(i=e,e=0):i=vs(i),function(t,e,i,r){for(var a=-1,o=Ge(ve((e-t)/(i||1)),0),s=n(o);o--;)s[r?o:++a]=t,t+=i;return s}(e,i,a=a===r?e<i?1:-1:vs(a),t)}}function Hr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ys(e),n=ys(n)),t(e,n)}}function Kr(t,e,n,i,a,o,s,u,h,f){var v=8&e;e|=v?l:c,4&(e&=~(v?c:l))||(e&=-4);var d=[t,e,a,v?o:r,v?s:r,v?r:o,v?r:s,u,h,f],p=n.apply(r,d);return wa(t)&&Aa(p,d),p.placeholder=i,La(p,t,e)}function Gr(t){var e=Ct[t];return function(t,n){if(t=ys(t),(n=null==n?0:kn(ds(n),292))&&ke(t)){var i=(gs(t)+"e").split("e");return+((i=(gs(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Qr=xn&&1/fn(new xn([,-0]))[1]==v?function(t){return new xn(t)}:uu;function Jr(t){return function(e){var n=da(e);return n==C?ln(e):n==O?vn(e):function(t,e){return De(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xr(t,e,i,o,v,d,p,y){var m=2&e;if(!m&&"function"!=typeof t)throw new At(a);var g=o?o.length:0;if(g||(e&=-97,o=v=r),p=p===r?p:Ge(ds(p),0),y=y===r?y:ds(y),g-=v?v.length:0,e&c){var k=o,b=v;o=v=r}var w=m?r:aa(t),_=[t,e,i,o,v,k,b,d,p,y];if(w&&function(t,e){var n=t[1],i=e[1],r=n|i,a=r<131,o=i==h&&8==n||i==h&&n==f&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!a&&!o)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?xr(l,u,e[4]):u,t[4]=l?hn(t[3],s):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Zr(l,u,e[6]):u,t[6]=l?hn(t[5],s):e[6]);(u=e[7])&&(t[7]=u);i&h&&(t[8]=null==t[8]?e[8]:kn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(_,w),t=_[0],e=_[1],i=_[2],o=_[3],v=_[4],!(y=_[9]=_[9]===r?m?0:t.length:Ge(_[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)E=8==e||e==u?function(t,e,i){var a=Pr(t);return function o(){for(var s=arguments.length,u=n(s),l=s,c=sa(o);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:hn(u,c);return(s-=h.length)<i?Kr(t,e,Vr,o.placeholder,r,u,h,r,r,i-s):xe(this&&this!==pe&&this instanceof o?a:t,this,u)}}(t,e,y):e!=l&&33!=e||v.length?Vr.apply(r,_):function(t,e,i,r){var a=1&e,o=Pr(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=r.length,h=n(c+u),f=this&&this!==pe&&this instanceof e?o:t;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++s];return xe(f,a?i:this,h)}}(t,e,i,o);else var E=function(t,e,n){var i=1&e,r=Pr(t);return function e(){return(this&&this!==pe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,i);return La((w?tr:Aa)(E,_),t,e)}function Yr(t,e,n,i){return t===r||Vo(t,Lt[n])&&!Dt.call(i,n)?e:t}function $r(t,e,n,i,a,o){return ts(t)&&ts(e)&&(o.set(e,t),zi(t,e,r,$r,o),o.delete(e)),t}function ta(t){return rs(t)?r:t}function ea(t,e,n,i,a,o){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(t),h=o.get(e);if(c&&h)return c==e&&h==t;var f=-1,v=!0,d=2&n?new Gn:r;for(o.set(t,e),o.set(e,t);++f<u;){var p=t[f],y=e[f];if(i)var m=s?i(y,p,f,e,t,o):i(p,y,f,t,e,o);if(m!==r){if(m)continue;v=!1;break}if(d){if(!Ue(e,(function(t,e){if(!en(d,e)&&(p===t||a(p,t,n,i,o)))return d.push(e)}))){v=!1;break}}else if(p!==y&&!a(p,y,n,i,o)){v=!1;break}}return o.delete(t),o.delete(e),v}function na(t){return Ma(Ta(t,r,qa),t+"")}function ia(t){return Si(t,Ms,fa)}function ra(t){return Si(t,Ls,va)}var aa=On?function(t){return On.get(t)}:uu;function oa(t){for(var e=t.name+"",n=Mn[e],i=Dt.call(Mn,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function sa(t){return(Dt.call(Vn,"placeholder")?Vn:t).placeholder}function ua(){var t=Vn.iteratee||ru;return t=t===ru?Di:t,arguments.length?t(arguments[0],arguments[1]):t}function la(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ca(t){for(var e=Ms(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Sa(r)]}return e}function ha(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Ni(n)?n:r}var fa=ye?function(t){return null==t?[]:(t=Tt(t),Le(ye(t),(function(e){return Gt.call(t,e)})))}:pu,va=ye?function(t){for(var e=[];t;)Re(e,fa(t)),t=Ht(t);return e}:pu,da=Ci;function pa(t,e,n){for(var i=-1,r=(e=kr(e,t)).length,a=!1;++i<r;){var o=Ra(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&$o(r)&&ga(o,r)&&(qo(t)||jo(t))}function ya(t){return"function"!=typeof t.constructor||Ea(t)?{}:Bn(Ht(t))}function ma(t){return qo(t)||jo(t)||!!(Jt&&t&&t[Jt])}function ga(t,e){var n=typeof t;return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&bt.test(t))&&t>-1&&t%1==0&&t<e}function ka(t,e,n){if(!ts(n))return!1;var i=typeof e;return!!("number"==i?Ho(n)&&ga(e,n.length):"string"==i&&e in n)&&Vo(n[e],t)}function ba(t,e){if(qo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Tt(e))}function wa(t){var e=oa(t),n=Vn[e];if("function"!=typeof n||!(e in qn.prototype))return!1;if(t===n)return!0;var i=aa(n);return!!i&&t===i[0]}(Sn&&da(new Sn(new ArrayBuffer(1)))!=D||Cn&&da(new Cn)!=C||Tn&&da(Tn.resolve())!=Z||xn&&da(new xn)!=O||Zn&&da(new Zn)!=I)&&(da=function(t){var e=Ci(t),n=e==x?t.constructor:r,i=n?Pa(n):"";if(i)switch(i){case Ln:return D;case In:return C;case Nn:return Z;case Dn:return O;case Rn:return I}return e});var _a=It?Xo:yu;function Ea(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function Sa(t){return t===t&&!ts(t)}function Ca(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in Tt(n)))}}function Ta(t,e,i){return e=Ge(e===r?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=Ge(r.length-e,0),s=n(o);++a<o;)s[a]=r[e+a];a=-1;for(var u=n(e+1);++a<e;)u[a]=r[a];return u[e]=i(s),xe(t,this,u)}}function xa(t,e){return e.length<2?t:Ei(t,ir(e,0,-1))}function Za(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Aa=Ia(tr),Oa=ce||function(t,e){return pe.setTimeout(t,e)},Ma=Ia(er);function La(t,e,n){var i=e+"";return Ma(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Ae(m,(function(n){var i="_."+n[0];e&n[1]&&!Ie(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(lt);return e?e[1].split(ct):[]}(i),n)))}function Ia(t){var e=0,n=0;return function(){var i=bn(),a=16-(i-n);if(n=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Na(t,e){var n=-1,i=t.length,a=i-1;for(e=e===r?i:e;++n<e;){var o=Gi(n,a),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var Da=function(t){var e=No(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,(function(t,n,i,r){e.push(i?r.replace(vt,"$1"):n||t)})),e}));function Ra(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Pa(t){if(null!=t){try{return Nt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fa(t){if(t instanceof qn)return t.clone();var e=new jn(t.__wrapped__,t.__chain__);return e.__actions__=Ar(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ua=Ji((function(t,e){return Ko(t)?hi(t,mi(e,1,Ko,!0)):[]})),Va=Ji((function(t,e){var n=Qa(e);return Ko(n)&&(n=r),Ko(t)?hi(t,mi(e,1,Ko,!0),ua(n,2)):[]})),Ba=Ji((function(t,e){var n=Qa(e);return Ko(n)&&(n=r),Ko(t)?hi(t,mi(e,1,Ko,!0),r,n):[]}));function za(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ds(n);return r<0&&(r=Ge(i+r,0)),ze(t,ua(e,3),r)}function ja(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i-1;return n!==r&&(a=ds(n),a=n<0?Ge(i+a,0):kn(a,i-1)),ze(t,ua(e,3),a,!0)}function qa(t){return(null==t?0:t.length)?mi(t,1):[]}function Wa(t){return t&&t.length?t[0]:r}var Ha=Ji((function(t){var e=De(t,mr);return e.length&&e[0]===t[0]?Ai(e):[]})),Ka=Ji((function(t){var e=Qa(t),n=De(t,mr);return e===Qa(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Ai(n,ua(e,2)):[]})),Ga=Ji((function(t){var e=Qa(t),n=De(t,mr);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Ai(n,r,e):[]}));function Qa(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Ja=Ji(Xa);function Xa(t,e){return t&&t.length&&e&&e.length?Hi(t,e):t}var Ya=na((function(t,e){var n=null==t?0:t.length,i=oi(t,e);return Ki(t,De(e,(function(t){return ga(t,n)?+t:t})).sort(Tr)),i}));function $a(t){return null==t?t:En.call(t)}var to=Ji((function(t){return cr(mi(t,1,Ko,!0))})),eo=Ji((function(t){var e=Qa(t);return Ko(e)&&(e=r),cr(mi(t,1,Ko,!0),ua(e,2))})),no=Ji((function(t){var e=Qa(t);return e="function"==typeof e?e:r,cr(mi(t,1,Ko,!0),r,e)}));function io(t){if(!t||!t.length)return[];var e=0;return t=Le(t,(function(t){if(Ko(t))return e=Ge(t.length,e),!0})),Xe(e,(function(e){return De(t,Ke(e))}))}function ro(t,e){if(!t||!t.length)return[];var n=io(t);return null==e?n:De(n,(function(t){return xe(e,r,t)}))}var ao=Ji((function(t,e){return Ko(t)?hi(t,e):[]})),oo=Ji((function(t){return pr(Le(t,Ko))})),so=Ji((function(t){var e=Qa(t);return Ko(e)&&(e=r),pr(Le(t,Ko),ua(e,2))})),uo=Ji((function(t){var e=Qa(t);return e="function"==typeof e?e:r,pr(Le(t,Ko),r,e)})),lo=Ji(io);var co=Ji((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,ro(t,n)}));function ho(t){var e=Vn(t);return e.__chain__=!0,e}function fo(t,e){return e(t)}var vo=na((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return oi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof qn&&ga(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:fo,args:[a],thisArg:r}),new jn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(a)}));var po=Mr((function(t,e,n){Dt.call(t,n)?++t[n]:ai(t,n,1)}));var yo=Fr(za),mo=Fr(ja);function go(t,e){return(qo(t)?Ae:fi)(t,ua(e,3))}function ko(t,e){return(qo(t)?Oe:vi)(t,ua(e,3))}var bo=Mr((function(t,e,n){Dt.call(t,n)?t[n].push(e):ai(t,n,[e])}));var wo=Ji((function(t,e,i){var r=-1,a="function"==typeof e,o=Ho(t)?n(t.length):[];return fi(t,(function(t){o[++r]=a?xe(e,t,i):Oi(t,e,i)})),o})),_o=Mr((function(t,e,n){ai(t,n,e)}));function Eo(t,e){return(qo(t)?De:Ui)(t,ua(e,3))}var So=Mr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Co=Ji((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ka(t,e[0],e[1])?e=[]:n>2&&ka(e[0],e[1],e[2])&&(e=[e[0]]),qi(t,mi(e,1),[])})),To=re||function(){return pe.Date.now()};function xo(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Xr(t,h,r,r,r,r,e)}function Zo(t,e){var n;if("function"!=typeof e)throw new At(a);return t=ds(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Ao=Ji((function(t,e,n){var i=1;if(n.length){var r=hn(n,sa(Ao));i|=l}return Xr(t,i,e,n,r)})),Oo=Ji((function(t,e,n){var i=3;if(n.length){var r=hn(n,sa(Oo));i|=l}return Xr(e,i,t,n,r)}));function Mo(t,e,n){var i,o,s,u,l,c,h=0,f=!1,v=!1,d=!0;if("function"!=typeof t)throw new At(a);function p(e){var n=i,a=o;return i=o=r,h=e,u=t.apply(a,n)}function y(t){var n=t-c;return c===r||n>=e||n<0||v&&t-h>=s}function m(){var t=To();if(y(t))return g(t);l=Oa(m,function(t){var n=e-(t-c);return v?kn(n,s-(t-h)):n}(t))}function g(t){return l=r,d&&i?p(t):(i=o=r,u)}function k(){var t=To(),n=y(t);if(i=arguments,o=this,c=t,n){if(l===r)return function(t){return h=t,l=Oa(m,e),f?p(t):u}(c);if(v)return _r(l),l=Oa(m,e),p(c)}return l===r&&(l=Oa(m,e)),u}return e=ys(e)||0,ts(n)&&(f=!!n.leading,s=(v="maxWait"in n)?Ge(ys(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),k.cancel=function(){l!==r&&_r(l),h=0,i=c=o=l=r},k.flush=function(){return l===r?u:g(To())},k}var Lo=Ji((function(t,e){return ci(t,1,e)})),Io=Ji((function(t,e,n){return ci(t,ys(e)||0,n)}));function No(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new At(a);var n=function n(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(No.Cache||Kn),n}function Do(t){if("function"!=typeof t)throw new At(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}No.Cache=Kn;var Ro=br((function(t,e){var n=(e=1==e.length&&qo(e[0])?De(e[0],$e(ua())):De(mi(e,1),$e(ua()))).length;return Ji((function(i){for(var r=-1,a=kn(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return xe(t,this,i)}))})),Po=Ji((function(t,e){var n=hn(e,sa(Po));return Xr(t,l,r,e,n)})),Fo=Ji((function(t,e){var n=hn(e,sa(Fo));return Xr(t,c,r,e,n)})),Uo=na((function(t,e){return Xr(t,f,r,r,r,e)}));function Vo(t,e){return t===e||t!==t&&e!==e}var Bo=Hr(Ti),zo=Hr((function(t,e){return t>=e})),jo=Mi(function(){return arguments}())?Mi:function(t){return es(t)&&Dt.call(t,"callee")&&!Gt.call(t,"callee")},qo=n.isArray,Wo=we?$e(we):function(t){return es(t)&&Ci(t)==N};function Ho(t){return null!=t&&$o(t.length)&&!Xo(t)}function Ko(t){return es(t)&&Ho(t)}var Go=me||yu,Qo=_e?$e(_e):function(t){return es(t)&&Ci(t)==w};function Jo(t){if(!es(t))return!1;var e=Ci(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rs(t)}function Xo(t){if(!ts(t))return!1;var e=Ci(t);return e==E||e==S||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Yo(t){return"number"==typeof t&&t==ds(t)}function $o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var ns=Ee?$e(Ee):function(t){return es(t)&&da(t)==C};function is(t){return"number"==typeof t||es(t)&&Ci(t)==T}function rs(t){if(!es(t)||Ci(t)!=x)return!1;var e=Ht(t);if(null===e)return!0;var n=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Nt.call(n)==Ut}var as=Se?$e(Se):function(t){return es(t)&&Ci(t)==A};var os=Ce?$e(Ce):function(t){return es(t)&&da(t)==O};function ss(t){return"string"==typeof t||!qo(t)&&es(t)&&Ci(t)==M}function us(t){return"symbol"==typeof t||es(t)&&Ci(t)==L}var ls=Te?$e(Te):function(t){return es(t)&&$o(t.length)&&!!ue[Ci(t)]};var cs=Hr(Fi),hs=Hr((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(Ho(t))return ss(t)?pn(t):Ar(t);if(Xt&&t[Xt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Xt]());var e=da(t);return(e==C?ln:e==O?fn:Vs)(t)}function vs(t){return t?(t=ys(t))===v||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function ds(t){var e=vs(t),n=e%1;return e===e?n?e-n:e:0}function ps(t){return t?si(ds(t),0,y):0}function ys(t){if("number"==typeof t)return t;if(us(t))return p;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ye(t);var n=mt.test(t);return n||kt.test(t)?fe(t.slice(2),n?2:8):yt.test(t)?p:+t}function ms(t){return Or(t,Ls(t))}function gs(t){return null==t?"":lr(t)}var ks=Lr((function(t,e){if(Ea(e)||Ho(e))Or(e,Ms(e),t);else for(var n in e)Dt.call(e,n)&&ei(t,n,e[n])})),bs=Lr((function(t,e){Or(e,Ls(e),t)})),ws=Lr((function(t,e,n,i){Or(e,Ls(e),t,i)})),_s=Lr((function(t,e,n,i){Or(e,Ms(e),t,i)})),Es=na(oi);var Ss=Ji((function(t,e){t=Tt(t);var n=-1,i=e.length,a=i>2?e[2]:r;for(a&&ka(e[0],e[1],a)&&(i=1);++n<i;)for(var o=e[n],s=Ls(o),u=-1,l=s.length;++u<l;){var c=s[u],h=t[c];(h===r||Vo(h,Lt[c])&&!Dt.call(t,c))&&(t[c]=o[c])}return t})),Cs=Ji((function(t){return t.push(r,$r),xe(Ns,r,t)}));function Ts(t,e,n){var i=null==t?r:Ei(t,e);return i===r?n:i}function xs(t,e){return null!=t&&pa(t,e,Zi)}var Zs=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),t[e]=n}),tu(iu)),As=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),Dt.call(t,e)?t[e].push(n):t[e]=[n]}),ua),Os=Ji(Oi);function Ms(t){return Ho(t)?Jn(t):Ri(t)}function Ls(t){return Ho(t)?Jn(t,!0):Pi(t)}var Is=Lr((function(t,e,n){zi(t,e,n)})),Ns=Lr((function(t,e,n,i){zi(t,e,n,i)})),Ds=na((function(t,e){var n={};if(null==t)return n;var i=!1;e=De(e,(function(e){return e=kr(e,t),i||(i=e.length>1),e})),Or(t,ra(t),n),i&&(n=ui(n,7,ta));for(var r=e.length;r--;)hr(n,e[r]);return n}));var Rs=na((function(t,e){return null==t?{}:function(t,e){return Wi(t,e,(function(e,n){return xs(t,n)}))}(t,e)}));function Ps(t,e){if(null==t)return{};var n=De(ra(t),(function(t){return[t]}));return e=ua(e),Wi(t,n,(function(t,n){return e(t,n[0])}))}var Fs=Jr(Ms),Us=Jr(Ls);function Vs(t){return null==t?[]:tn(t,Ms(t))}var Bs=Rr((function(t,e,n){return e=e.toLowerCase(),t+(n?zs(e):e)}));function zs(t){return Js(gs(t).toLowerCase())}function js(t){return(t=gs(t))&&t.replace(wt,an).replace(ee,"")}var qs=Rr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ws=Rr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Hs=Dr("toLowerCase");var Ks=Rr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Gs=Rr((function(t,e,n){return t+(n?" ":"")+Js(e)}));var Qs=Rr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Js=Dr("toUpperCase");function Xs(t,e,n){return t=gs(t),(e=n?r:e)===r?function(t){return ae.test(t)}(t)?function(t){return t.match(ie)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Ys=Ji((function(t,e){try{return xe(t,r,e)}catch(n){return Jo(n)?n:new st(n)}})),$s=na((function(t,e){return Ae(e,(function(e){e=Ra(e),ai(t,e,Ao(t[e],t))})),t}));function tu(t){return function(){return t}}var eu=Ur(),nu=Ur(!0);function iu(t){return t}function ru(t){return Di("function"==typeof t?t:ui(t,1))}var au=Ji((function(t,e){return function(n){return Oi(n,t,e)}})),ou=Ji((function(t,e){return function(n){return Oi(t,n,e)}}));function su(t,e,n){var i=Ms(e),r=_i(e,i);null!=n||ts(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=_i(e,Ms(e)));var a=!(ts(n)&&"chain"in n)||!!n.chain,o=Xo(t);return Ae(r,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=Ar(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Re([this.value()],arguments))})})),t}function uu(){}var lu=jr(De),cu=jr(Me),hu=jr(Ue);function fu(t){return ba(t)?Ke(Ra(t)):function(t){return function(e){return Ei(e,t)}}(t)}var vu=Wr(),du=Wr(!0);function pu(){return[]}function yu(){return!1}var mu=zr((function(t,e){return t+e}),0),gu=Gr("ceil"),ku=zr((function(t,e){return t/e}),1),bu=Gr("floor");var wu=zr((function(t,e){return t*e}),1),_u=Gr("round"),Eu=zr((function(t,e){return t-e}),0);return Vn.after=function(t,e){if("function"!=typeof e)throw new At(a);return t=ds(t),function(){if(--t<1)return e.apply(this,arguments)}},Vn.ary=xo,Vn.assign=ks,Vn.assignIn=bs,Vn.assignInWith=ws,Vn.assignWith=_s,Vn.at=Es,Vn.before=Zo,Vn.bind=Ao,Vn.bindAll=$s,Vn.bindKey=Oo,Vn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qo(t)?t:[t]},Vn.chain=ho,Vn.chunk=function(t,e,i){e=(i?ka(t,e,i):e===r)?1:Ge(ds(e),0);var a=null==t?0:t.length;if(!a||e<1)return[];for(var o=0,s=0,u=n(ve(a/e));o<a;)u[s++]=ir(t,o,o+=e);return u},Vn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},Vn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),i=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Re(qo(i)?Ar(i):[i],mi(e,1))},Vn.cond=function(t){var e=null==t?0:t.length,n=ua();return t=e?De(t,(function(t){if("function"!=typeof t[1])throw new At(a);return[n(t[0]),t[1]]})):[],Ji((function(n){for(var i=-1;++i<e;){var r=t[i];if(xe(r[0],this,n))return xe(r[1],this,n)}}))},Vn.conforms=function(t){return function(t){var e=Ms(t);return function(n){return li(n,t,e)}}(ui(t,1))},Vn.constant=tu,Vn.countBy=po,Vn.create=function(t,e){var n=Bn(t);return null==e?n:ri(n,e)},Vn.curry=function t(e,n,i){var a=Xr(e,8,r,r,r,r,r,n=i?r:n);return a.placeholder=t.placeholder,a},Vn.curryRight=function t(e,n,i){var a=Xr(e,u,r,r,r,r,r,n=i?r:n);return a.placeholder=t.placeholder,a},Vn.debounce=Mo,Vn.defaults=Ss,Vn.defaultsDeep=Cs,Vn.defer=Lo,Vn.delay=Io,Vn.difference=Ua,Vn.differenceBy=Va,Vn.differenceWith=Ba,Vn.drop=function(t,e,n){var i=null==t?0:t.length;return i?ir(t,(e=n||e===r?1:ds(e))<0?0:e,i):[]},Vn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?ir(t,0,(e=i-(e=n||e===r?1:ds(e)))<0?0:e):[]},Vn.dropRightWhile=function(t,e){return t&&t.length?vr(t,ua(e,3),!0,!0):[]},Vn.dropWhile=function(t,e){return t&&t.length?vr(t,ua(e,3),!0):[]},Vn.fill=function(t,e,n,i){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&ka(t,e,n)&&(n=0,i=a),function(t,e,n,i){var a=t.length;for((n=ds(n))<0&&(n=-n>a?0:a+n),(i=i===r||i>a?a:ds(i))<0&&(i+=a),i=n>i?0:ps(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Vn.filter=function(t,e){return(qo(t)?Le:yi)(t,ua(e,3))},Vn.flatMap=function(t,e){return mi(Eo(t,e),1)},Vn.flatMapDeep=function(t,e){return mi(Eo(t,e),v)},Vn.flatMapDepth=function(t,e,n){return n=n===r?1:ds(n),mi(Eo(t,e),n)},Vn.flatten=qa,Vn.flattenDeep=function(t){return(null==t?0:t.length)?mi(t,v):[]},Vn.flattenDepth=function(t,e){return(null==t?0:t.length)?mi(t,e=e===r?1:ds(e)):[]},Vn.flip=function(t){return Xr(t,512)},Vn.flow=eu,Vn.flowRight=nu,Vn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Vn.functions=function(t){return null==t?[]:_i(t,Ms(t))},Vn.functionsIn=function(t){return null==t?[]:_i(t,Ls(t))},Vn.groupBy=bo,Vn.initial=function(t){return(null==t?0:t.length)?ir(t,0,-1):[]},Vn.intersection=Ha,Vn.intersectionBy=Ka,Vn.intersectionWith=Ga,Vn.invert=Zs,Vn.invertBy=As,Vn.invokeMap=wo,Vn.iteratee=ru,Vn.keyBy=_o,Vn.keys=Ms,Vn.keysIn=Ls,Vn.map=Eo,Vn.mapKeys=function(t,e){var n={};return e=ua(e,3),bi(t,(function(t,i,r){ai(n,e(t,i,r),t)})),n},Vn.mapValues=function(t,e){var n={};return e=ua(e,3),bi(t,(function(t,i,r){ai(n,i,e(t,i,r))})),n},Vn.matches=function(t){return Vi(ui(t,1))},Vn.matchesProperty=function(t,e){return Bi(t,ui(e,1))},Vn.memoize=No,Vn.merge=Is,Vn.mergeWith=Ns,Vn.method=au,Vn.methodOf=ou,Vn.mixin=su,Vn.negate=Do,Vn.nthArg=function(t){return t=ds(t),Ji((function(e){return ji(e,t)}))},Vn.omit=Ds,Vn.omitBy=function(t,e){return Ps(t,Do(ua(e)))},Vn.once=function(t){return Zo(2,t)},Vn.orderBy=function(t,e,n,i){return null==t?[]:(qo(e)||(e=null==e?[]:[e]),qo(n=i?r:n)||(n=null==n?[]:[n]),qi(t,e,n))},Vn.over=lu,Vn.overArgs=Ro,Vn.overEvery=cu,Vn.overSome=hu,Vn.partial=Po,Vn.partialRight=Fo,Vn.partition=So,Vn.pick=Rs,Vn.pickBy=Ps,Vn.property=fu,Vn.propertyOf=function(t){return function(e){return null==t?r:Ei(t,e)}},Vn.pull=Ja,Vn.pullAll=Xa,Vn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hi(t,e,ua(n,2)):t},Vn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hi(t,e,r,n):t},Vn.pullAt=Ya,Vn.range=vu,Vn.rangeRight=du,Vn.rearg=Uo,Vn.reject=function(t,e){return(qo(t)?Le:yi)(t,Do(ua(e,3)))},Vn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=ua(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return Ki(t,r),n},Vn.rest=function(t,e){if("function"!=typeof t)throw new At(a);return Ji(t,e=e===r?e:ds(e))},Vn.reverse=$a,Vn.sampleSize=function(t,e,n){return e=(n?ka(t,e,n):e===r)?1:ds(e),(qo(t)?Yn:Yi)(t,e)},Vn.set=function(t,e,n){return null==t?t:$i(t,e,n)},Vn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:$i(t,e,n,i)},Vn.shuffle=function(t){return(qo(t)?$n:nr)(t)},Vn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ka(t,e,n)?(e=0,n=i):(e=null==e?0:ds(e),n=n===r?i:ds(n)),ir(t,e,n)):[]},Vn.sortBy=Co,Vn.sortedUniq=function(t){return t&&t.length?sr(t):[]},Vn.sortedUniqBy=function(t,e){return t&&t.length?sr(t,ua(e,2)):[]},Vn.split=function(t,e,n){return n&&"number"!=typeof n&&ka(t,e,n)&&(e=n=r),(n=n===r?y:n>>>0)?(t=gs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=lr(e))&&un(t)?wr(pn(t),0,n):t.split(e,n):[]},Vn.spread=function(t,e){if("function"!=typeof t)throw new At(a);return e=null==e?0:Ge(ds(e),0),Ji((function(n){var i=n[e],r=wr(n,0,e);return i&&Re(r,i),xe(t,this,r)}))},Vn.tail=function(t){var e=null==t?0:t.length;return e?ir(t,1,e):[]},Vn.take=function(t,e,n){return t&&t.length?ir(t,0,(e=n||e===r?1:ds(e))<0?0:e):[]},Vn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?ir(t,(e=i-(e=n||e===r?1:ds(e)))<0?0:e,i):[]},Vn.takeRightWhile=function(t,e){return t&&t.length?vr(t,ua(e,3),!1,!0):[]},Vn.takeWhile=function(t,e){return t&&t.length?vr(t,ua(e,3)):[]},Vn.tap=function(t,e){return e(t),t},Vn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new At(a);return ts(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Mo(t,e,{leading:i,maxWait:e,trailing:r})},Vn.thru=fo,Vn.toArray=fs,Vn.toPairs=Fs,Vn.toPairsIn=Us,Vn.toPath=function(t){return qo(t)?De(t,Ra):us(t)?[t]:Ar(Da(gs(t)))},Vn.toPlainObject=ms,Vn.transform=function(t,e,n){var i=qo(t),r=i||Go(t)||ls(t);if(e=ua(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:ts(t)&&Xo(a)?Bn(Ht(t)):{}}return(r?Ae:bi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Vn.unary=function(t){return xo(t,1)},Vn.union=to,Vn.unionBy=eo,Vn.unionWith=no,Vn.uniq=function(t){return t&&t.length?cr(t):[]},Vn.uniqBy=function(t,e){return t&&t.length?cr(t,ua(e,2)):[]},Vn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?cr(t,r,e):[]},Vn.unset=function(t,e){return null==t||hr(t,e)},Vn.unzip=io,Vn.unzipWith=ro,Vn.update=function(t,e,n){return null==t?t:fr(t,e,gr(n))},Vn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:fr(t,e,gr(n),i)},Vn.values=Vs,Vn.valuesIn=function(t){return null==t?[]:tn(t,Ls(t))},Vn.without=ao,Vn.words=Xs,Vn.wrap=function(t,e){return Po(gr(e),t)},Vn.xor=oo,Vn.xorBy=so,Vn.xorWith=uo,Vn.zip=lo,Vn.zipObject=function(t,e){return yr(t||[],e||[],ei)},Vn.zipObjectDeep=function(t,e){return yr(t||[],e||[],$i)},Vn.zipWith=co,Vn.entries=Fs,Vn.entriesIn=Us,Vn.extend=bs,Vn.extendWith=ws,su(Vn,Vn),Vn.add=mu,Vn.attempt=Ys,Vn.camelCase=Bs,Vn.capitalize=zs,Vn.ceil=gu,Vn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=ys(n))===n?n:0),e!==r&&(e=(e=ys(e))===e?e:0),si(ys(t),e,n)},Vn.clone=function(t){return ui(t,4)},Vn.cloneDeep=function(t){return ui(t,5)},Vn.cloneDeepWith=function(t,e){return ui(t,5,e="function"==typeof e?e:r)},Vn.cloneWith=function(t,e){return ui(t,4,e="function"==typeof e?e:r)},Vn.conformsTo=function(t,e){return null==e||li(t,e,Ms(e))},Vn.deburr=js,Vn.defaultTo=function(t,e){return null==t||t!==t?e:t},Vn.divide=ku,Vn.endsWith=function(t,e,n){t=gs(t),e=lr(e);var i=t.length,a=n=n===r?i:si(ds(n),0,i);return(n-=e.length)>=0&&t.slice(n,a)==e},Vn.eq=Vo,Vn.escape=function(t){return(t=gs(t))&&X.test(t)?t.replace(Q,on):t},Vn.escapeRegExp=function(t){return(t=gs(t))&&at.test(t)?t.replace(rt,"\\$&"):t},Vn.every=function(t,e,n){var i=qo(t)?Me:di;return n&&ka(t,e,n)&&(e=r),i(t,ua(e,3))},Vn.find=yo,Vn.findIndex=za,Vn.findKey=function(t,e){return Be(t,ua(e,3),bi)},Vn.findLast=mo,Vn.findLastIndex=ja,Vn.findLastKey=function(t,e){return Be(t,ua(e,3),wi)},Vn.floor=bu,Vn.forEach=go,Vn.forEachRight=ko,Vn.forIn=function(t,e){return null==t?t:gi(t,ua(e,3),Ls)},Vn.forInRight=function(t,e){return null==t?t:ki(t,ua(e,3),Ls)},Vn.forOwn=function(t,e){return t&&bi(t,ua(e,3))},Vn.forOwnRight=function(t,e){return t&&wi(t,ua(e,3))},Vn.get=Ts,Vn.gt=Bo,Vn.gte=zo,Vn.has=function(t,e){return null!=t&&pa(t,e,xi)},Vn.hasIn=xs,Vn.head=Wa,Vn.identity=iu,Vn.includes=function(t,e,n,i){t=Ho(t)?t:Vs(t),n=n&&!i?ds(n):0;var r=t.length;return n<0&&(n=Ge(r+n,0)),ss(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&je(t,e,n)>-1},Vn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ds(n);return r<0&&(r=Ge(i+r,0)),je(t,e,r)},Vn.inRange=function(t,e,n){return e=vs(e),n===r?(n=e,e=0):n=vs(n),function(t,e,n){return t>=kn(e,n)&&t<Ge(e,n)}(t=ys(t),e,n)},Vn.invoke=Os,Vn.isArguments=jo,Vn.isArray=qo,Vn.isArrayBuffer=Wo,Vn.isArrayLike=Ho,Vn.isArrayLikeObject=Ko,Vn.isBoolean=function(t){return!0===t||!1===t||es(t)&&Ci(t)==b},Vn.isBuffer=Go,Vn.isDate=Qo,Vn.isElement=function(t){return es(t)&&1===t.nodeType&&!rs(t)},Vn.isEmpty=function(t){if(null==t)return!0;if(Ho(t)&&(qo(t)||"string"==typeof t||"function"==typeof t.splice||Go(t)||ls(t)||jo(t)))return!t.length;var e=da(t);if(e==C||e==O)return!t.size;if(Ea(t))return!Ri(t).length;for(var n in t)if(Dt.call(t,n))return!1;return!0},Vn.isEqual=function(t,e){return Li(t,e)},Vn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Li(t,e,r,n):!!i},Vn.isError=Jo,Vn.isFinite=function(t){return"number"==typeof t&&ke(t)},Vn.isFunction=Xo,Vn.isInteger=Yo,Vn.isLength=$o,Vn.isMap=ns,Vn.isMatch=function(t,e){return t===e||Ii(t,e,ca(e))},Vn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Ii(t,e,ca(e),n)},Vn.isNaN=function(t){return is(t)&&t!=+t},Vn.isNative=function(t){if(_a(t))throw new st("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ni(t)},Vn.isNil=function(t){return null==t},Vn.isNull=function(t){return null===t},Vn.isNumber=is,Vn.isObject=ts,Vn.isObjectLike=es,Vn.isPlainObject=rs,Vn.isRegExp=as,Vn.isSafeInteger=function(t){return Yo(t)&&t>=-9007199254740991&&t<=d},Vn.isSet=os,Vn.isString=ss,Vn.isSymbol=us,Vn.isTypedArray=ls,Vn.isUndefined=function(t){return t===r},Vn.isWeakMap=function(t){return es(t)&&da(t)==I},Vn.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==Ci(t)},Vn.join=function(t,e){return null==t?"":be.call(t,e)},Vn.kebabCase=qs,Vn.last=Qa,Vn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i;return n!==r&&(a=(a=ds(n))<0?Ge(i+a,0):kn(a,i-1)),e===e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,a):ze(t,We,a,!0)},Vn.lowerCase=Ws,Vn.lowerFirst=Hs,Vn.lt=cs,Vn.lte=hs,Vn.max=function(t){return t&&t.length?pi(t,iu,Ti):r},Vn.maxBy=function(t,e){return t&&t.length?pi(t,ua(e,2),Ti):r},Vn.mean=function(t){return He(t,iu)},Vn.meanBy=function(t,e){return He(t,ua(e,2))},Vn.min=function(t){return t&&t.length?pi(t,iu,Fi):r},Vn.minBy=function(t,e){return t&&t.length?pi(t,ua(e,2),Fi):r},Vn.stubArray=pu,Vn.stubFalse=yu,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=wu,Vn.nth=function(t,e){return t&&t.length?ji(t,ds(e)):r},Vn.noConflict=function(){return pe._===this&&(pe._=Vt),this},Vn.noop=uu,Vn.now=To,Vn.pad=function(t,e,n){t=gs(t);var i=(e=ds(e))?dn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return qr(de(r),n)+t+qr(ve(r),n)},Vn.padEnd=function(t,e,n){t=gs(t);var i=(e=ds(e))?dn(t):0;return e&&i<e?t+qr(e-i,n):t},Vn.padStart=function(t,e,n){t=gs(t);var i=(e=ds(e))?dn(t):0;return e&&i<e?qr(e-i,n)+t:t},Vn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(gs(t).replace(ot,""),e||0)},Vn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ka(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=vs(t),e===r?(e=t,t=0):e=vs(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var a=_n();return kn(t+a*(e-t+he("1e-"+((a+"").length-1))),e)}return Gi(t,e)},Vn.reduce=function(t,e,n){var i=qo(t)?Pe:Qe,r=arguments.length<3;return i(t,ua(e,4),n,r,fi)},Vn.reduceRight=function(t,e,n){var i=qo(t)?Fe:Qe,r=arguments.length<3;return i(t,ua(e,4),n,r,vi)},Vn.repeat=function(t,e,n){return e=(n?ka(t,e,n):e===r)?1:ds(e),Qi(gs(t),e)},Vn.replace=function(){var t=arguments,e=gs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Vn.result=function(t,e,n){var i=-1,a=(e=kr(e,t)).length;for(a||(a=1,t=r);++i<a;){var o=null==t?r:t[Ra(e[i])];o===r&&(i=a,o=n),t=Xo(o)?o.call(t):o}return t},Vn.round=_u,Vn.runInContext=t,Vn.sample=function(t){return(qo(t)?Xn:Xi)(t)},Vn.size=function(t){if(null==t)return 0;if(Ho(t))return ss(t)?dn(t):t.length;var e=da(t);return e==C||e==O?t.size:Ri(t).length},Vn.snakeCase=Ks,Vn.some=function(t,e,n){var i=qo(t)?Ue:rr;return n&&ka(t,e,n)&&(e=r),i(t,ua(e,3))},Vn.sortedIndex=function(t,e){return ar(t,e)},Vn.sortedIndexBy=function(t,e,n){return or(t,e,ua(n,2))},Vn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=ar(t,e);if(i<n&&Vo(t[i],e))return i}return-1},Vn.sortedLastIndex=function(t,e){return ar(t,e,!0)},Vn.sortedLastIndexBy=function(t,e,n){return or(t,e,ua(n,2),!0)},Vn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ar(t,e,!0)-1;if(Vo(t[n],e))return n}return-1},Vn.startCase=Gs,Vn.startsWith=function(t,e,n){return t=gs(t),n=null==n?0:si(ds(n),0,t.length),e=lr(e),t.slice(n,n+e.length)==e},Vn.subtract=Eu,Vn.sum=function(t){return t&&t.length?Je(t,iu):0},Vn.sumBy=function(t,e){return t&&t.length?Je(t,ua(e,2)):0},Vn.template=function(t,e,n){var i=Vn.templateSettings;n&&ka(t,e,n)&&(e=r),t=gs(t),e=ws({},e,i,Yr);var a,o,s=ws({},e.imports,i.imports,Yr),u=Ms(s),l=tn(s,u),c=0,h=e.interpolate||_t,f="__p += '",v=xt((e.escape||_t).source+"|"+h.source+"|"+(h===tt?dt:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),d="//# sourceURL="+(Dt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(v,(function(e,n,i,r,s,u){return i||(i=r),f+=t.slice(c,u).replace(Et,sn),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),f+="';\n";var p=Dt.call(e,"variable")&&e.variable;if(p){if(ft.test(p))throw new st("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(W,""):f).replace(H,"$1").replace(K,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y=Ys((function(){return St(u,d+"return "+f).apply(r,l)}));if(y.source=f,Jo(y))throw y;return y},Vn.times=function(t,e){if((t=ds(t))<1||t>d)return[];var n=y,i=kn(t,y);e=ua(e),t-=y;for(var r=Xe(i,e);++n<t;)e(n);return r},Vn.toFinite=vs,Vn.toInteger=ds,Vn.toLength=ps,Vn.toLower=function(t){return gs(t).toLowerCase()},Vn.toNumber=ys,Vn.toSafeInteger=function(t){return t?si(ds(t),-9007199254740991,d):0===t?t:0},Vn.toString=gs,Vn.toUpper=function(t){return gs(t).toUpperCase()},Vn.trim=function(t,e,n){if((t=gs(t))&&(n||e===r))return Ye(t);if(!t||!(e=lr(e)))return t;var i=pn(t),a=pn(e);return wr(i,nn(i,a),rn(i,a)+1).join("")},Vn.trimEnd=function(t,e,n){if((t=gs(t))&&(n||e===r))return t.slice(0,yn(t)+1);if(!t||!(e=lr(e)))return t;var i=pn(t);return wr(i,0,rn(i,pn(e))+1).join("")},Vn.trimStart=function(t,e,n){if((t=gs(t))&&(n||e===r))return t.replace(ot,"");if(!t||!(e=lr(e)))return t;var i=pn(t);return wr(i,nn(i,pn(e))).join("")},Vn.truncate=function(t,e){var n=30,i="...";if(ts(e)){var a="separator"in e?e.separator:a;n="length"in e?ds(e.length):n,i="omission"in e?lr(e.omission):i}var o=(t=gs(t)).length;if(un(t)){var s=pn(t);o=s.length}if(n>=o)return t;var u=n-dn(i);if(u<1)return i;var l=s?wr(s,0,u).join(""):t.slice(0,u);if(a===r)return l+i;if(s&&(u+=l.length-u),as(a)){if(t.slice(u).search(a)){var c,h=l;for(a.global||(a=xt(a.source,gs(pt.exec(a))+"g")),a.lastIndex=0;c=a.exec(h);)var f=c.index;l=l.slice(0,f===r?u:f)}}else if(t.indexOf(lr(a),u)!=u){var v=l.lastIndexOf(a);v>-1&&(l=l.slice(0,v))}return l+i},Vn.unescape=function(t){return(t=gs(t))&&J.test(t)?t.replace(G,mn):t},Vn.uniqueId=function(t){var e=++Rt;return gs(t)+e},Vn.upperCase=Qs,Vn.upperFirst=Js,Vn.each=go,Vn.eachRight=ko,Vn.first=Wa,su(Vn,function(){var t={};return bi(Vn,(function(e,n){Dt.call(Vn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Vn.VERSION="4.17.21",Ae(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Vn[t].placeholder=Vn})),Ae(["drop","take"],(function(t,e){qn.prototype[t]=function(n){n=n===r?1:Ge(ds(n),0);var i=this.__filtered__&&!e?new qn(this):this.clone();return i.__filtered__?i.__takeCount__=kn(n,i.__takeCount__):i.__views__.push({size:kn(n,y),type:t+(i.__dir__<0?"Right":"")}),i},qn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ae(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;qn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ua(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Ae(["head","last"],(function(t,e){var n="take"+(e?"Right":"");qn.prototype[t]=function(){return this[n](1).value()[0]}})),Ae(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");qn.prototype[t]=function(){return this.__filtered__?new qn(this):this[n](1)}})),qn.prototype.compact=function(){return this.filter(iu)},qn.prototype.find=function(t){return this.filter(t).head()},qn.prototype.findLast=function(t){return this.reverse().find(t)},qn.prototype.invokeMap=Ji((function(t,e){return"function"==typeof t?new qn(this):this.map((function(n){return Oi(n,t,e)}))})),qn.prototype.reject=function(t){return this.filter(Do(ua(t)))},qn.prototype.slice=function(t,e){t=ds(t);var n=this;return n.__filtered__&&(t>0||e<0)?new qn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=ds(e))<0?n.dropRight(-e):n.take(e-t)),n)},qn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},qn.prototype.toArray=function(){return this.take(y)},bi(qn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),a=Vn[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);a&&(Vn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,u=e instanceof qn,l=s[0],c=u||qo(e),h=function(t){var e=a.apply(Vn,Re([t],s));return i&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,v=!!this.__actions__.length,d=o&&!f,p=u&&!v;if(!o&&c){e=p?e:new qn(this);var y=t.apply(e,s);return y.__actions__.push({func:fo,args:[h],thisArg:r}),new jn(y,f)}return d&&p?t.apply(this,s):(y=this.thru(h),d?i?y.value()[0]:y.value():y)})})),Ae(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ot[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Vn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(qo(r)?r:[],t)}return this[n]((function(n){return e.apply(qo(n)?n:[],t)}))}})),bi(qn.prototype,(function(t,e){var n=Vn[e];if(n){var i=n.name+"";Dt.call(Mn,i)||(Mn[i]=[]),Mn[i].push({name:e,func:n})}})),Mn[Vr(r,2).name]=[{name:"wrapper",func:r}],qn.prototype.clone=function(){var t=new qn(this.__wrapped__);return t.__actions__=Ar(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ar(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ar(this.__views__),t},qn.prototype.reverse=function(){if(this.__filtered__){var t=new qn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},qn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=qo(t),i=e<0,r=n?t.length:0,a=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=kn(e,t+o);break;case"takeRight":t=Ge(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,u=s-o,l=i?s:o-1,c=this.__iteratees__,h=c.length,f=0,v=kn(u,this.__takeCount__);if(!n||!i&&r==u&&v==u)return dr(t,this.__actions__);var d=[];t:for(;u--&&f<v;){for(var p=-1,y=t[l+=e];++p<h;){var m=c[p],g=m.iteratee,k=m.type,b=g(y);if(2==k)y=b;else if(!b){if(1==k)continue t;break t}}d[f++]=y}return d},Vn.prototype.at=vo,Vn.prototype.chain=function(){return ho(this)},Vn.prototype.commit=function(){return new jn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===r&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Vn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var i=Fa(n);i.__index__=0,i.__values__=r,e?a.__wrapped__=i:e=i;var a=i;n=n.__wrapped__}return a.__wrapped__=t,e},Vn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof qn){var e=t;return this.__actions__.length&&(e=new qn(this)),(e=e.reverse()).__actions__.push({func:fo,args:[$a],thisArg:r}),new jn(e,this.__chain__)}return this.thru($a)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return dr(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,Xt&&(Vn.prototype[Xt]=function(){return this}),Vn}();pe._=gn,(i=function(){return gn}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},888:function(t,e,n){"use strict";var i=n(9047);function r(){}function a(){}a.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},2007:function(t,e,n){t.exports=n(888)()},9047:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8820:function(t,e,n){"use strict";n.d(e,{Zs0:function(){return r}});var i=n(9983);function r(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M924.3 338.4a447.57 447.57 0 0 0-96.1-143.3 443.09 443.09 0 0 0-143-96.3A443.91 443.91 0 0 0 512 64h-2c-60.5.3-119 12.3-174.1 35.9a444.08 444.08 0 0 0-141.7 96.5 445 445 0 0 0-95 142.8A449.89 449.89 0 0 0 65 514.1c.3 69.4 16.9 138.3 47.9 199.9v152c0 25.4 20.6 46 45.9 46h151.8a447.72 447.72 0 0 0 199.5 48h2.1c59.8 0 117.7-11.6 172.3-34.3A443.2 443.2 0 0 0 827 830.5c41.2-40.9 73.6-88.7 96.3-142 23.5-55.2 35.5-113.9 35.8-174.5.2-60.9-11.6-120-34.8-175.6zM312.4 560c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.4 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48z"}}]})(t)}},5880:function(t,e,n){"use strict";n.d(e,{Dey:function(){return r}});var i=n(9983);function r(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M10.5858 13.4142L7.75735 10.5858L6.34314 12L10.5858 16.2427L17.6568 9.1716L16.2426 7.75739L10.5858 13.4142Z",fill:"currentColor"}}]})(t)}},5431:function(t,e,n){"use strict";n.d(e,{gik:function(){return r}});var i=n(9983);function r(t){return(0,i.w_)({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M19.906 17.847c0.429 0 0.79 0.21 1.102 0.636 0.31 0.422 0.468 0.944 0.468 1.56 0 0.619-0.156 1.141-0.468 1.563s-0.678 0.634-1.102 0.634c-0.451 0-0.839-0.21-1.151-0.634-0.307-0.422-0.465-0.944-0.465-1.563s0.153-1.139 0.465-1.56c0.312-0.427 0.702-0.636 1.151-0.636zM25.425 12.132c1.202 1.303 1.809 2.884 1.809 4.738 0 1.203-0.142 2.286-0.415 3.249-0.278 0.958-0.629 1.743-1.048 2.343-0.427 0.605-0.943 1.136-1.565 1.585-0.622 0.461-1.195 0.79-1.712 1.002s-1.112 0.376-1.785 0.49c-0.665 0.117-1.168 0.18-1.517 0.198-0.336 0.015-0.702 0.022-1.097 0.022-0.088 0-0.385 0.010-0.879 0.024-0.482 0.020-0.896 0.029-1.218 0.029s-0.736-0.010-1.218-0.029c-0.49-0.015-0.79-0.024-0.879-0.024-0.395 0-0.764-0.005-1.098-0.022-0.35-0.017-0.852-0.080-1.514-0.198-0.676-0.112-1.268-0.273-1.787-0.49-0.517-0.21-1.089-0.541-1.708-1.002-0.624-0.454-1.141-0.983-1.568-1.585-0.419-0.6-0.772-1.385-1.048-2.343-0.272-0.963-0.414-2.046-0.414-3.249 0-1.854 0.605-3.435 1.81-4.738-0.133-0.065-0.14-0.714-0.021-1.952 0.107-1.239 0.37-2.38 0.797-3.421 1.503 0.16 3.352 1.008 5.567 2.539 0.748-0.195 1.772-0.295 3.078-0.295 1.37 0 2.394 0.1 3.079 0.295 1.009-0.681 1.975-1.239 2.896-1.663 0.936-0.419 1.609-0.667 2.033-0.731l0.634-0.145c0.429 1.041 0.692 2.185 0.8 3.421 0.124 1.237 0.117 1.887-0.015 1.952zM16.052 24.683c2.703 0 4.741-0.324 6.125-0.973 1.38-0.651 2.082-1.99 2.082-4.008 0-1.17-0.441-2.15-1.322-2.932-0.454-0.424-0.985-0.681-1.595-0.781-0.595-0.098-1.514-0.098-2.755 0-1.236 0.1-2.082 0.145-2.537 0.145-0.619 0-1.291-0.033-2.125-0.098-0.834-0.062-1.487-0.102-1.954-0.122-0.478-0.015-0.986 0.045-1.538 0.172-0.557 0.133-1.008 0.357-1.373 0.681-0.84 0.75-1.266 1.725-1.266 2.932 0 2.019 0.684 3.357 2.050 4.006 1.365 0.653 3.397 0.975 6.101 0.975zM12.143 17.847c0.424 0 0.789 0.21 1.098 0.636 0.31 0.422 0.467 0.944 0.467 1.56 0 0.619-0.155 1.141-0.467 1.563-0.309 0.422-0.677 0.634-1.098 0.634-0.455 0-0.841-0.21-1.153-0.634-0.309-0.422-0.467-0.944-0.467-1.563s0.155-1.139 0.467-1.56c0.312-0.427 0.699-0.636 1.153-0.636z"}}]})(t)}},6355:function(t,e,n){"use strict";n.d(e,{IkZ:function(){return a},h3_:function(){return s},qL$:function(){return r},sF:function(){return o}});var i=n(9983);function r(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"}}]})(t)}function a(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"}}]})(t)}function o(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"}}]})(t)}function s(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"}}]})(t)}},3853:function(t,e,n){"use strict";n.d(e,{Tfp:function(){return o},YFh:function(){return a},bTu:function(){return r}});var i=n(9983);function r(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(t)}function a(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(t)}function o(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(t)}},3479:function(t,e,n){"use strict";n.d(e,{Lac:function(){return r},q4P:function(){return a}});var i=n(9983);function r(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z",clipRule:"evenodd"}}]})(t)}function a(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"}}]})(t)}},9983:function(t,e,n){"use strict";n.d(e,{w_:function(){return l}});var i=n(2791),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=i.createContext&&i.createContext(r),o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};function u(t){return t&&t.map((function(t,e){return i.createElement(t.tag,o({key:e},t.attr),u(t.child))}))}function l(t){return function(e){return i.createElement(c,o({attr:o({},t.attr)},e),u(t.child))}}function c(t){var e=function(e){var n,r=t.attr,a=t.size,u=t.title,l=s(t,["attr","size","title"]),c=a||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),i.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,l,{className:n,style:o(o({color:t.color||e.color},e.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),u&&i.createElement("title",null,u),t.children)};return void 0!==a?i.createElement(a.Consumer,null,(function(t){return e(t)})):e(r)}},7425:function(t,e,n){"use strict";n.d(e,{OIQ:function(){return r}});var i=n(9983);function r(t){return(0,i.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.94631 9.31555C1.42377 9.14137 1.41965 8.86034 1.95706 8.6812L21.0433 2.31913C21.5717 2.14297 21.8748 2.43878 21.7268 2.95706L16.2736 22.0433C16.1226 22.5718 15.8179 22.5901 15.5946 22.0877L12.0002 14.0002L18.0002 6.00017L10.0002 12.0002L1.94631 9.31555Z"}}]})(t)}},3688:function(t,e,n){"use strict";function i(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function r(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function a(t,e){try{var n=this.props,i=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}function o(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate)return t;var n=null,o=null,s=null;if("function"===typeof e.componentWillMount?n="componentWillMount":"function"===typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof e.componentWillReceiveProps?o="componentWillReceiveProps":"function"===typeof e.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"===typeof e.componentWillUpdate?s="componentWillUpdate":"function"===typeof e.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==s){var u=t.displayName||t.name,l="function"===typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof t.getDerivedStateFromProps&&(e.componentWillMount=i,e.componentWillReceiveProps=r),"function"===typeof e.getSnapshotBeforeUpdate){if("function"!==typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=a;var c=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var i=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,t,e,i)}}return t}n.r(e),n.d(e,{polyfill:function(){return o}}),i.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},2240:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bodyOpenClassName=e.portalClassName=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2791),o=d(a),s=d(n(4164)),u=d(n(2007)),l=d(n(4334)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(5858)),h=n(3663),f=d(h),v=n(3688);function d(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var y=e.portalClassName="ReactModalPortal",m=e.bodyOpenClassName="ReactModal__Body--open",g=h.canUseDOM&&void 0!==s.default.createPortal,k=function(t){return document.createElement(t)},b=function(){return g?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function w(t){return t()}var _=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=r=p(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.removePortal=function(){!g&&s.default.unmountComponentAtNode(r.node);var t=w(r.props.parentSelector);t&&t.contains(r.node)?t.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(t){r.portal=t},r.renderPortal=function(t){var n=b()(r,o.default.createElement(l.default,i({defaultStyles:e.defaultStyles},t)),r.node);r.portalRef(n)},p(r,n)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){h.canUseDOM&&(g||(this.node=k("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!g&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(t){return{prevParent:w(t.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(t,e,n){if(h.canUseDOM){var i=this.props,r=i.isOpen,a=i.portalClassName;t.portalClassName!==a&&(this.node.className=a);var o=n.prevParent,s=n.nextParent;s!==o&&(o.removeChild(this.node),s.appendChild(this.node)),(t.isOpen||r)&&!g&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(h.canUseDOM&&this.node&&this.portal){var t=this.portal.state,e=Date.now(),n=t.isOpen&&this.props.closeTimeoutMS&&(t.closesAt||e+this.props.closeTimeoutMS);n?(t.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-e)):this.removePortal()}}},{key:"render",value:function(){return h.canUseDOM&&g?(!this.node&&g&&(this.node=k("div")),b()(o.default.createElement(l.default,i({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(t){c.setElement(t)}}]),e}(a.Component);_.propTypes={isOpen:u.default.bool.isRequired,style:u.default.shape({content:u.default.object,overlay:u.default.object}),portalClassName:u.default.string,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,className:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),overlayClassName:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),appElement:u.default.oneOfType([u.default.instanceOf(f.default),u.default.instanceOf(h.SafeHTMLCollection),u.default.instanceOf(h.SafeNodeList),u.default.arrayOf(u.default.instanceOf(f.default))]),onAfterOpen:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,ariaHideApp:u.default.bool,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,parentSelector:u.default.func,aria:u.default.object,data:u.default.object,role:u.default.string,contentLabel:u.default.string,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func},_.defaultProps={isOpen:!1,portalClassName:y,bodyOpenClassName:m,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,e){return o.default.createElement("div",t,e)},contentElement:function(t,e){return o.default.createElement("div",t,e)}},_.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,v.polyfill)(_),e.default=_},4334:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2791),s=y(n(2007)),u=p(n(8844)),l=y(n(870)),c=p(n(5858)),h=p(n(6554)),f=n(3663),v=y(f),d=y(n(8484));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}n(5670);var m={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},g=0,k=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.setOverlayRef=function(t){n.overlay=t,n.props.overlayRef&&n.props.overlayRef(t)},n.setContentRef=function(t){n.content=t,n.props.contentRef&&n.props.contentRef(t)},n.afterClose=function(){var t=n.props,e=t.appElement,i=t.ariaHideApp,r=t.htmlOpenClassName,a=t.bodyOpenClassName,o=t.parentSelector,s=o&&o().ownerDocument||document;a&&h.remove(s.body,a),r&&h.remove(s.getElementsByTagName("html")[0],r),i&&g>0&&0===(g-=1)&&c.show(e),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(u.returnFocus(n.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),d.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(u.setupScopedFocus(n.node),u.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var t=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:t},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(t){(function(t){return"Tab"===t.code||9===t.keyCode})(t)&&(0,l.default)(n.content,t),n.props.shouldCloseOnEsc&&function(t){return"Escape"===t.code||27===t.keyCode}(t)&&(t.stopPropagation(),n.requestClose(t))},n.handleOverlayOnClick=function(t){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(t):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(t){n.props.shouldCloseOnOverlayClick||t.target!=n.overlay||t.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(t){return n.ownerHandlesClose()&&n.props.onRequestClose(t)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(t,e){var i="object"===("undefined"===typeof e?"undefined":r(e))?e:{base:m[t],afterOpen:m[t]+"--after-open",beforeClose:m[t]+"--before-close"},a=i.base;return n.state.afterOpen&&(a=a+" "+i.afterOpen),n.state.beforeClose&&(a=a+" "+i.beforeClose),"string"===typeof e&&e?a+" "+e:a},n.attributesFromObject=function(t,e){return Object.keys(e).reduce((function(n,i){return n[t+"-"+i]=e[i],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(t,e){this.props.isOpen&&!t.isOpen?this.open():!this.props.isOpen&&t.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!e.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var t=this.props,e=t.appElement,n=t.ariaHideApp,i=t.htmlOpenClassName,r=t.bodyOpenClassName,a=t.parentSelector,o=a&&a().ownerDocument||document;r&&h.add(o.body,r),i&&h.add(o.getElementsByTagName("html")[0],i),n&&(g+=1,c.hide(e)),d.default.register(this)}},{key:"render",value:function(){var t=this.props,e=t.id,n=t.className,r=t.overlayClassName,a=t.defaultStyles,o=t.children,s=n?{}:a.content,u=r?{}:a.overlay;if(this.shouldBeClosed())return null;var l={ref:this.setOverlayRef,className:this.buildClassName("overlay",r),style:i({},u,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},c=i({id:e,ref:this.setContentRef,style:i({},s,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",i({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),h=this.props.contentElement(c,o);return this.props.overlayElement(l,h)}}]),e}(o.Component);k.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},k.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(v.default),s.default.instanceOf(f.SafeHTMLCollection),s.default.instanceOf(f.SafeNodeList),s.default.arrayOf(s.default.instanceOf(v.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},e.default=k,t.exports=e.default},5858:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):null!=s.length?s.forEach((function(t){return t.removeAttribute("aria-hidden")})):document.querySelectorAll(s).forEach((function(t){return t.removeAttribute("aria-hidden")})));s=null},e.log=function(){0},e.assertNodeList=u,e.setElement=function(t){var e=t;if("string"===typeof e&&o.canUseDOM){var n=document.querySelectorAll(e);u(n,e),e=n}return s=e||s},e.validateElement=l,e.hide=function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=l(t)[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.setAttribute("aria-hidden","true")}}catch(o){n=!0,i=o}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}},e.show=function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=l(t)[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.removeAttribute("aria-hidden")}}catch(o){n=!0,i=o}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}},e.documentNotReadyOrSSRTesting=function(){s=null};var i,r=n(2391),a=(i=r)&&i.__esModule?i:{default:i},o=n(3663);var s=null;function u(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function l(t){var e=t||s;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,a.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},5670:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){for(var t=[o,s],e=0;e<t.length;e++){var n=t[e];n&&(n.parentNode&&n.parentNode.removeChild(n))}o=s=null,u=[]},e.log=function(){console.log("bodyTrap ----------"),console.log(u.length);for(var t=[o,s],e=0;e<t.length;e++){var n=t[e]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var i,r=n(8484),a=(i=r)&&i.__esModule?i:{default:i};var o=void 0,s=void 0,u=[];function l(){0!==u.length&&u[u.length-1].focusContent()}a.default.subscribe((function(t,e){o||s||((o=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),o.style.position="absolute",o.style.opacity="0",o.setAttribute("tabindex","0"),o.addEventListener("focus",l),(s=o.cloneNode()).addEventListener("focus",l)),(u=e).length>0?(document.body.firstChild!==o&&document.body.insertBefore(o,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(o.parentElement&&o.parentElement.removeChild(o),s.parentElement&&s.parentElement.removeChild(s))}))},6554:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){var t=document.getElementsByTagName("html")[0];for(var e in n)r(t,n[e]);var a=document.body;for(var o in i)r(a,i[o]);n={},i={}},e.log=function(){0};var n={},i={};function r(t,e){t.classList.remove(e)}e.add=function(t,e){return r=t.classList,a="html"==t.nodeName.toLowerCase()?n:i,void e.split(" ").forEach((function(t){!function(t,e){t[e]||(t[e]=0),t[e]+=1}(a,t),r.add(t)}));var r,a},e.remove=function(t,e){return r=t.classList,a="html"==t.nodeName.toLowerCase()?n:i,void e.split(" ").forEach((function(t){!function(t,e){t[e]&&(t[e]-=1)}(a,t),0===a[t]&&r.remove(t)}));var r,a}},8844:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){o=[]},e.log=function(){0},e.handleBlur=l,e.handleFocus=c,e.markForFocusLater=function(){o.push(document.activeElement)},e.returnFocus=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=null;try{return void(0!==o.length&&(e=o.pop()).focus({preventScroll:t}))}catch(n){console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}},e.popWithoutFocus=function(){o.length>0&&o.pop()},e.setupScopedFocus=function(t){s=t,window.addEventListener?(window.addEventListener("blur",l,!1),document.addEventListener("focus",c,!0)):(window.attachEvent("onBlur",l),document.attachEvent("onFocus",c))},e.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",l),document.removeEventListener("focus",c)):(window.detachEvent("onBlur",l),document.detachEvent("onFocus",c))};var i,r=n(9750),a=(i=r)&&i.__esModule?i:{default:i};var o=[],s=null,u=!1;function l(){u=!0}function c(){if(u){if(u=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,a.default)(s)[0]||s).focus()}),0)}}},8484:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=function(){console.log("portalOpenInstances ----------"),console.log(i.openInstances.length),i.openInstances.forEach((function(t){return console.log(t)})),console.log("end portalOpenInstances ----------")},e.resetState=function(){i=new n};var n=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.register=function(t){-1===e.openInstances.indexOf(t)&&(e.openInstances.push(t),e.emit("register"))},this.deregister=function(t){var n=e.openInstances.indexOf(t);-1!==n&&(e.openInstances.splice(n,1),e.emit("deregister"))},this.subscribe=function(t){e.subscribers.push(t)},this.emit=function(t){e.subscribers.forEach((function(n){return n(t,e.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},i=new n;e.default=i},3663:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canUseDOM=e.SafeNodeList=e.SafeHTMLCollection=void 0;var i,r=n(2618);var a=((i=r)&&i.__esModule?i:{default:i}).default,o=a.canUseDOM?window.HTMLElement:{};e.SafeHTMLCollection=a.canUseDOM?window.HTMLCollection:{},e.SafeNodeList=a.canUseDOM?window.NodeList:{},e.canUseDOM=a.canUseDOM;e.default=o},870:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,a.default)(t);if(!n.length)return void e.preventDefault();var i=void 0,r=e.shiftKey,s=n[0],u=n[n.length-1],l=o();if(t===l){if(!r)return;i=u}u!==l||r||(i=s);s===l&&r&&(i=u);if(i)return e.preventDefault(),void i.focus();var c=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==c||"Chrome"==c[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var h=n.indexOf(l);h>-1&&(h+=r?-1:1);if("undefined"===typeof(i=n[h]))return e.preventDefault(),void(i=r?u:s).focus();e.preventDefault(),i.focus()};var i,r=n(9750),a=(i=r)&&i.__esModule?i:{default:i};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return t.activeElement.shadowRoot?o(t.activeElement.shadowRoot):t.activeElement}t.exports=e.default},9750:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=[].slice.call(e.querySelectorAll("*"),0).reduce((function(e,n){return e.concat(n.shadowRoot?t(n.shadowRoot):[n])}),[]);return n.filter(s)};var n="none",i="contents",r=/input|select|textarea|button|object|iframe/;function a(t){var e=t.offsetWidth<=0&&t.offsetHeight<=0;if(e&&!t.innerHTML)return!0;try{var r=window.getComputedStyle(t),a=r.getPropertyValue("display");return e?a!==i&&function(t,e){return"visible"!==e.getPropertyValue("overflow")||t.scrollWidth<=0&&t.scrollHeight<=0}(t,r):a===n}catch(o){return console.warn("Failed to inspect element style"),!1}}function o(t,e){var n=t.nodeName.toLowerCase();return(r.test(n)&&!t.disabled||"a"===n&&t.href||e)&&function(t){for(var e=t,n=t.getRootNode&&t.getRootNode();e&&e!==document.body;){if(n&&e===n&&(e=n.host.parentNode),a(e))return!1;e=e.parentNode}return!0}(t)}function s(t){var e=t.getAttribute("tabindex");null===e&&(e=void 0);var n=isNaN(e);return(n||e>=0)&&o(t,!n)}t.exports=e.default},7948:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2240),a=(i=r)&&i.__esModule?i:{default:i};e.default=a.default,t.exports=e.default},6429:function(t,e,n){"use strict";t.exports=n(5274)},8857:function(t,e,n){"use strict";var i,r,a,o=n(5408),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){a=!1}function l(t){if(t){if(t!==i){if(t.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter((function(t,e,n){return e!==n.lastIndexOf(t)}));if(e.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+e.join(", "));i=t,u()}}else i!==s&&(i=s,u())}function c(){return a||(a=function(){i||l(s);for(var t,e=i.split(""),n=[],r=o.nextValue();e.length>0;)r=o.nextValue(),t=Math.floor(r*e.length),n.push(e.splice(t,1)[0]);return n.join("")}())}t.exports={get:function(){return i||s},characters:function(t){return l(t),i},seed:function(t){o.seed(t),r!==t&&(u(),r=t)},lookup:function(t){return c()[t]},shuffled:c}},7098:function(t,e,n){"use strict";var i,r,a=n(2226);n(8857);t.exports=function(t){var e="",n=Math.floor(.001*(Date.now()-1567752802062));return n===r?i++:(i=0,r=n),e+=a(7),e+=a(t),i>0&&(e+=a(i)),e+=a(n)}},2226:function(t,e,n){"use strict";var i=n(8857),r=n(9139),a=n(2483);t.exports=function(t){for(var e,n=0,o="";!e;)o+=a(r,i.get(),1),e=t<Math.pow(16,n+1),n++;return o}},5274:function(t,e,n){"use strict";var i=n(8857),r=n(7098),a=n(6046),o=n(5347)||0;function s(){return r(o)}t.exports=s,t.exports.generate=s,t.exports.seed=function(e){return i.seed(e),t.exports},t.exports.worker=function(e){return o=e,t.exports},t.exports.characters=function(t){return void 0!==t&&i.characters(t),i.shuffled()},t.exports.isValid=a},6046:function(t,e,n){"use strict";var i=n(8857);t.exports=function(t){return!(!t||"string"!==typeof t||t.length<6)&&!new RegExp("[^"+i.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t)}},9139:function(t){"use strict";var e,n="object"===typeof window&&(window.crypto||window.msCrypto);e=n&&n.getRandomValues?function(t){return n.getRandomValues(new Uint8Array(t))}:function(t){for(var e=[],n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e},t.exports=e},5408:function(t){"use strict";var e=1;t.exports={nextValue:function(){return(e=(9301*e+49297)%233280)/233280},seed:function(t){e=t}}},5347:function(t){"use strict";t.exports=0},2483:function(t){t.exports=function(t,e,n){for(var i=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*i*n/e.length),a="";;)for(var o=t(r),s=r;s--;)if((a+=e[o[s]&i]||"").length===+n)return a}},2391:function(t){"use strict";var e=function(){};t.exports=e},1752:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var i=n(1120);function r(){return r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,i.Z)(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},r.apply(this,arguments)}},7825:function(t,e,n){"use strict";n.d(e,{Jn:function(){return K},qX:function(){return j},Xd:function(){return z},Mq:function(){return Q},ZF:function(){return G},KN:function(){return J}});var i,r,a=n(3433),o=n(4165),s=n(5861),u=n(7762),l=n(4942),c=n(5671),h=n(3144),f=n(3258),v=n(6781),d=n(5854),p=n(1413),y=function(t,e){return e.some((function(e){return t instanceof e}))};var m=new WeakMap,g=new WeakMap,k=new WeakMap,b=new WeakMap,w=new WeakMap;var _={get:function(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return g.get(t);if("objectStoreNames"===e)return t.objectStoreNames||k.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return C(t[e])},set:function(t,e,n){return t[e]=n,!0},has:function(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function E(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(T(this),n),C(m.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return C(t.apply(T(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=t.call.apply(t,[T(this),e].concat(i));return k.set(a,e.sort?e.sort():[e]),C(a)}}function S(t){return"function"===typeof t?E(t):(t instanceof IDBTransaction&&function(t){if(!g.has(t)){var e=new Promise((function(e,n){var i=function(){t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=function(){e(),i()},a=function(){n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)}));g.set(t,e)}}(t),y(t,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,_):t)}function C(t){if(t instanceof IDBRequest)return function(t){var e=new Promise((function(e,n){var i=function(){t.removeEventListener("success",r),t.removeEventListener("error",a)},r=function(){e(C(t.result)),i()},a=function(){n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",a)}));return e.then((function(e){e instanceof IDBCursor&&m.set(e,t)})).catch((function(){})),w.set(e,t),e}(t);if(b.has(t))return b.get(t);var e=S(t);return e!==t&&(b.set(t,e),w.set(e,t)),e}var T=function(t){return w.get(t)};var x,Z,A=["get","getKey","getAll","getAllKeys","count"],O=["put","add","delete","clear"],M=new Map;function L(t,e){if(t instanceof IDBDatabase&&!(e in t)&&"string"===typeof e){if(M.get(e))return M.get(e);var n=e.replace(/FromIndex$/,""),i=e!==n,r=O.includes(n);if(n in(i?IDBIndex:IDBObjectStore).prototype&&(r||A.includes(n))){var a=function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var a,s,u,l,c,h,f=arguments;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(s=this.transaction(e,r?"readwrite":"readonly"),u=s.store,l=f.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=f[h];return i&&(u=u.index(c.shift())),t.next=6,Promise.all([(a=u)[n].apply(a,c),r&&s.done]);case 6:return t.abrupt("return",t.sent[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();return M.set(e,a),a}}}_=function(t){return(0,p.Z)((0,p.Z)({},t),{},{get:function(e,n,i){return L(e,n)||t.get(e,n,i)},has:function(e,n){return!!L(e,n)||t.has(e,n)}})}(_);var I=function(){function t(e){(0,c.Z)(this,t),this.container=e}return(0,h.Z)(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((function(t){return t})).join(" ")}}]),t}();var N="@firebase/app",D="0.9.20",R=new v.Yd("@firebase/app"),P="[DEFAULT]",F=(x={},(0,l.Z)(x,N,"fire-core"),(0,l.Z)(x,"@firebase/app-compat","fire-core-compat"),(0,l.Z)(x,"@firebase/analytics","fire-analytics"),(0,l.Z)(x,"@firebase/analytics-compat","fire-analytics-compat"),(0,l.Z)(x,"@firebase/app-check","fire-app-check"),(0,l.Z)(x,"@firebase/app-check-compat","fire-app-check-compat"),(0,l.Z)(x,"@firebase/auth","fire-auth"),(0,l.Z)(x,"@firebase/auth-compat","fire-auth-compat"),(0,l.Z)(x,"@firebase/database","fire-rtdb"),(0,l.Z)(x,"@firebase/database-compat","fire-rtdb-compat"),(0,l.Z)(x,"@firebase/functions","fire-fn"),(0,l.Z)(x,"@firebase/functions-compat","fire-fn-compat"),(0,l.Z)(x,"@firebase/installations","fire-iid"),(0,l.Z)(x,"@firebase/installations-compat","fire-iid-compat"),(0,l.Z)(x,"@firebase/messaging","fire-fcm"),(0,l.Z)(x,"@firebase/messaging-compat","fire-fcm-compat"),(0,l.Z)(x,"@firebase/performance","fire-perf"),(0,l.Z)(x,"@firebase/performance-compat","fire-perf-compat"),(0,l.Z)(x,"@firebase/remote-config","fire-rc"),(0,l.Z)(x,"@firebase/remote-config-compat","fire-rc-compat"),(0,l.Z)(x,"@firebase/storage","fire-gcs"),(0,l.Z)(x,"@firebase/storage-compat","fire-gcs-compat"),(0,l.Z)(x,"@firebase/firestore","fire-fst"),(0,l.Z)(x,"@firebase/firestore-compat","fire-fst-compat"),(0,l.Z)(x,"fire-js","fire-js"),(0,l.Z)(x,"firebase","fire-js-all"),x),U=new Map,V=new Map;function B(t,e){try{t.container.addComponent(e)}catch(n){R.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function z(t){var e=t.name;if(V.has(e))return R.debug("There were multiple attempts to register component ".concat(e,".")),!1;V.set(e,t);var n,i=(0,u.Z)(U.values());try{for(i.s();!(n=i.n()).done;){B(n.value,t)}}catch(r){i.e(r)}finally{i.f()}return!0}function j(t,e){var n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var q=(Z={},(0,l.Z)(Z,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),(0,l.Z)(Z,"bad-app-name","Illegal App name: '{$appName}"),(0,l.Z)(Z,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,l.Z)(Z,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,l.Z)(Z,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,l.Z)(Z,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,l.Z)(Z,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,l.Z)(Z,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,l.Z)(Z,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,l.Z)(Z,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,l.Z)(Z,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Z),W=new d.LL("app","Firebase",q),H=function(){function t(e,n,i){var r=this;(0,c.Z)(this,t),this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new f.wA("app",(function(){return r}),"PUBLIC"))}return(0,h.Z)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(t){this._isDeleted=t}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw W.create("app-deleted",{appName:this._name})}}]),t}(),K="10.5.0";function G(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;"object"!==typeof e&&(e={name:e});var i=Object.assign({name:P,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw W.create("bad-app-name",{appName:String(r)});if(n||(n=(0,d.aH)()),!n)throw W.create("no-options");var a=U.get(r);if(a){if((0,d.vZ)(n,a.options)&&(0,d.vZ)(i,a.config))return a;throw W.create("duplicate-app",{appName:r})}var o,s=new f.H0(r),l=(0,u.Z)(V.values());try{for(l.s();!(o=l.n()).done;){var c=o.value;s.addComponent(c)}}catch(v){l.e(v)}finally{l.f()}var h=new H(n,i,s);return U.set(r,h),h}function Q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=U.get(t);if(!e&&t===P&&(0,d.aH)())return G();if(!e)throw W.create("no-app",{appName:t});return e}function J(t,e,n){var i,r=null!==(i=F[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));var a=r.match(/\s|\//),o=e.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return a&&s.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void R.warn(s.join(" "))}z(new f.wA("".concat(r,"-version"),(function(){return{library:r,version:e}}),"VERSION"))}var X="firebase-heartbeat-database",Y=1,$="firebase-heartbeat-store",tt=null;function et(){return tt||(tt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.blocked,r=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(t,e),u=C(s);return r&&s.addEventListener("upgradeneeded",(function(t){r(C(s.result),t.oldVersion,t.newVersion,C(s.transaction),t)})),i&&s.addEventListener("blocked",(function(t){return i(t.oldVersion,t.newVersion,t)})),u.then((function(t){o&&t.addEventListener("close",(function(){return o()})),a&&t.addEventListener("versionchange",(function(t){return a(t.oldVersion,t.newVersion,t)}))})).catch((function(){})),u}(X,Y,{upgrade:function(t,e){if(0===e)t.createObjectStore($)}}).catch((function(t){throw W.create("idb-open",{originalErrorMessage:t.message})}))),tt}function nt(t){return it.apply(this,arguments)}function it(){return(it=(0,s.Z)((0,o.Z)().mark((function t(e){var n,i,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et();case 3:return n=t.sent,t.next=6,n.transaction($).objectStore($).get(ot(e));case 6:return i=t.sent,t.abrupt("return",i);case 10:t.prev=10,t.t0=t.catch(0),t.t0 instanceof d.ZR?R.warn(t.t0.message):(r=W.create("idb-get",{originalErrorMessage:null===t.t0||void 0===t.t0?void 0:t.t0.message}),R.warn(r.message));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function rt(t,e){return at.apply(this,arguments)}function at(){return(at=(0,s.Z)((0,o.Z)().mark((function t(e,n){var i,r,a,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et();case 3:return i=t.sent,r=i.transaction($,"readwrite"),a=r.objectStore($),t.next=8,a.put(n,ot(e));case 8:return t.next=10,r.done;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),t.t0 instanceof d.ZR?R.warn(t.t0.message):(s=W.create("idb-set",{originalErrorMessage:null===t.t0||void 0===t.t0?void 0:t.t0.message}),R.warn(s.message));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function ot(t){return"".concat(t.name,"!").concat(t.options.appId)}var st=function(){function t(e){var n=this;(0,c.Z)(this,t),this.container=e,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new ht(i),this._heartbeatsCachePromise=this._storage.read().then((function(t){return n._heartbeatsCache=t,t}))}return(0,h.Z)(t,[{key:"triggerHeartbeat",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.container.getProvider("platform-logger").getImmediate(),n=e.getPlatformInfoString(),i=ut(),null!==this._heartbeatsCache){t.next=7;break}return t.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=t.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((function(t){return t.date===i}))){t.next=11;break}return t.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:i,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(t){var e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),t.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n,i,r,a;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==this._heartbeatsCache){t.next=3;break}return t.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){t.next=5;break}return t.abrupt("return","");case 5:if(e=ut(),n=lt(this._heartbeatsCache.heartbeats),i=n.heartbeatsToSend,r=n.unsentEntries,a=(0,d.L)(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=e,!(r.length>0)){t.next=15;break}return this._heartbeatsCache.heartbeats=r,t.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:t.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();function ut(){return(new Date).toISOString().substring(0,10)}function lt(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=[],r=t.slice(),a=(0,u.Z)(t);try{var o=function(){var t=e.value,a=i.find((function(e){return e.agent===t.agent}));if(a){if(a.dates.push(t.date),ft(i)>n)return a.dates.pop(),0}else if(i.push({agent:t.agent,dates:[t.date]}),ft(i)>n)return i.pop(),0;r=r.slice(1)};for(a.s();!(e=a.n()).done&&0!==o(););}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:i,unsentEntries:r}}var ct,ht=function(){function t(e){(0,c.Z)(this,t),this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,h.Z)(t,[{key:"runIndexedDBEnvironmentCheck",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,d.hl)()){t.next=4;break}return t.abrupt("return",!1);case 4:return t.abrupt("return",(0,d.eu)().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._canUseIndexedDBPromise;case 2:if(t.sent){t.next=7;break}return t.abrupt("return",{heartbeats:[]});case 7:return t.next=9,nt(this.app);case 9:return e=t.sent,t.abrupt("return",e||{heartbeats:[]});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"overwrite",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var n,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._canUseIndexedDBPromise;case 2:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,this.read();case 9:return i=t.sent,t.abrupt("return",rt(this.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats}));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var n,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._canUseIndexedDBPromise;case 2:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,this.read();case 9:return i=t.sent,t.abrupt("return",rt(this.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[].concat((0,a.Z)(i.heartbeats),(0,a.Z)(e.heartbeats))}));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function ft(t){return(0,d.L)(JSON.stringify({version:2,heartbeats:t})).length}ct="",z(new f.wA("platform-logger",(function(t){return new I(t)}),"PRIVATE")),z(new f.wA("heartbeat",(function(t){return new st(t)}),"PRIVATE")),J(N,D,ct),J(N,D,"esm2017"),J("fire-js","")},3258:function(t,e,n){"use strict";n.d(e,{H0:function(){return d},wA:function(){return h}});var i=n(4165),r=n(3433),a=n(5861),o=n(9439),s=n(7762),u=n(5671),l=n(3144),c=n(5854),h=function(){function t(e,n,i){(0,u.Z)(this,t),this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,l.Z)(t,[{key:"setInstantiationMode",value:function(t){return this.instantiationMode=t,this}},{key:"setMultipleInstances",value:function(t){return this.multipleInstances=t,this}},{key:"setServiceProps",value:function(t){return this.serviceProps=t,this}},{key:"setInstanceCreatedCallback",value:function(t){return this.onInstanceCreated=t,this}}]),t}(),f="[DEFAULT]",v=function(){function t(e,n){(0,u.Z)(this,t),this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,l.Z)(t,[{key:"get",value:function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new c.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(r){}}return this.instancesDeferred.get(e).promise}},{key:"getImmediate",value:function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:f})}catch(c){}var e,n=(0,s.Z)(this.instancesDeferred.entries());try{for(n.s();!(e=n.n()).done;){var i=(0,o.Z)(e.value,2),r=i[0],a=i[1],u=this.normalizeInstanceIdentifier(r);try{var l=this.getOrInitializeService({instanceIdentifier:u});a.resolve(l)}catch(c){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}},{key:"delete",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Array.from(this.instances.values()),t.next=3,Promise.all([].concat((0,r.Z)(e.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()}))),(0,r.Z)(e.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return this.instances.has(t)}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return this.instancesOptions.get(t)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,n=void 0===e?{}:e,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var r,a=this.getOrInitializeService({instanceIdentifier:i,options:n}),u=(0,s.Z)(this.instancesDeferred.entries());try{for(u.s();!(r=u.n()).done;){var l=(0,o.Z)(r.value,2),c=l[0],h=l[1];i===this.normalizeInstanceIdentifier(c)&&h.resolve(a)}}catch(f){u.e(f)}finally{u.f()}return a}},{key:"onInit",value:function(t,e){var n,i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);var a=this.instances.get(i);return a&&t(a,i),function(){r.delete(t)}}},{key:"invokeOnInitCallbacks",value:function(t,e){var n=this.onInitCallbacks.get(e);if(n){var i,r=(0,s.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;try{a(t,e)}catch(o){}}}catch(u){r.e(u)}finally{r.f()}}}},{key:"getOrInitializeService",value:function(t){var e,n=t.instanceIdentifier,i=t.options,r=void 0===i?{}:i,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===f?void 0:e),options:r}),this.instances.set(n,a),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return this.component?this.component.multipleInstances?t:f:t}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();var d=function(){function t(e){(0,u.Z)(this,t),this.name=e,this.providers=new Map}return(0,l.Z)(t,[{key:"addComponent",value:function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}},{key:"addOrOverwriteComponent",value:function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}},{key:"getProvider",value:function(t){if(this.providers.has(t))return this.providers.get(t);var e=new v(t,this);return this.providers.set(t,e),e}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}()},6781:function(t,e,n){"use strict";n.d(e,{Yd:function(){return v},in:function(){return r}});var i,r,a=n(5671),o=n(3144),s=n(4942),u=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(r||(r={}));var l={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},c=r.INFO,h=(i={},(0,s.Z)(i,r.DEBUG,"log"),(0,s.Z)(i,r.VERBOSE,"log"),(0,s.Z)(i,r.INFO,"info"),(0,s.Z)(i,r.WARN,"warn"),(0,s.Z)(i,r.ERROR,"error"),i),f=function(t,e){if(!(e<t.logLevel)){var n=(new Date).toISOString(),i=h[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(r=console)[i].apply(r,["[".concat(n,"]  ").concat(t.name,":")].concat(o))}},v=function(){function t(e){(0,a.Z)(this,t),this.name=e,this._logLevel=c,this._logHandler=f,this._userLogHandler=null,u.push(this)}return(0,o.Z)(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(t){if(!(t in r))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}},{key:"setLogLevel",value:function(t){this._logLevel="string"===typeof t?l[t]:t}},{key:"logHandler",get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,r.DEBUG].concat(e)),this._logHandler.apply(this,[this,r.DEBUG].concat(e))}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,r.VERBOSE].concat(e)),this._logHandler.apply(this,[this,r.VERBOSE].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,r.INFO].concat(e)),this._logHandler.apply(this,[this,r.INFO].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,r.WARN].concat(e)),this._logHandler.apply(this,[this,r.WARN].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,r.ERROR].concat(e)),this._logHandler.apply(this,[this,r.ERROR].concat(e))}}]),t}()},1243:function(t,e,n){"use strict";function i(t,e){return function(){return t.apply(e,arguments)}}n.d(e,{Z:function(){return jt}});var r,a=Object.prototype.toString,o=Object.getPrototypeOf,s=(r=Object.create(null),function(t){var e=a.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())}),u=function(t){return t=t.toLowerCase(),function(e){return s(e)===t}},l=function(t){return function(e){return typeof e===t}},c=Array.isArray,h=l("undefined");var f=u("ArrayBuffer");var v=l("string"),d=l("function"),p=l("number"),y=function(t){return null!==t&&"object"===typeof t},m=function(t){if("object"!==s(t))return!1;var e=o(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},g=u("Date"),k=u("File"),b=u("Blob"),w=u("FileList"),_=u("URLSearchParams");function E(t,e){var n,i,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==r&&r;if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),c(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{var o,s=a?Object.getOwnPropertyNames(t):Object.keys(t),u=s.length;for(n=0;n<u;n++)o=s[n],e.call(null,t[o],o,t)}}function S(t,e){e=e.toLowerCase();for(var n,i=Object.keys(t),r=i.length;r-- >0;)if(e===(n=i[r]).toLowerCase())return n;return null}var C="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,T=function(t){return!h(t)&&t!==C};var x,Z=(x="undefined"!==typeof Uint8Array&&o(Uint8Array),function(t){return x&&t instanceof x}),A=u("HTMLFormElement"),O=function(t){var e=Object.prototype.hasOwnProperty;return function(t,n){return e.call(t,n)}}(),M=u("RegExp"),L=function(t,e){var n=Object.getOwnPropertyDescriptors(t),i={};E(n,(function(n,r){var a;!1!==(a=e(n,r,t))&&(i[r]=a||n)})),Object.defineProperties(t,i)},I="abcdefghijklmnopqrstuvwxyz",N="0123456789",D={DIGIT:N,ALPHA:I,ALPHA_DIGIT:I+I.toUpperCase()+N};var R=u("AsyncFunction"),P={isArray:c,isArrayBuffer:f,isBuffer:function(t){return null!==t&&!h(t)&&null!==t.constructor&&!h(t.constructor)&&d(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:function(t){var e;return t&&("function"===typeof FormData&&t instanceof FormData||d(t.append)&&("formdata"===(e=s(t))||"object"===e&&d(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&f(t.buffer)},isString:v,isNumber:p,isBoolean:function(t){return!0===t||!1===t},isObject:y,isPlainObject:m,isUndefined:h,isDate:g,isFile:k,isBlob:b,isRegExp:M,isFunction:d,isStream:function(t){return y(t)&&d(t.pipe)},isURLSearchParams:_,isTypedArray:Z,isFileList:w,forEach:E,merge:function t(){for(var e=(T(this)&&this||{}).caseless,n={},i=function(i,r){var a=e&&S(n,r)||r;m(n[a])&&m(i)?n[a]=t(n[a],i):m(i)?n[a]=t({},i):c(i)?n[a]=i.slice():n[a]=i},r=0,a=arguments.length;r<a;r++)arguments[r]&&E(arguments[r],i);return n},extend:function(t,e,n){return E(e,(function(e,r){n&&d(e)?t[r]=i(e,n):t[r]=e}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),t},trim:function(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n,i){var r,a,s,u={};if(e=e||{},null==t)return e;do{for(a=(r=Object.getOwnPropertyNames(t)).length;a-- >0;)s=r[a],i&&!i(s,t,e)||u[s]||(e[s]=t[s],u[s]=!0);t=!1!==n&&o(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:s,kindOfTest:u,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return-1!==i&&i===n},toArray:function(t){if(!t)return null;if(c(t))return t;var e=t.length;if(!p(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},forEachEntry:function(t,e){for(var n,i=(t&&t[Symbol.iterator]).call(t);(n=i.next())&&!n.done;){var r=n.value;e.call(t,r[0],r[1])}},matchAll:function(t,e){for(var n,i=[];null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:A,hasOwnProperty:O,hasOwnProp:O,reduceDescriptors:L,freezeMethods:function(t){L(t,(function(e,n){if(d(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var i=t[n];d(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(t,e){var n={},i=function(t){t.forEach((function(t){n[t]=!0}))};return c(t)?i(t):i(String(t).split(e)),n},toCamelCase:function(t){return t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(t,e){return t=+t,Number.isFinite(t)?t:e},findKey:S,global:C,isContextDefined:T,ALPHABET:D,generateString:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.ALPHA_DIGIT,n="",i=e.length;t--;)n+=e[Math.random()*i|0];return n},isSpecCompliantForm:function(t){return!!(t&&d(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:function(t){var e=new Array(10);return function t(n,i){if(y(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;var r=c(n)?[]:{};return E(n,(function(e,n){var a=t(e,i+1);!h(a)&&(r[n]=a)})),e[i]=void 0,r}}return n}(t,0)},isAsyncFn:R,isThenable:function(t){return t&&(y(t)||d(t))&&d(t.then)&&d(t.catch)}},F=n(5671),U=n(3144);function V(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}P.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var B=V.prototype,z={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(t){z[t]={value:t}})),Object.defineProperties(V,z),Object.defineProperty(B,"isAxiosError",{value:!0}),V.from=function(t,e,n,i,r,a){var o=Object.create(B);return P.toFlatObject(t,o,(function(t){return t!==Error.prototype}),(function(t){return"isAxiosError"!==t})),V.call(o,t.message,e,n,i,r),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};var j=V;function q(t){return P.isPlainObject(t)||P.isArray(t)}function W(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function H(t,e,n){return t?t.concat(e).map((function(t,e){return t=W(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}var K=P.toFlatObject(P,{},null,(function(t){return/^is[A-Z]/.test(t)}));var G=function(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;var i=(n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!P.isUndefined(e[t])}))).metaTokens,r=n.visitor||l,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(r))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(P.isDate(t))return t.toISOString();if(!s&&P.isBlob(t))throw new j("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(t)||P.isTypedArray(t)?s&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function l(t,n,r){var s=t;if(t&&!r&&"object"===typeof t)if(P.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(P.isArray(t)&&function(t){return P.isArray(t)&&!t.some(q)}(t)||(P.isFileList(t)||P.endsWith(n,"[]"))&&(s=P.toArray(t)))return n=W(n),s.forEach((function(t,i){!P.isUndefined(t)&&null!==t&&e.append(!0===o?H([n],i,a):null===o?n:n+"[]",u(t))})),!1;return!!q(t)||(e.append(H(r,n,a),u(t)),!1)}var c=[],h=Object.assign(K,{defaultVisitor:l,convertValue:u,isVisitable:q});if(!P.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!P.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+i.join("."));c.push(n),P.forEach(n,(function(n,a){!0===(!(P.isUndefined(n)||null===n)&&r.call(e,n,P.isString(a)?a.trim():a,i,h))&&t(n,i?i.concat(a):[a])})),c.pop()}}(t),e};function Q(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function J(t,e){this._pairs=[],t&&G(t,this,e)}var X=J.prototype;X.append=function(t,e){this._pairs.push([t,e])},X.toString=function(t){var e=t?function(e){return t.call(this,e,Q)}:Q;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var Y=J;function $(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tt(t,e,n){if(!e)return t;var i,r=n&&n.encode||$,a=n&&n.serialize;if(i=a?a(e,n):P.isURLSearchParams(e)?e.toString():new Y(e,n).toString(r)){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}var et=function(){function t(){(0,F.Z)(this,t),this.handlers=[]}return(0,U.Z)(t,[{key:"use",value:function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(t){this.handlers[t]&&(this.handlers[t]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(t){P.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}]),t}(),nt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},it={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Y,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var t;return("undefined"===typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var rt=function(t){function e(t,n,i,r){var a=t[r++],o=Number.isFinite(+a),s=r>=t.length;return a=!a&&P.isArray(i)?i.length:a,s?(P.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):(i[a]&&P.isObject(i[a])||(i[a]=[]),e(t,n,i[a],r)&&P.isArray(i[a])&&(i[a]=function(t){var e,n,i={},r=Object.keys(t),a=r.length;for(e=0;e<a;e++)i[n=r[e]]=t[n];return i}(i[a])),!o)}if(P.isFormData(t)&&P.isFunction(t.entries)){var n={};return P.forEachEntry(t,(function(t,i){e(function(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map((function(t){return"[]"===t[0]?"":t[1]||t[0]}))}(t),i,n,0)})),n}return null};var at={transitional:nt,adapter:["xhr","http"],transformRequest:[function(t,e){var n,i=e.getContentType()||"",r=i.indexOf("application/json")>-1,a=P.isObject(t);if(a&&P.isHTMLForm(t)&&(t=new FormData(t)),P.isFormData(t))return r&&r?JSON.stringify(rt(t)):t;if(P.isArrayBuffer(t)||P.isBuffer(t)||P.isStream(t)||P.isFile(t)||P.isBlob(t))return t;if(P.isArrayBufferView(t))return t.buffer;if(P.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return G(t,new it.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,i){return it.isNode&&P.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((n=P.isFileList(t))||i.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return G(n?{"files[]":t}:t,o&&new o,this.formSerializer)}}return a||r?(e.setContentType("application/json",!1),function(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||at.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(t&&P.isString(t)&&(n&&!this.responseType||i)){var r=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(r){if("SyntaxError"===a.name)throw j.from(a,j.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],(function(t){at.headers[t]={}}));var ot=at,st=n(9439),ut=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lt=Symbol("internals");function ct(t){return t&&String(t).trim().toLowerCase()}function ht(t){return!1===t||null==t?t:P.isArray(t)?t.map(ht):String(t)}function ft(t,e,n,i,r){return P.isFunction(i)?i.call(this,e,n):(r&&(e=n),P.isString(e)?P.isString(i)?-1!==e.indexOf(i):P.isRegExp(i)?i.test(e):void 0:void 0)}var vt=function(t,e){function n(t){(0,F.Z)(this,n),t&&this.set(t)}return(0,U.Z)(n,[{key:"set",value:function(t,e,n){var i=this;function r(t,e,n){var r=ct(e);if(!r)throw new Error("header name must be a non-empty string");var a=P.findKey(i,r);(!a||void 0===i[a]||!0===n||void 0===n&&!1!==i[a])&&(i[a||e]=ht(t))}var a=function(t,e){return P.forEach(t,(function(t,n){return r(t,n,e)}))};return P.isPlainObject(t)||t instanceof this.constructor?a(t,e):P.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?a(function(t){var e,n,i,r={};return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),e=t.substring(0,i).trim().toLowerCase(),n=t.substring(i+1).trim(),!e||r[e]&&ut[e]||("set-cookie"===e?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)})),r}(t),e):null!=t&&r(e,t,n),this}},{key:"get",value:function(t,e){if(t=ct(t)){var n=P.findKey(this,t);if(n){var i=this[n];if(!e)return i;if(!0===e)return function(t){for(var e,n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;e=i.exec(t);)n[e[1]]=e[2];return n}(i);if(P.isFunction(e))return e.call(this,i,n);if(P.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(t,e){if(t=ct(t)){var n=P.findKey(this,t);return!(!n||void 0===this[n]||e&&!ft(0,this[n],n,e))}return!1}},{key:"delete",value:function(t,e){var n=this,i=!1;function r(t){if(t=ct(t)){var r=P.findKey(n,t);!r||e&&!ft(0,n[r],r,e)||(delete n[r],i=!0)}}return P.isArray(t)?t.forEach(r):r(t),i}},{key:"clear",value:function(t){for(var e=Object.keys(this),n=e.length,i=!1;n--;){var r=e[n];t&&!ft(0,this[r],r,t,!0)||(delete this[r],i=!0)}return i}},{key:"normalize",value:function(t){var e=this,n={};return P.forEach(this,(function(i,r){var a=P.findKey(n,r);if(a)return e[a]=ht(i),void delete e[r];var o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n}))}(r):String(r).trim();o!==r&&delete e[r],e[o]=ht(i),n[o]=!0})),this}},{key:"concat",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=this.constructor).concat.apply(t,[this].concat(n))}},{key:"toJSON",value:function(t){var e=Object.create(null);return P.forEach(this,(function(n,i){null!=n&&!1!==n&&(e[i]=t&&P.isArray(n)?n.join(", "):n)})),e}},{key:t,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var e=(0,st.Z)(t,2);return e[0]+": "+e[1]})).join("\n")}},{key:e,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(t){return t instanceof this?t:new this(t)}},{key:"concat",value:function(t){for(var e=new this(t),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((function(t){return e.set(t)})),e}},{key:"accessor",value:function(t){var e=(this[lt]=this[lt]={accessors:{}}).accessors,n=this.prototype;function i(t){var i=ct(t);e[i]||(!function(t,e){var n=P.toCamelCase(" "+e);["get","set","has"].forEach((function(i){Object.defineProperty(t,i+n,{value:function(t,n,r){return this[i].call(this,e,t,n,r)},configurable:!0})}))}(n,t),e[i]=!0)}return P.isArray(t)?t.forEach(i):i(t),this}}]),n}(Symbol.iterator,Symbol.toStringTag);vt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),P.reduceDescriptors(vt.prototype,(function(t,e){var n=t.value,i=e[0].toUpperCase()+e.slice(1);return{get:function(){return n},set:function(t){this[i]=t}}})),P.freezeMethods(vt);var dt=vt;function pt(t,e){var n=this||ot,i=e||n,r=dt.from(i.headers),a=i.data;return P.forEach(t,(function(t){a=t.call(n,a,r.normalize(),e?e.status:void 0)})),r.normalize(),a}function yt(t){return!(!t||!t.__CANCEL__)}function mt(t,e,n){j.call(this,null==t?"canceled":t,j.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(mt,j,{__CANCEL__:!0});var gt=mt;var kt=it.isStandardBrowserEnv?{write:function(t,e,n,i,r,a){var o=[];o.push(t+"="+encodeURIComponent(e)),P.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),P.isString(i)&&o.push("path="+i),P.isString(r)&&o.push("domain="+r),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function bt(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var wt=it.isStandardBrowserEnv?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=P.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0};var _t=function(t,e){t=t||10;var n,i=new Array(t),r=new Array(t),a=0,o=0;return e=void 0!==e?e:1e3,function(s){var u=Date.now(),l=r[o];n||(n=u),i[a]=s,r[a]=u;for(var c=o,h=0;c!==a;)h+=i[c++],c%=t;if((a=(a+1)%t)===o&&(o=(o+1)%t),!(u-n<e)){var f=l&&u-l;return f?Math.round(1e3*h/f):void 0}}};function Et(t,e){var n=0,i=_t(50,250);return function(r){var a=r.loaded,o=r.lengthComputable?r.total:void 0,s=a-n,u=i(s);n=a;var l={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&a<=o?(o-a)/u:void 0,event:r};l[e?"download":"upload"]=!0,t(l)}}var St={http:null,xhr:"undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){var i,r,a=t.data,o=dt.from(t.headers).normalize(),s=t.responseType;function u(){t.cancelToken&&t.cancelToken.unsubscribe(i),t.signal&&t.signal.removeEventListener("abort",i)}P.isFormData(a)&&(it.isStandardBrowserEnv||it.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.getContentType(/^\s*multipart\/form-data/)?P.isString(r=o.getContentType())&&o.setContentType(r.replace(/^\s*(multipart\/form-data);+/,"$1")):o.setContentType("multipart/form-data"));var l=new XMLHttpRequest;if(t.auth){var c=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(c+":"+h))}var f=bt(t.baseURL,t.url);function v(){if(l){var i=dt.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new j("Request failed with status code "+n.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),u()}),(function(t){n(t),u()}),{data:s&&"text"!==s&&"json"!==s?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:i,config:t,request:l}),l=null}}if(l.open(t.method.toUpperCase(),tt(f,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=v:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(v)},l.onabort=function(){l&&(n(new j("Request aborted",j.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new j("Network Error",j.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",i=t.transitional||nt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new j(e,i.clarifyTimeoutError?j.ETIMEDOUT:j.ECONNABORTED,t,l)),l=null},it.isStandardBrowserEnv){var d=(t.withCredentials||wt(f))&&t.xsrfCookieName&&kt.read(t.xsrfCookieName);d&&o.set(t.xsrfHeaderName,d)}void 0===a&&o.setContentType(null),"setRequestHeader"in l&&P.forEach(o.toJSON(),(function(t,e){l.setRequestHeader(e,t)})),P.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),s&&"json"!==s&&(l.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&l.addEventListener("progress",Et(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Et(t.onUploadProgress)),(t.cancelToken||t.signal)&&(i=function(e){l&&(n(!e||e.type?new gt(null,t,l):e),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(i),t.signal&&(t.signal.aborted?i():t.signal.addEventListener("abort",i)));var p=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(f);p&&-1===it.protocols.indexOf(p)?n(new j("Unsupported protocol "+p+":",j.ERR_BAD_REQUEST,t)):l.send(a||null)}))}};P.forEach(St,(function(t,e){if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}}));var Ct=function(t){return"- ".concat(t)},Tt=function(t){return P.isFunction(t)||null===t||!1===t},xt=function(t){for(var e,n,i=(t=P.isArray(t)?t:[t]).length,r={},a=0;a<i;a++){var o=void 0;if(n=e=t[a],!Tt(e)&&void 0===(n=St[(o=String(e)).toLowerCase()]))throw new j("Unknown adapter '".concat(o,"'"));if(n)break;r[o||"#"+a]=n}if(!n){var s=Object.entries(r).map((function(t){var e=(0,st.Z)(t,2),n=e[0],i=e[1];return"adapter ".concat(n," ")+(!1===i?"is not supported by the environment":"is not available in the build")})),u=i?s.length>1?"since :\n"+s.map(Ct).join("\n"):" "+Ct(s[0]):"as no adapter specified";throw new j("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return n};function Zt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gt(null,t)}function At(t){return Zt(t),t.headers=dt.from(t.headers),t.data=pt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xt(t.adapter||ot.adapter)(t).then((function(e){return Zt(t),e.data=pt.call(t,t.transformResponse,e),e.headers=dt.from(e.headers),e}),(function(e){return yt(e)||(Zt(t),e&&e.response&&(e.response.data=pt.call(t,t.transformResponse,e.response),e.response.headers=dt.from(e.response.headers))),Promise.reject(e)}))}var Ot=function(t){return t instanceof dt?t.toJSON():t};function Mt(t,e){e=e||{};var n={};function i(t,e,n){return P.isPlainObject(t)&&P.isPlainObject(e)?P.merge.call({caseless:n},t,e):P.isPlainObject(e)?P.merge({},e):P.isArray(e)?e.slice():e}function r(t,e,n){return P.isUndefined(e)?P.isUndefined(t)?void 0:i(void 0,t,n):i(t,e,n)}function a(t,e){if(!P.isUndefined(e))return i(void 0,e)}function o(t,e){return P.isUndefined(e)?P.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function s(n,r,a){return a in e?i(n,r):a in t?i(void 0,n):void 0}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(t,e){return r(Ot(t),Ot(e),!0)}};return P.forEach(Object.keys(Object.assign({},t,e)),(function(i){var a=u[i]||r,o=a(t[i],e[i],i);P.isUndefined(o)&&a!==s||(n[i]=o)})),n}var Lt="1.5.1",It={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){It[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var Nt={};It.transitional=function(t,e,n){function i(t,e){return"[Axios v1.5.1] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,a){if(!1===t)throw new j(i(r," has been removed"+(e?" in "+e:"")),j.ERR_DEPRECATED);return e&&!Nt[r]&&(Nt[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,a)}};var Dt={assertOptions:function(t,e,n){if("object"!==typeof t)throw new j("options must be an object",j.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),r=i.length;r-- >0;){var a=i[r],o=e[a];if(o){var s=t[a],u=void 0===s||o(s,a,t);if(!0!==u)throw new j("option "+a+" must be "+u,j.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new j("Unknown option "+a,j.ERR_BAD_OPTION)}},validators:It},Rt=Dt.validators,Pt=function(){function t(e){(0,F.Z)(this,t),this.defaults=e,this.interceptors={request:new et,response:new et}}return(0,U.Z)(t,[{key:"request",value:function(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{};var n=e=Mt(this.defaults,e),i=n.transitional,r=n.paramsSerializer,a=n.headers;void 0!==i&&Dt.assertOptions(i,{silentJSONParsing:Rt.transitional(Rt.boolean),forcedJSONParsing:Rt.transitional(Rt.boolean),clarifyTimeoutError:Rt.transitional(Rt.boolean)},!1),null!=r&&(P.isFunction(r)?e.paramsSerializer={serialize:r}:Dt.assertOptions(r,{encode:Rt.function,serialize:Rt.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();var o=a&&P.merge(a.common,a[e.method]);a&&P.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete a[t]})),e.headers=dt.concat(o,a);var s=[],u=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(u=u&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));var l,c=[];this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));var h,f=0;if(!u){var v=[At.bind(this),void 0];for(v.unshift.apply(v,s),v.push.apply(v,c),h=v.length,l=Promise.resolve(e);f<h;)l=l.then(v[f++],v[f++]);return l}h=s.length;var d=e;for(f=0;f<h;){var p=s[f++],y=s[f++];try{d=p(d)}catch(m){y.call(this,m);break}}try{l=At.call(this,d)}catch(m){return Promise.reject(m)}for(f=0,h=c.length;f<h;)l=l.then(c[f++],c[f++]);return l}},{key:"getUri",value:function(t){return tt(bt((t=Mt(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}]),t}();P.forEach(["delete","get","head","options"],(function(t){Pt.prototype[t]=function(e,n){return this.request(Mt(n||{},{method:t,url:e,data:(n||{}).data}))}})),P.forEach(["post","put","patch"],(function(t){function e(e){return function(n,i,r){return this.request(Mt(r||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Pt.prototype[t]=e(),Pt.prototype[t+"Form"]=e(!0)}));var Ft=Pt,Ut=function(){function t(e){if((0,F.Z)(this,t),"function"!==typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(t){n=t}));var i=this;this.promise.then((function(t){if(i._listeners){for(var e=i._listeners.length;e-- >0;)i._listeners[e](t);i._listeners=null}})),this.promise.then=function(t){var e,n=new Promise((function(t){i.subscribe(t),e=t})).then(t);return n.cancel=function(){i.unsubscribe(e)},n},e((function(t,e,r){i.reason||(i.reason=new gt(t,e,r),n(i.reason))}))}return(0,U.Z)(t,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}},{key:"unsubscribe",value:function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}}}],[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}]),t}();var Vt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vt).forEach((function(t){var e=(0,st.Z)(t,2),n=e[0],i=e[1];Vt[i]=n}));var Bt=Vt;var zt=function t(e){var n=new Ft(e),r=i(Ft.prototype.request,n);return P.extend(r,Ft.prototype,n,{allOwnKeys:!0}),P.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(Mt(e,n))},r}(ot);zt.Axios=Ft,zt.CanceledError=gt,zt.CancelToken=Ut,zt.isCancel=yt,zt.VERSION=Lt,zt.toFormData=G,zt.AxiosError=j,zt.Cancel=zt.CanceledError,zt.all=function(t){return Promise.all(t)},zt.spread=function(t){return function(e){return t.apply(null,e)}},zt.isAxiosError=function(t){return P.isObject(t)&&!0===t.isAxiosError},zt.mergeConfig=Mt,zt.AxiosHeaders=dt,zt.formToJSON=function(t){return rt(P.isHTMLForm(t)?new FormData(t):t)},zt.getAdapter=xt,zt.HttpStatusCode=Bt,zt.default=zt;var jt=zt},4702:function(t,e,n){"use strict";n.d(e,{ZF:function(){return i.ZF}});var i=n(7825);(0,i.KN)("firebase","10.5.0","app")},2481:function(t,e,n){"use strict";n.d(e,{ET:function(){return Mf},hJ:function(){return Zh},ad:function(){return Lh},b9:function(){return yf},cf:function(){return Lf},Xo:function(){return df},IO:function(){return cf},Bt:function(){return Df},TQ:function(){return gf}});var i,r=n(5647),a=n(1752),o=n(1120),s=n(9439),u=n(8664),l=n(7762),c=n(4165),h=n(5861),f=n(136),v=n(7277),d=n(3433),p=n(5671),y=n(3144),m=n(7825),g=n(3258),k=n(6781),b=n(5854),w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_={},E=E||{},S=w||self;function C(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function T(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var x="closure_uid_"+(1e9*Math.random()>>>0),Z=0;function A(t,e,n){return t.call.apply(t.bind,arguments)}function O(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function M(t,e,n){return(M=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?A:O).apply(null,arguments)}function L(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),a=2;a<arguments.length;a++)r[a-2]=arguments[a];return e.prototype[n].apply(t,r)}}function N(){this.s=this.s,this.o=this.o}N.prototype.s=!1,N.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,x)&&t[x]||(t[x]=++Z))},N.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var D=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function R(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function P(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(C(i)){var r=t.length||0,a=i.length||0;t.length=r+a;for(var o=0;o<a;o++)t[r+o]=i[o]}else t.push(i)}}function F(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!S.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{S.addEventListener("test",(function(){}),e),S.removeEventListener("test",(function(){}),e)}catch(n){}return t}();function V(t){return/^[\s\xa0]*$/.test(t)}function B(){var t=S.navigator;return t&&(t=t.userAgent)?t:""}function z(t){return-1!=B().indexOf(t)}function j(t){return j[" "](t),t}j[" "]=function(){};var q,W,H=z("Opera"),K=z("Trident")||z("MSIE"),G=z("Edge"),Q=G||K,J=z("Gecko")&&!(-1!=B().toLowerCase().indexOf("webkit")&&!z("Edge"))&&!(z("Trident")||z("MSIE"))&&!z("Edge"),X=-1!=B().toLowerCase().indexOf("webkit")&&!z("Edge");function Y(){var t=S.document;return t?t.documentMode:void 0}t:{var $="",tt=function(){var t=B();return J?/rv:([^\);]+)(\)|;)/.exec(t):G?/Edge\/([\d\.]+)/.exec(t):K?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):X?/WebKit\/(\S+)/.exec(t):H?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(tt&&($=tt?tt[1]:""),K){var et=Y();if(null!=et&&et>parseFloat($)){q=String(et);break t}}q=$}if(S.document&&K){var nt=Y();W=nt||(parseInt(q,10)||void 0)}else W=void 0;var it=W;function rt(t,e){if(F.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(J){t:{try{j(e.nodeName);var r=!0;break t}catch(a){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:at[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&rt.$.h.call(this)}}I(rt,F);var at={2:"touch",3:"pen",4:"mouse"};rt.prototype.h=function(){rt.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),st=0;function ut(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++st,this.fa=this.ia=!1}function lt(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ct(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function ht(t){var e={};for(var n in t)e[n]=t[n];return e}var ft="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var a=0;a<ft.length;a++)n=ft[a],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function dt(t){this.src=t,this.g={},this.h=0}function pt(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],a=D(r,e);(i=0<=a)&&Array.prototype.splice.call(r,a,1),i&&(lt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function yt(t,e,n,i){for(var r=0;r<t.length;++r){var a=t[r];if(!a.fa&&a.listener==e&&a.capture==!!n&&a.la==i)return r}return-1}dt.prototype.add=function(t,e,n,i,r){var a=t.toString();(t=this.g[a])||(t=this.g[a]=[],this.h++);var o=yt(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new ut(e,this.src,a,!!i,r)).ia=n,t.push(e)),e};var mt="closure_lm_"+(1e6*Math.random()|0),gt={};function kt(t,e,n,i,r){if(i&&i.once)return wt(t,e,n,i,r);if(Array.isArray(e)){for(var a=0;a<e.length;a++)kt(t,e[a],n,i,r);return null}return n=Zt(n),t&&t[ot]?t.O(e,n,T(i)?!!i.capture:!!i,r):bt(t,e,n,!1,i,r)}function bt(t,e,n,i,r,a){if(!e)throw Error("Invalid event type");var o=T(r)?!!r.capture:!!r,s=Tt(t);if(s||(t[mt]=s=new dt(t)),(n=s.add(e,n,i,o,a)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Ct;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)U||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(St(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function wt(t,e,n,i,r){if(Array.isArray(e)){for(var a=0;a<e.length;a++)wt(t,e[a],n,i,r);return null}return n=Zt(n),t&&t[ot]?t.P(e,n,T(i)?!!i.capture:!!i,r):bt(t,e,n,!0,i,r)}function _t(t,e,n,i,r){if(Array.isArray(e))for(var a=0;a<e.length;a++)_t(t,e[a],n,i,r);else i=T(i)?!!i.capture:!!i,n=Zt(n),t&&t[ot]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=yt(a=t.g[e],n,i,r))&&(lt(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete t.g[e],t.h--)))):t&&(t=Tt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yt(e,n,i,r)),(n=-1<t?e[t]:null)&&Et(n))}function Et(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ot])pt(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(St(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Tt(e))?(pt(n,t),0==n.h&&(n.src=null,e[mt]=null)):lt(t)}}}function St(t){return t in gt?gt[t]:gt[t]="on"+t}function Ct(t,e){if(t.fa)t=!0;else{e=new rt(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Et(t),t=n.call(i,e)}return t}function Tt(t){return(t=t[mt])instanceof dt?t:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zt(t){return"function"===typeof t?t:(t[xt]||(t[xt]=function(e){return t.handleEvent(e)}),t[xt])}function At(){N.call(this),this.i=new dt(this),this.S=this,this.J=null}function Ot(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new F(e,t);else if(e instanceof F)e.target=e.target||t;else{var r=e;vt(e=new F(i,t),r)}if(r=!0,n)for(var a=n.length-1;0<=a;a--){var o=e.g=n[a];r=Mt(o,i,!0,e)&&r}if(r=Mt(o=e.g=t,i,!0,e)&&r,r=Mt(o,i,!1,e)&&r,n)for(a=0;a<n.length;a++)r=Mt(o=e.g=n[a],i,!1,e)&&r}function Mt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,a=0;a<e.length;++a){var o=e[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&pt(t.i,o),r=!1!==s.call(u,i)&&r}}return r&&!i.defaultPrevented}I(At,N),At.prototype[ot]=!0,At.prototype.removeEventListener=function(t,e,n,i){_t(this,t,e,n,i)},At.prototype.N=function(){if(At.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)lt(n[i]);delete e.g[t],e.h--}}this.J=null},At.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},At.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Lt=S.JSON.stringify,It=function(){function t(e,n){(0,p.Z)(this,t),this.i=e,this.j=n,this.h=0,this.g=null}return(0,y.Z)(t,[{key:"get",value:function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}]),t}();function Nt(){var t=zt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Dt=function(){function t(){(0,p.Z)(this,t),this.h=this.g=null}return(0,y.Z)(t,[{key:"add",value:function(t,e){var n=Rt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),Rt=new It((function(){return new Pt}),(function(t){return t.reset()})),Pt=function(){function t(){(0,p.Z)(this,t),this.next=this.g=this.h=null}return(0,y.Z)(t,[{key:"set",value:function(t,e){this.h=t,this.g=e,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function Ft(t){var e=1;t=t.split(":");for(var n=[];0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Ut(t){S.setTimeout((function(){throw t}),0)}var Vt,Bt=!1,zt=new Dt,jt=function(){var t=S.Promise.resolve(void 0);Vt=function(){t.then(qt)}},qt=function(){for(var t;t=Nt();){try{t.h.call(t.g)}catch(n){Ut(n)}var e=Rt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Bt=!1};function Wt(t,e){At.call(this),this.h=t||1,this.g=e||S,this.j=M(this.qb,this),this.l=Date.now()}function Ht(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Kt(t,e,n){if("function"===typeof t)n&&(t=M(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=M(t.handleEvent,t)}return 2147483647<Number(e)?-1:S.setTimeout(t,e||0)}function Gt(t){t.g=Kt((function(){t.g=null,t.i&&(t.i=!1,Gt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}I(Wt,At),(i=Wt.prototype).ga=!1,i.T=null,i.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ot(this,"tick"),this.ga&&(Ht(this),this.start()))}},i.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.N=function(){Wt.$.N.call(this),Ht(this),delete this.g};var Qt=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this)).m=t,r.j=i,r.h=null,r.i=!1,r.g=null,r}return(0,y.Z)(n,[{key:"l",value:function(t){this.h=arguments,this.g?this.i=!0:Gt(this)}},{key:"N",value:function(){(0,a.Z)((0,o.Z)(n.prototype),"N",this).call(this),this.g&&(S.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(N);function Jt(t){N.call(this),this.h=t,this.g={}}I(Jt,N);var Xt=[];function Yt(t,e,n,i){Array.isArray(n)||(n&&(Xt[0]=n.toString()),n=Xt);for(var r=0;r<n.length;r++){var a=kt(e,n[r],i||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function $t(t){ct(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Et(t)}),t),t.g={}}function te(){this.g=!0}function ee(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var a=r[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<r.length;o++)r[o]=""}}}return Lt(n)}catch(s){return e}}(t,n)+(i?" "+i:"")}))}Jt.prototype.N=function(){Jt.$.N.call(this),$t(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},te.prototype.Ea=function(){this.g=!1},te.prototype.info=function(){};var ne={},ie=null;function re(){return ie=ie||new At}function ae(t){F.call(this,ne.Ta,t)}function oe(t){var e=re();Ot(e,new ae(e))}function se(t,e){F.call(this,ne.STAT_EVENT,t),this.stat=e}function ue(t){var e=re();Ot(e,new se(e,t))}function le(t,e){F.call(this,ne.Ua,t),this.size=e}function ce(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return S.setTimeout((function(){t()}),e)}ne.Ta="serverreachability",I(ae,F),ne.STAT_EVENT="statevent",I(se,F),ne.Ua="timingevent",I(le,F);var he={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ve(){}function de(t){return t.h||(t.h=t.i())}function pe(){}ve.prototype.h=null;var ye,me={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ge(){F.call(this,"d")}function ke(){F.call(this,"c")}function be(){}function we(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Jt(this),this.P=Ee,t=Q?125:void 0,this.V=new Wt(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}I(ge,F),I(ke,F),I(be,ve),be.prototype.g=function(){return new XMLHttpRequest},be.prototype.i=function(){return{}},ye=new be;var Ee=45e3,Se={},Ce={};function Te(t,e,n){t.L=1,t.v=We(Ve(e)),t.s=n,t.S=!0,xe(t,null)}function xe(t,e){t.G=Date.now(),Me(t),t.A=Ve(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),an(n.i,"t",i),t.C=0,n=t.l.J,t.h=new _e,t.g=oi(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Qt(M(t.Pa,t,t.g),t.O)),Yt(t.U,t.g,"readystatechange",t.nb),e=t.I?ht(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),oe(),function(t,e,n,i,r,a){t.info((function(){if(t.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function Ze(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.l.Ha)}function Ae(t,e,n){for(var i,r=!0;!t.J&&t.C<n.length;){if((i=Oe(t,n))==Ce){4==e&&(t.o=4,ue(14),r=!1),ee(t.j,t.m,null,"[Incomplete Response]");break}if(i==Se){t.o=4,ue(15),ee(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}ee(t.j,t.m,i,null),Re(t,i)}Ze(t)&&i!=Ce&&i!=Se&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ue(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yn(e),e.M=!0,ue(11))):(ee(t.j,t.m,n,"[Invalid Chunked Response]"),De(t),Ne(t))}function Oe(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ce:(n=Number(e.substring(n,i)),isNaN(n)?Se:(i+=1)+n>e.length?Ce:(e=e.slice(i,i+n),t.C=i+n,e))}function Me(t){t.Y=Date.now()+t.P,Le(t,t.P)}function Le(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ce(M(t.lb,t),e)}function Ie(t){t.B&&(S.clearTimeout(t.B),t.B=null)}function Ne(t){0==t.l.H||t.J||ei(t.l,t)}function De(t){Ie(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Ht(t.V),$t(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Re(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||fn(n.i,t)))if(!t.K&&fn(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(a){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;ti(n),qn(n)}Xn(n),ue(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=ce(M(n.ib,n),6e3));if(1>=hn(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else ii(n,11)}else if((t.K||n.g==t)&&ti(n),!V(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){var a=r[e];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;var l=t.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=i.i;h.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(vn(h,h.h),h.h=null))}if(i.F){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(i.Da=f,qe(i.I,i.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var v=t;if((i=n).wa=ai(i,i.J?i.pa:null,i.Y),v.K){dn(i.i,v);var d=v,p=i.L;p&&d.setTimeout(p),d.B&&(Ie(d),Me(d)),i.g=v}else Jn(i);0<n.j.length&&Hn(n)}else"stop"!=a[0]&&"close"!=a[0]||ii(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ii(n,7):jn(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}oe()}catch(a){}}function Pe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(C(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(C(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(C(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,a=0;a<r;a++)e.call(void 0,i[a],n&&n[a],t)}(i=we.prototype).setTimeout=function(t){this.P=t},i.nb=function(t){t=t.target;var e=this.M;e&&3==Pn(t)?e.l():this.Pa(t)},i.Pa=function(t){try{if(t==this.g)t:{var e=Pn(this.g),n=this.g.Ia();this.g.da();if(!(3>e)&&(3!=e||Q||this.g&&(this.h.h||this.g.ja()||Fn(this.g)))){this.J||4!=e||7==n||oe(),Ie(this);var i=this.g.da();this.ca=i;e:if(Ze(this)){var r=Fn(this.g);t="";var a=r.length,o=4==Pn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){De(this),Ne(this);var s="";break e}this.h.i=new S.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(r[n],{stream:o&&n==a-1});r.splice(0,a),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==i,function(t,e,n,i,r,a,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,e,i),this.i){if(this.aa&&!this.K){e:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(u)){var c=u;break e}}c=null}if(!(i=c)){this.i=!1,this.o=3,ue(12),De(this),Ne(this);break t}ee(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Re(this,i)}this.S?(Ae(this,e,s),Q&&this.i&&3==e&&(Yt(this.U,this.V,"tick",this.mb),this.V.start())):(ee(this.j,this.m,s,null),Re(this,s)),4==e&&De(this),this.i&&!this.J&&(4==e?ei(this.l,this):(this.i=!1,Me(this)))}else(function(t){var e={};t=(t.g&&2<=Pn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<t.length;n++)if(!V(t[n])){var i=Ft(t[n]),r=i[0];if("string"===typeof(i=i[1])){i=i.trim();var a=e[r]||[];e[r]=a,a.push(i)}}!function(t,e){for(var n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==i&&0<s.indexOf("Unknown SID")?(this.o=3,ue(12)):(this.o=0,ue(13)),De(this),Ne(this)}}}catch(e){}},i.mb=function(){if(this.g){var t=Pn(this.g),e=this.g.ja();this.C<e.length&&(Ie(this),Ae(this,t,e),this.i&&4!=t&&Me(this))}},i.cancel=function(){this.J=!0,De(this)},i.lb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(oe(),ue(17)),De(this),this.o=2,Ne(this)):Le(this,this.Y-t)};var Fe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ue(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ue){this.h=t.h,Be(this,t.j),this.s=t.s,this.g=t.g,ze(this,t.m),this.l=t.l;var e=t.i,n=new tn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),je(this,n),this.o=t.o}else t&&(e=String(t).match(Fe))?(this.h=!1,Be(this,e[1]||"",!0),this.s=He(e[2]||""),this.g=He(e[3]||"",!0),ze(this,e[4]),this.l=He(e[5]||"",!0),je(this,e[6]||"",!0),this.o=He(e[7]||"")):(this.h=!1,this.i=new tn(null,this.h))}function Ve(t){return new Ue(t)}function Be(t,e,n){t.j=n?He(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ze(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function je(t,e,n){e instanceof tn?(t.i=e,function(t,e){e&&!t.j&&(en(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(nn(this,e),an(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Ke(e,Ye)),t.i=new tn(e,t.h))}function qe(t,e,n){t.i.set(e,n)}function We(t){return qe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function He(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ke(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ge),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ge(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ue.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ke(e,Qe,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ke(e,Qe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ke(n,"/"==n.charAt(0)?Xe:Je,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ke(n,$e)),t.join("")};var Qe=/[#\/\?@]/g,Je=/[#\?:]/g,Xe=/[#\?]/g,Ye=/[#\?@]/g,$e=/#/g;function tn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function en(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];e(a,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function nn(t,e){en(t),e=on(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function rn(t,e){return en(t),e=on(t,e),t.g.has(e)}function an(t,e,n){nn(t,e),0<n.length&&(t.i=null,t.g.set(on(t,e),R(n)),t.h+=n.length)}function on(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(i=tn.prototype).add=function(t,e){en(this),this.i=null,t=on(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},i.forEach=function(t,e){en(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},i.ta=function(){en(this);for(var t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[],i=0;i<e.length;i++)for(var r=t[i],a=0;a<r.length;a++)n.push(e[i]);return n},i.Z=function(t){en(this);var e=[];if("string"===typeof t)rn(this,t)&&(e=e.concat(this.g.get(on(this,t))));else{t=Array.from(this.g.values());for(var n=0;n<t.length;n++)e=e.concat(t[n])}return e},i.set=function(t,e){return en(this),this.i=null,rn(this,t=on(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},i.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=Array.from(this.g.keys()),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var o=r;""!==a[i]&&(o+="="+encodeURIComponent(String(a[i]))),t.push(o)}}return this.i=t.join("&")};var sn=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.g=e,this.map=n}));function un(t){this.l=t||ln,S.PerformanceNavigationTiming?t=0<(t=S.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(S.g&&S.g.Ka&&S.g.Ka()&&S.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ln=10;function cn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function hn(t){return t.h?1:t.g?t.g.size:0}function fn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function vn(t,e){t.g?t.g.add(e):t.h=e}function dn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pn(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){var e,n=t.i,i=(0,l.Z)(t.g.values());try{for(i.s();!(e=i.n()).done;){var r=e.value;n=n.concat(r.F)}}catch(a){i.e(a)}finally{i.f()}return n}return R(t.i)}un.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var t,e=(0,l.Z)(this.g.values());try{for(e.s();!(t=e.n()).done;){t.value.cancel()}}catch(n){e.e(n)}finally{e.f()}this.g.clear()}};var yn,mn=function(){function t(){(0,p.Z)(this,t)}return(0,y.Z)(t,[{key:"stringify",value:function(t){return S.JSON.stringify(t,void 0)}},{key:"parse",value:function(t){return S.JSON.parse(t,void 0)}}]),t}();function gn(){this.g=new mn}function kn(t,e,n){var i=n||"";try{Pe(t,(function(t,n){var r=t;T(t)&&(r=Lt(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function bn(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(a){}}function wn(t){this.l=t.ec||null,this.j=t.ob||!1}function _n(t,e){At.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=En,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}I(wn,ve),wn.prototype.g=function(){return new _n(this.l,this.j)},wn.prototype.i=(yn={},function(){return yn}),I(_n,At);var En=0;function Sn(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Cn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Tn(t)}function Tn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(i=_n.prototype).open=function(t,e){if(this.readyState!=En)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Tn(this)},i.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||S).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cn(this)),this.readyState=En},i.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof S.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sn(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},i.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Cn(this):Tn(this),3==this.readyState&&Sn(this)}},i.Za=function(t){this.g&&(this.response=this.responseText=t,Cn(this))},i.Ya=function(t){this.g&&(this.response=t,Cn(this))},i.ka=function(){this.g&&Cn(this)},i.setRequestHeader=function(t,e){this.v.append(t,e)},i.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var xn=S.JSON.parse;function Zn(t){At.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=An,this.L=this.M=!1}I(Zn,At);var An="",On=/^https?$/i,Mn=["POST","PUT"];function Ln(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,In(t),Dn(t)}function In(t){t.F||(t.F=!0,Ot(t,"complete"),Ot(t,"error"))}function Nn(t){if(t.h&&"undefined"!=typeof E&&(!t.C[1]||4!=Pn(t)||2!=t.da()))if(t.v&&4==Pn(t))Kt(t.La,0,t);else if(Ot(t,"readystatechange"),4==Pn(t)){t.h=!1;try{var e,n=t.da();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var a=String(t.I).match(Fe)[1]||null;!a&&S.self&&S.self.location&&(a=S.self.location.protocol.slice(0,-1)),r=!On.test(a?a.toLowerCase():"")}e=r}if(e)Ot(t,"complete"),Ot(t,"success");else{t.m=6;try{var o=2<Pn(t)?t.g.statusText:""}catch(s){o=""}t.j=o+" ["+t.da()+"]",In(t)}}finally{Dn(t)}}}function Dn(t,e){if(t.g){Rn(t);var n=t.g,i=t.C[0]?function(){}:null;t.g=null,t.C=null,e||Ot(t,"ready");try{n.onreadystatechange=i}catch(r){}}}function Rn(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(S.clearTimeout(t.A),t.A=null)}function Pn(t){return t.g?t.g.readyState:0}function Fn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case An:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Wi){return null}}function Un(t){var e="";return ct(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Vn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Un(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):qe(t,e,n))}function Bn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zn(t){this.Ga=0,this.j=[],this.l=new te,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bn("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bn("baseRetryDelayMs",5e3,t),this.hb=Bn("retryDelaySeedMs",1e4,t),this.eb=Bn("forwardChannelMaxRetries",2,t),this.xa=Bn("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new un(t&&t.concurrentRequestLimit),this.Ja=new gn,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jn(t){if(Wn(t),3==t.H){var e=t.W++,n=Ve(t.I);if(qe(n,"SID",t.K),qe(n,"RID",e),qe(n,"TYPE","terminate"),Gn(t,n),(e=new we(t,t.l,e)).L=2,e.v=We(Ve(n)),n=!1,S.navigator&&S.navigator.sendBeacon)try{n=S.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&S.Image&&((new Image).src=e.v,n=!0),n||(e.g=oi(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Me(e)}ri(t)}function qn(t){t.g&&(Yn(t),t.g.cancel(),t.g=null)}function Wn(t){qn(t),t.u&&(S.clearTimeout(t.u),t.u=null),ti(t),t.i.cancel(),t.m&&("number"===typeof t.m&&S.clearTimeout(t.m),t.m=null)}function Hn(t){if(!cn(t.i)&&!t.m){t.m=!0;var e=t.Na;Vt||jt(),Bt||(Vt(),Bt=!0),zt.add(e,t),t.C=0}}function Kn(t,e){var n;n=e?e.m:t.W++;var i=Ve(t.I);qe(i,"SID",t.K),qe(i,"RID",n),qe(i,"AID",t.V),Gn(t,i),t.o&&t.s&&Vn(i,t.o,t.s),n=new we(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Qn(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),vn(t.i,n),Te(n,i,e)}function Gn(t,e){t.na&&ct(t.na,(function(t,n){qe(e,n,t)})),t.h&&Pe({},(function(t,n){qe(e,n,t)}))}function Qn(t,e,n){n=Math.min(t.j.length,n);var i=t.h?M(t.h.Va,t.h,t):null;t:for(var r=t.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=r[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=r[u].g,c=r[u].map;if(0>(l-=a))a=Math.max(0,r[u].g-100),s=!1;else try{kn(c,o,"req"+l+"_")}catch(h){i&&i(c)}}if(s){i=o.join("&");break t}}return t=t.j.splice(0,n),e.F=t,i}function Jn(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vt||jt(),Bt||(Vt(),Bt=!0),zt.add(e,t),t.A=0}}function Xn(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=ce(M(t.Ma,t),ni(t,t.A)),t.A++,!0)}function Yn(t){null!=t.B&&(S.clearTimeout(t.B),t.B=null)}function $n(t){t.g=new we(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ve(t.wa);qe(e,"RID","rpc"),qe(e,"SID",t.K),qe(e,"AID",t.V),qe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&qe(e,"TO",t.qa),qe(e,"TYPE","xmlhttp"),Gn(t,e),t.o&&t.s&&Vn(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=We(Ve(e)),n.s=null,n.S=!0,xe(n,t)}function ti(t){null!=t.v&&(S.clearTimeout(t.v),t.v=null)}function ei(t,e){var n=null;if(t.g==e){ti(t),Yn(t),t.g=null;var i=2}else{if(!fn(t.i,e))return;n=e.F,dn(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;Ot(i=re(),new le(i,n)),Hn(t)}else Jn(t);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(hn(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=ce(M(t.Na,t,e),ni(t,t.C)),t.C++,!0))}(t,e)||2==i&&Xn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:ii(t,5);break;case 4:ii(t,10);break;case 3:ii(t,6);break;default:ii(t,2)}}function ni(t,e){var n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ii(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=M(t.pb,t);n||(n=new Ue("//www.google.com/images/cleardot.gif"),S.location&&"http"==S.location.protocol||Be(n,"https"),We(n)),function(t,e){var n=new te;if(S.Image){var i=new Image;i.onload=L(bn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=L(bn,n,i,"TestLoadImage: error",!1,e),i.onabort=L(bn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=L(bn,n,i,"TestLoadImage: timeout",!1,e),S.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else ue(2);t.H=0,t.h&&t.h.za(e),ri(t),Wn(t)}function ri(t){if(t.H=0,t.ma=[],t.h){var e=pn(t.i);0==e.length&&0==t.j.length||(P(t.ma,e),P(t.ma,t.j),t.i.i.length=0,R(t.j),t.j.length=0),t.h.ya()}}function ai(t,e,n){var i=n instanceof Ue?Ve(n):new Ue(n);if(""!=i.g)e&&(i.g=e+"."+i.g),ze(i,i.m);else{var r=S.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var a=new Ue(null);i&&Be(a,i),e&&(a.g=e),r&&ze(a,r),n&&(a.l=n),i=a}return n=t.F,e=t.Da,n&&e&&qe(i,n,e),qe(i,"VER",t.ra),Gn(t,i),i}function oi(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new Zn(new wn({ob:!0})):new Zn(t.va)).Oa(t.J),e}function si(){}function ui(){if(K&&!(10<=Number(it)))throw Error("Environmental error: no available transport.")}function li(t,e){At.call(this),this.g=new zn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!V(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!V(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new fi(this)}function ci(t){ge.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function hi(){ke.call(this),this.status=1}function fi(t){this.g=t}function vi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function di(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var a=t.g[3],o=e+(a^n&(r^a))+i[0]+3614090360&4294967295;o=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=(n=(r=(a=(e=n+(o<<7&4294967295|o>>>25))+((o=a+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(a^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(a^n&(r^a))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(a^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(a^n&(r^a))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(a^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(a^n&(r^a))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(a^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^a&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(a^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^e&(r^a))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^a&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(a^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^e&(r^a))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^a&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(a^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^e&(r^a))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^a&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(a^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^e&(r^a))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^a)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^a)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^a)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^a)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~a))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(a|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~a))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(a|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~a))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(a|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(e=n+((o=e+(r^(n|~a))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=a+((o=r+(e^(a|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+a&4294967295}function pi(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var a=0|t[r];i&&a==e||(n[r]=a,i=!1)}this.g=n}(i=Zn.prototype).Oa=function(t){this.M=t},i.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ye.g(),this.C=this.u?de(this.u):de(ye),this.g.onreadystatechange=M(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(u){return void Ln(this,u)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));var a,o=(0,l.Z)(i.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,i.get(u))}}catch(p){o.e(p)}finally{o.f()}}i=Array.from(n.keys()).find((function(t){return"content-type"==t.toLowerCase()})),r=S.FormData&&t instanceof S.FormData,!(0<=D(Mn,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,h=(0,l.Z)(n);try{for(h.s();!(c=h.n()).done;){var f=(0,s.Z)(c.value,2),v=f[0],d=f[1];this.g.setRequestHeader(v,d)}}catch(p){h.e(p)}finally{h.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Rn(this),0<this.B&&((this.L=function(t){return K&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=M(this.ua,this)):this.A=Kt(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(u){Ln(this,u)}},i.ua=function(){"undefined"!=typeof E&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))},i.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ot(this,"complete"),Ot(this,"abort"),Dn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dn(this,!0)),Zn.$.N.call(this)},i.La=function(){this.s||(this.G||this.v||this.l?Nn(this):this.kb())},i.kb=function(){Nn(this)},i.isActive=function(){return!!this.g},i.da=function(){try{return 2<Pn(this)?this.g.status:-1}catch(yn){return-1}},i.ja=function(){try{return this.g?this.g.responseText:""}catch(yn){return""}},i.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xn(e)}},i.Ia=function(){return this.m},i.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(i=zn.prototype).ra=8,i.H=1,i.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;var e=new we(this,this.l,t),n=this.s;if(this.U&&(n?vt(n=ht(n),this.U):n=this.U),null!==this.o||this.O||(e.I=n,n=null),this.P)t:{for(var i=0,r=0;r<this.j.length;r++){var a=this.j[r];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(i+=a)){i=r;break t}if(4096===i||r===this.j.length-1){i=r+1;break t}}i=1e3}else i=1e3;i=Qn(this,e,i),qe(r=Ve(this.I),"RID",t),qe(r,"CVER",22),this.F&&qe(r,"X-HTTP-Session-Id",this.F),Gn(this,r),n&&(this.O?i="headers="+encodeURIComponent(String(Un(n)))+"&"+i:this.o&&Vn(r,this.o,n)),vn(this.i,e),this.bb&&qe(r,"TYPE","init"),this.P?(qe(r,"$req",i),qe(r,"SID","null"),e.aa=!0,Te(e,r,null)):Te(e,r,i),this.H=2}}else 3==this.H&&(t?Kn(this,t):0==this.j.length||cn(this.i)||Kn(this))},i.Ma=function(){if(this.u=null,$n(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ce(M(this.jb,this),t)}},i.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ue(10),qn(this),$n(this))},i.ib=function(){null!=this.v&&(this.v=null,qn(this),Xn(this),ue(19))},i.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ue(2)):(this.l.info("Failed to ping google.com"),ue(1))},i.isActive=function(){return!!this.h&&this.h.isActive(this)},(i=si.prototype).Ba=function(){},i.Aa=function(){},i.za=function(){},i.ya=function(){},i.isActive=function(){return!0},i.Va=function(){},ui.prototype.g=function(t,e){return new li(t,e)},I(li,At),li.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ue(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ai(t,null,t.Y),Hn(t)},li.prototype.close=function(){jn(this.g)},li.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Lt(t),t=n);e.j.push(new sn(e.fb++,t)),3==e.H&&Hn(e)},li.prototype.N=function(){this.g.h=null,delete this.j,jn(this.g),delete this.g,li.$.N.call(this)},I(ci,ge),I(hi,ke),I(fi,si),fi.prototype.Ba=function(){Ot(this.g,"a")},fi.prototype.Aa=function(t){Ot(this.g,new ci(t))},fi.prototype.za=function(t){Ot(this.g,new hi)},fi.prototype.ya=function(){Ot(this.g,"b")},I(vi,(function(){this.blockSize=-1})),vi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,a=0;a<e;){if(0==r)for(;a<=n;)di(this,t,a),a+=this.blockSize;if("string"===typeof t){for(;a<e;)if(i[r++]=t.charCodeAt(a++),r==this.blockSize){di(this,i),r=0;break}}else for(;a<e;)if(i[r++]=t[a++],r==this.blockSize){di(this,i),r=0;break}}this.h=r,this.i+=e},vi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var yi={};function mi(t){return-128<=t&&128>t?function(t,e){var n=yi;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new pi([0|t],0>t?-1:0)})):new pi([0|t],0>t?-1:0)}function gi(t){if(isNaN(t)||!isFinite(t))return bi;if(0>t)return Ci(gi(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=ki;return new pi(e,0)}var ki=4294967296,bi=mi(0),wi=mi(1),_i=mi(16777216);function Ei(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Si(t){return-1==t.h}function Ci(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new pi(n,~t.h).add(wi)}function Ti(t,e){return t.add(Ci(e))}function xi(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Zi(t,e){this.g=t,this.h=e}function Ai(t,e){if(Ei(e))throw Error("division by zero");if(Ei(t))return new Zi(bi,bi);if(Si(t))return e=Ai(Ci(t),e),new Zi(Ci(e.g),Ci(e.h));if(Si(e))return e=Ai(t,Ci(e)),new Zi(Ci(e.g),e.h);if(30<t.g.length){if(Si(t)||Si(e))throw Error("slowDivide_ only works with positive integers.");for(var n=wi,i=e;0>=i.X(t);)n=Oi(n),i=Oi(i);var r=Mi(n,1),a=Mi(i,1);for(i=Mi(i,2),n=Mi(n,2);!Ei(i);){var o=a.add(i);0>=o.X(t)&&(r=r.add(n),a=o),i=Mi(i,1),n=Mi(n,1)}return e=Ti(t,r.R(e)),new Zi(r,e)}for(r=bi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(a=gi(n)).R(e);Si(o)||0<o.X(t);)o=(a=gi(n-=i)).R(e);Ei(a)&&(a=wi),r=r.add(a),t=Ti(t,o)}return new Zi(r,t)}function Oi(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new pi(n,t.h)}function Mi(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],a=0;a<i;a++)r[a]=0<e?t.D(a+n)>>>e|t.D(a+n+1)<<32-e:t.D(a+n);return new pi(r,t.h)}(i=pi.prototype).ea=function(){if(Si(this))return-Ci(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:ki+i)*e,e*=ki}return t},i.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ei(this))return"0";if(Si(this))return"-"+Ci(this).toString(t);for(var e=gi(Math.pow(t,6)),n=this,i="";;){var r=Ai(n,e).g,a=((0<(n=Ti(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ei(n=r))return a+i;for(;6>a.length;)a="0"+a;i=a+i}},i.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},i.X=function(t){return Si(t=Ti(this,t))?-1:Ei(t)?0:1},i.abs=function(){return Si(this)?Ci(this):this},i.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var a=i+(65535&this.D(r))+(65535&t.D(r)),o=(a>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,a&=65535,o&=65535,n[r]=o<<16|a}return new pi(n,-2147483648&n[n.length-1]?-1:0)},i.R=function(t){if(Ei(this)||Ei(t))return bi;if(Si(this))return Si(t)?Ci(this).R(Ci(t)):Ci(Ci(this).R(t));if(Si(t))return Ci(this.R(Ci(t)));if(0>this.X(_i)&&0>t.X(_i))return gi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var a=this.D(i)>>>16,o=65535&this.D(i),s=t.D(r)>>>16,u=65535&t.D(r);n[2*i+2*r]+=o*u,xi(n,2*i+2*r),n[2*i+2*r+1]+=a*u,xi(n,2*i+2*r+1),n[2*i+2*r+1]+=o*s,xi(n,2*i+2*r+1),n[2*i+2*r+2]+=a*s,xi(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new pi(n,0)},i.gb=function(t){return Ai(this,t).h},i.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new pi(n,this.h&t.h)},i.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new pi(n,this.h|t.h)},i.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new pi(n,this.h^t.h)},ui.prototype.createWebChannel=ui.prototype.g,li.prototype.send=li.prototype.u,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,he.NO_ERROR=0,he.TIMEOUT=8,he.HTTP_ERROR=6,fe.COMPLETE="complete",pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",At.prototype.listen=At.prototype.O,Zn.prototype.listenOnce=Zn.prototype.P,Zn.prototype.getLastError=Zn.prototype.Sa,Zn.prototype.getLastErrorCode=Zn.prototype.Ia,Zn.prototype.getStatus=Zn.prototype.da,Zn.prototype.getResponseJson=Zn.prototype.Wa,Zn.prototype.getResponseText=Zn.prototype.ja,Zn.prototype.send=Zn.prototype.ha,Zn.prototype.setWithCredentials=Zn.prototype.Oa,vi.prototype.digest=vi.prototype.l,vi.prototype.reset=vi.prototype.reset,vi.prototype.update=vi.prototype.j,pi.prototype.add=pi.prototype.add,pi.prototype.multiply=pi.prototype.R,pi.prototype.modulo=pi.prototype.gb,pi.prototype.compare=pi.prototype.X,pi.prototype.toNumber=pi.prototype.ea,pi.prototype.toString=pi.prototype.toString,pi.prototype.getBits=pi.prototype.D,pi.fromNumber=gi,pi.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return Ci(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=gi(Math.pow(n,8)),r=bi,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),s=parseInt(e.substring(a,a+o),n);8>o?(o=gi(Math.pow(n,o)),r=r.R(o).add(gi(s))):r=(r=r.R(i)).add(gi(s))}return r};var Li=_.createWebChannelTransport=function(){return new ui},Ii=_.getStatEventTarget=function(){return re()},Ni=_.ErrorCode=he,Di=_.EventType=fe,Ri=_.Event=ne,Pi=_.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Fi=(_.FetchXmlHttpFactory=wn,_.WebChannel=pe),Ui=_.XhrIo=Zn,Vi=_.Md5=vi,Bi=_.Integer=pi,zi="@firebase/firestore",ji=function(){function t(e){(0,p.Z)(this,t),this.uid=e}return(0,y.Z)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(t){return t.uid===this.uid}}]),t}();ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");var qi="10.5.0",Wi=new k.Yd("@firebase/firestore");function Hi(){return Wi.logLevel}function Ki(t){if(Wi.logLevel<=k.in.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n.map(Ji);Wi.debug.apply(Wi,["Firestore (".concat(qi,"): ").concat(t)].concat((0,d.Z)(r)))}}function Gi(t){if(Wi.logLevel<=k.in.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n.map(Ji);Wi.error.apply(Wi,["Firestore (".concat(qi,"): ").concat(t)].concat((0,d.Z)(r)))}}function Qi(t){if(Wi.logLevel<=k.in.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n.map(Ji);Wi.warn.apply(Wi,["Firestore (".concat(qi,"): ").concat(t)].concat((0,d.Z)(r)))}}function Ji(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Xi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",e="FIRESTORE (".concat(qi,") INTERNAL ASSERTION FAILED: ")+t;throw Gi(e),new Error(e)}function Yi(t,e){t||Xi()}function $i(t,e){return t}var tr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},er=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this,t,i)).code=t,r.message=i,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return(0,y.Z)(n)}(b.ZR),nr=(0,y.Z)((function t(){var e=this;(0,p.Z)(this,t),this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))})),ir=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))})),rr=function(){function t(){(0,p.Z)(this,t)}return(0,y.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(ji.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),ar=function(){function t(e){(0,p.Z)(this,t),this.token=e,this.changeListener=null}return(0,y.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),t}(),or=function(){function t(e){(0,p.Z)(this,t),this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,y.Z)(t,[{key:"start",value:function(t,e){var n=this,i=this.i,r=function(t){return n.i!==i?(i=n.i,e(t)):Promise.resolve()},a=new nr;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new nr,t.enqueueRetryable((function(){return r(n.currentUser)}))};var o=function(){var e=a;t.enqueueRetryable((0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.promise;case 2:return t.next=4,r(n.currentUser);case 4:case"end":return t.stop()}}),t)}))))},s=function(t){Ki("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=t,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(t){return s(t)})),setTimeout((function(){if(!n.auth){var t=n.t.getImmediate({optional:!0});t?s(t):(Ki("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new nr)}}),0),o()}},{key:"getToken",value:function(){var t=this,e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.i!==e?(Ki("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Yi("string"==typeof n.accessToken),new ir(n.accessToken,t.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var t=this.auth&&this.auth.getUid();return Yi(null===t||"string"==typeof t),new ji(t)}}]),t}(),sr=function(){function t(e,n,i){(0,p.Z)(this,t),this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.I=new Map}return(0,y.Z)(t,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),t}(),ur=function(){function t(e,n,i){(0,p.Z)(this,t),this.l=e,this.h=n,this.P=i}return(0,y.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(new sr(this.l,this.h,this.P))}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(ji.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),lr=(0,y.Z)((function t(e){(0,p.Z)(this,t),this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),cr=function(){function t(e){(0,p.Z)(this,t),this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}return(0,y.Z)(t,[{key:"start",value:function(t,e){var n=this,i=function(t){null!=t.error&&Ki("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));var i=t.token!==n.R;return n.R=t.token,Ki("FirebaseAppCheckTokenProvider","Received ".concat(i?"new":"existing"," token.")),i?e(t.token):Promise.resolve()};this.o=function(e){t.enqueueRetryable((function(){return i(e)}))};var r=function(t){Ki("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=t,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(t){return r(t)})),setTimeout((function(){if(!n.appCheck){var t=n.A.getImmediate({optional:!0});t?r(t):Ki("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var t=this,e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(Yi("string"==typeof e.token),t.R=e.token,new lr(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}();function hr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var fr=function(){function t(){(0,p.Z)(this,t)}return(0,y.Z)(t,null,[{key:"V",value:function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62),n="";n.length<20;)for(var i=hr(40),r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%62));return n}}]),t}();function vr(t,e){return t<e?-1:t>e?1:0}function dr(t,e,n){return t.length===e.length&&t.every((function(t,i){return n(t,e[i])}))}var pr=function(){function t(e,n){if((0,p.Z)(this,t),this.seconds=e,this.nanoseconds=n,n<0)throw new er(tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new er(tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new er(tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new er(tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return(0,y.Z)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}},{key:"isEqual",value:function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),yr=function(){function t(e){(0,p.Z)(this,t),this.timestamp=e}return(0,y.Z)(t,[{key:"compareTo",value:function(t){return this.timestamp._compareTo(t.timestamp)}},{key:"isEqual",value:function(t){return this.timestamp.isEqual(t.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new pr(0,0))}},{key:"max",value:function(){return new t(new pr(253402300799,999999999))}}]),t}(),mr=function(){function t(e,n,i){(0,p.Z)(this,t),void 0===n?n=0:n>e.length&&Xi(),void 0===i?i=e.length-n:i>e.length-n&&Xi(),this.segments=e,this.offset=n,this.len=i}return(0,y.Z)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(t){return this.segments[this.offset+t]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"isImmediateParentOf",value:function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"forEach",value:function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),a=e.get(i);if(r<a)return-1;if(r>a)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}]),t}(),gr=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n,[{key:"construct",value:function(t,e,i){return new n(t,e,i)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=[],e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];for(var a=0,o=i;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new er(tr.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));t.push.apply(t,(0,d.Z)(s.split("/").filter((function(t){return t.length>0}))))}return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(mr),kr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,br=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n,[{key:"construct",value:function(t,e,i){return new n(t,e,i)}},{key:"canonicalString",value:function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(t){return kr.test(t)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(t){for(var e=[],i="",r=0,a=function(){if(0===i.length)throw new er(tr.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(i),i=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new er(tr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new er(tr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else"`"===s?(o=!o,r++):"."!==s||o?(i+=s,r++):(a(),r++)}if(a(),o)throw new er(tr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(mr),wr=function(){function t(e){(0,p.Z)(this,t),this.path=e}return(0,y.Z)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(t){return null!==t&&0===gr.comparator(this.path,t.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(gr.fromString(e))}},{key:"fromName",value:function(e){return new t(gr.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(gr.emptyPath())}},{key:"comparator",value:function(t,e){return gr.comparator(t.path,e.path)}},{key:"isDocumentKey",value:function(t){return t.length%2==0}},{key:"fromSegments",value:function(e){return new t(new gr(e.slice()))}}]),t}(),_r=(0,y.Z)((function t(e,n,i,r){(0,p.Z)(this,t),this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}));_r.UNKNOWN_ID=-1;function Er(t,e){var n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=yr.fromTimestamp(1e9===i?new pr(n+1,0):new pr(n,i));return new Cr(r,wr.empty(),e)}function Sr(t){return new Cr(t.readTime,t.key,-1)}var Cr=function(){function t(e,n,i){(0,p.Z)(this,t),this.readTime=e,this.documentKey=n,this.largestBatchId=i}return(0,y.Z)(t,null,[{key:"min",value:function(){return new t(yr.min(),wr.empty(),-1)}},{key:"max",value:function(){return new t(yr.max(),wr.empty(),-1)}}]),t}();function Tr(t,e){var n=t.readTime.compareTo(e.readTime);return 0!==n?n:0!==(n=wr.comparator(t.documentKey,e.documentKey))?n:vr(t.largestBatchId,e.largestBatchId)}var xr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zr=function(){function t(){(0,p.Z)(this,t),this.onCommittedListeners=[]}return(0,y.Z)(t,[{key:"addOnCommittedListener",value:function(t){this.onCommittedListeners.push(t)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(t){return t()}))}}]),t}();function Ar(t){return Or.apply(this,arguments)}function Or(){return(Or=(0,h.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.code===tr.FAILED_PRECONDITION&&e.message===xr){t.next=2;break}throw e;case 2:Ki("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Mr=function(){function t(e){var n=this;(0,p.Z)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(t){n.isDone=!0,n.result=t,n.nextCallback&&n.nextCallback(t)}),(function(t){n.isDone=!0,n.error=t,n.catchCallback&&n.catchCallback(t)}))}return(0,y.Z)(t,[{key:"catch",value:function(t){return this.next(void 0,t)}},{key:"next",value:function(e,n){var i=this;return this.callbackAttached&&Xi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,r){i.nextCallback=function(n){i.wrapSuccess(e,n).next(t,r)},i.catchCallback=function(e){i.wrapFailure(n,e).next(t,r)}}))}},{key:"toPromise",value:function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var i=0,r=0,a=!1;e.forEach((function(e){++i,e.next((function(){++r,a&&r===i&&t()}),(function(t){return n(t)}))})),a=!0,r===i&&t()}))}},{key:"or",value:function(e){var n,i=t.resolve(!1),r=(0,l.Z)(e);try{var a=function(){var e=n.value;i=i.next((function(n){return n?t.resolve(n):e()}))};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return i}},{key:"forEach",value:function(t,e){var n=this,i=[];return t.forEach((function(t,r){i.push(e.call(n,t,r))})),this.waitFor(i)}},{key:"mapArray",value:function(e,n){return new t((function(t,i){for(var r=e.length,a=new Array(r),o=0,s=function(){var s=u;n(e[s]).next((function(e){a[s]=e,++o===r&&t(a)}),(function(t){return i(t)}))},u=0;u<r;u++)s()}))}},{key:"doWhile",value:function(e,n){return new t((function(t,i){!function r(){!0===e()?n().next((function(){r()}),i):t()}()}))}}]),t}();function Lr(t){return"IndexedDbTransactionError"===t.name}var Ir=function(){function t(e,n){var i=this;(0,p.Z)(this,t),this.previousValue=e,n&&(n.sequenceNumberHandler=function(t){return i.oe(t)},this._e=function(t){return n.writeSequenceNumber(t)})}return(0,y.Z)(t,[{key:"oe",value:function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}},{key:"next",value:function(){var t=++this.previousValue;return this._e&&this._e(t),t}}]),t}();function Nr(t){return null==t}function Dr(t){return 0===t&&1/t==-1/0}function Rr(t){return"number"==typeof t&&Number.isInteger(t)&&!Dr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}Ir.ae=-1;var Pr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Fr=([].concat((0,d.Z)(Pr),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Ur=Fr;[].concat(Ur,["indexConfiguration","indexState","indexEntries"]);function Vr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Br(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var jr=function(){function t(e,n){(0,p.Z)(this,t),this.comparator=e,this.root=n||Wr.EMPTY}return(0,y.Z)(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wr.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}},{key:"get",value:function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}},{key:"indexOf",value:function(t){for(var e=0,n=this.root;!n.isEmpty();){var i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(t){return this.root.inorderTraversal(t)}},{key:"forEach",value:function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))}},{key:"toString",value:function(){var t=[];return this.inorderTraversal((function(e,n){return t.push("".concat(e,":").concat(n)),!1})),"{".concat(t.join(", "),"}")}},{key:"reverseTraversal",value:function(t){return this.root.reverseTraversal(t)}},{key:"getIterator",value:function(){return new qr(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(t){return new qr(this.root,t,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new qr(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(t){return new qr(this.root,t,this.comparator,!0)}}]),t}(),qr=function(){function t(e,n,i,r){(0,p.Z)(this,t),this.isReverse=r,this.nodeStack=[];for(var a=1;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return(0,y.Z)(t,[{key:"getNext",value:function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}]),t}(),Wr=function(){function t(e,n,i,r,a){(0,p.Z)(this,t),this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=a?a:t.EMPTY,this.size=this.left.size+1+this.right.size}return(0,y.Z)(t,[{key:"copy",value:function(e,n,i,r,a){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}},{key:"reverseTraversal",value:function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===n(e,r.key)){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}},{key:"moveRedLeft",value:function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}},{key:"moveRedRight",value:function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}},{key:"checkMaxDepth",value:function(){var t=this.check();return Math.pow(2,t)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Xi();if(this.right.isRed())throw Xi();var t=this.left.check();if(t!==this.right.check())throw Xi();return t+(this.isRed()?0:1)}}]),t}();Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new(function(){function t(){(0,p.Z)(this,t),this.size=0}return(0,y.Z)(t,[{key:"key",get:function(){throw Xi()}},{key:"value",get:function(){throw Xi()}},{key:"color",get:function(){throw Xi()}},{key:"left",get:function(){throw Xi()}},{key:"right",get:function(){throw Xi()}},{key:"copy",value:function(t,e,n,i,r){return this}},{key:"insert",value:function(t,e,n){return new Wr(t,e)}},{key:"remove",value:function(t,e){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(t){return!1}},{key:"reverseTraversal",value:function(t){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());var Hr=function(){function t(e){(0,p.Z)(this,t),this.comparator=e,this.data=new jr(this.comparator)}return(0,y.Z)(t,[{key:"has",value:function(t){return null!==this.data.get(t)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(t){return this.data.indexOf(t)}},{key:"forEach",value:function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"forEachInRange",value:function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}},{key:"forEachWhile",value:function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}},{key:"getIterator",value:function(){return new Kr(this.data.getIterator())}},{key:"getIteratorFrom",value:function(t){return new Kr(this.data.getIteratorFrom(t))}},{key:"add",value:function(t){return this.copy(this.data.remove(t).insert(t,!0))}},{key:"delete",value:function(t){return this.has(t)?this.copy(this.data.remove(t)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),i=e.data.getIterator();n.hasNext();){var r=n.getNext().key,a=i.getNext().key;if(0!==this.comparator(r,a))return!1}return!0}},{key:"toArray",value:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),Kr=function(){function t(e){(0,p.Z)(this,t),this.iter=e}return(0,y.Z)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();var Gr=function(){function t(e){(0,p.Z)(this,t),this.fields=e,e.sort(br.comparator)}return(0,y.Z)(t,[{key:"unionWith",value:function(e){var n,i=new Hr(br.comparator),r=(0,l.Z)(this.fields);try{for(r.s();!(n=r.n()).done;){var a=n.value;i=i.add(a)}}catch(c){r.e(c)}finally{r.f()}var o,s=(0,l.Z)(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;i=i.add(u)}}catch(c){s.e(c)}finally{s.f()}return new t(i.toArray())}},{key:"covers",value:function(t){var e,n=(0,l.Z)(this.fields);try{for(n.s();!(e=n.n()).done;){if(e.value.isPrefixOf(t))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"isEqual",value:function(t){return dr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))}}],[{key:"empty",value:function(){return new t([])}}]),t}(),Qr=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){var t;return(0,p.Z)(this,n),(t=e.apply(this,arguments)).name="Base64DecodeError",t}return(0,y.Z)(n)}((0,u.Z)(Error));var Jr=function(t){function e(t){(0,p.Z)(this,e),this.binaryString=t}return(0,y.Z)(e,[{key:t,value:function(){var t=this,e=0;return{next:function(){return e<t.binaryString.length?{value:t.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return t=this.binaryString,btoa(t);var t}},{key:"toUint8Array",value:function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(t){return vr(this.binaryString,t.binaryString)}},{key:"isEqual",value:function(t){return this.binaryString===t.binaryString}}],[{key:"fromBase64String",value:function(t){var n=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Qr("Invalid base64 string: "+t):t}}(t);return new e(n)}},{key:"fromUint8Array",value:function(t){var n=function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new e(n)}}]),e}(Symbol.iterator);Jr.EMPTY_BYTE_STRING=new Jr("");var Xr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(Yi(!!t),"string"==typeof t){var e=0,n=Xr.exec(t);if(Yi(!!n),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}var r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$r(t.seconds),nanos:$r(t.nanos)}}function $r(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ta(t){return"string"==typeof t?Jr.fromBase64String(t):Jr.fromUint8Array(t)}function ea(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function na(t){var e=t.mapValue.fields.__previous_value__;return ea(e)?na(e):e}function ia(t){var e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}var ra=(0,y.Z)((function t(e,n,i,r,a,o,s,u,l){(0,p.Z)(this,t),this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=l})),aa=function(){function t(e,n){(0,p.Z)(this,t),this.projectId=e,this.database=n||"(default)"}return(0,y.Z)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}(),oa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ea(t)?4:wa(t)?9007199254740991:10:Xi()}function ua(t,e){if(t===e)return!0;var n=sa(t);if(n!==sa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Yr(t.timestampValue),i=Yr(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ta(t.bytesValue).isEqual(ta(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return $r(t.geoPointValue.latitude)===$r(e.geoPointValue.latitude)&&$r(t.geoPointValue.longitude)===$r(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return $r(t.integerValue)===$r(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=$r(t.doubleValue),i=$r(e.doubleValue);return n===i?Dr(n)===Dr(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return dr(t.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:return function(t,e){var n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Vr(n)!==Vr(i))return!1;for(var r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!ua(n[r],i[r])))return!1;return!0}(t,e);default:return Xi()}}function la(t,e){return void 0!==(t.values||[]).find((function(t){return ua(t,e)}))}function ca(t,e){if(t===e)return 0;var n=sa(t),i=sa(e);if(n!==i)return vr(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=$r(t.integerValue||t.doubleValue),i=$r(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ha(t.timestampValue,e.timestampValue);case 4:return ha(ia(t),ia(e));case 5:return vr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ta(t),i=ta(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),i=e.split("/"),r=0;r<n.length&&r<i.length;r++){var a=vr(n[r],i[r]);if(0!==a)return a}return vr(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=vr($r(t.latitude),$r(e.latitude));return 0!==n?n:vr($r(t.longitude),$r(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],i=e.values||[],r=0;r<n.length&&r<i.length;++r){var a=ca(n[r],i[r]);if(a)return a}return vr(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===oa.mapValue&&e===oa.mapValue)return 0;if(t===oa.mapValue)return 1;if(e===oa.mapValue)return-1;var n=t.fields||{},i=Object.keys(n),r=e.fields||{},a=Object.keys(r);i.sort(),a.sort();for(var o=0;o<i.length&&o<a.length;++o){var s=vr(i[o],a[o]);if(0!==s)return s;var u=ca(n[i[o]],r[a[o]]);if(0!==u)return u}return vr(i.length,a.length)}(t.mapValue,e.mapValue);default:throw Xi()}}function ha(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return vr(t,e);var n=Yr(t),i=Yr(e),r=vr(n.seconds,i.seconds);return 0!==r?r:vr(n.nanos,i.nanos)}function fa(t){return va(t)}function va(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Yr(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return ta(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return wr.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){var e,n="[",i=!0,r=(0,l.Z)(t.values||[]);try{for(r.s();!(e=r.n()).done;){var a=e.value;i?i=!1:n+=",",n+=va(a)}}catch(o){r.e(o)}finally{r.f()}return n+"]"}(t.arrayValue):"mapValue"in t?function(t){var e,n=Object.keys(t.fields||{}).sort(),i="{",r=!0,a=(0,l.Z)(n);try{for(a.s();!(e=a.n()).done;){var o=e.value;r?r=!1:i+=",",i+="".concat(o,":").concat(va(t.fields[o]))}}catch(s){a.e(s)}finally{a.f()}return i+"}"}(t.mapValue):Xi()}function da(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function pa(t){return!!t&&"integerValue"in t}function ya(t){return!!t&&"arrayValue"in t}function ma(t){return!!t&&"nullValue"in t}function ga(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ka(t){return!!t&&"mapValue"in t}function ba(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Br(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ba(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},i=0;i<(t.arrayValue.values||[]).length;++i)n.arrayValue.values[i]=ba(t.arrayValue.values[i]);return n}return Object.assign({},t)}function wa(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}var _a=function(){function t(e){(0,p.Z)(this,t),this.value=e}return(0,y.Z)(t,[{key:"field",value:function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ka(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null}},{key:"set",value:function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ba(e)}},{key:"setAll",value:function(t){var e=this,n=br.emptyPath(),i={},r=[];t.forEach((function(t,a){if(!n.isImmediateParentOf(a)){var o=e.getFieldsMap(n);e.applyChanges(o,i,r),i={},r=[],n=a.popLast()}t?i[a.lastSegment()]=ba(t):r.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,i,r)}},{key:"delete",value:function(t){var e=this.field(t.popLast());ka(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}},{key:"isEqual",value:function(t){return ua(this.value,t.value)}},{key:"getFieldsMap",value:function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var i=e.mapValue.fields[t.get(n)];ka(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}},{key:"applyChanges",value:function(t,e,n){Br(e,(function(e,n){return t[e]=n}));var i,r=(0,l.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;delete t[a]}}catch(o){r.e(o)}finally{r.f()}}},{key:"clone",value:function(){return new t(ba(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function Ea(t){var e=[];return Br(t.fields,(function(t,n){var i=new br([t]);if(ka(n)){var r=Ea(n.mapValue).fields;if(0===r.length)e.push(i);else{var a,o=(0,l.Z)(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;e.push(i.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else e.push(i)})),new Gr(e)}var Sa=function(){function t(e,n,i,r,a,o,s){(0,p.Z)(this,t),this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=o,this.documentState=s}return(0,y.Z)(t,[{key:"convertToFoundDocument",value:function(t,e){return!this.createTime.isEqual(yr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}},{key:"convertToNoDocument",value:function(t){return this.version=t,this.documentType=2,this.data=_a.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(t){return this.version=t,this.documentType=3,this.data=_a.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=yr.min(),this}},{key:"setReadTime",value:function(t){return this.readTime=t,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,yr.min(),yr.min(),yr.min(),_a.empty(),0)}},{key:"newFoundDocument",value:function(e,n,i,r){return new t(e,1,n,yr.min(),i,r,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,yr.min(),yr.min(),_a.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,yr.min(),yr.min(),_a.empty(),2)}}]),t}(),Ca=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.position=e,this.inclusive=n}));function Ta(t,e,n){for(var i=0,r=0;r<t.position.length;r++){var a=e[r],o=t.position[r];if(i=a.field.isKeyField()?wr.comparator(wr.fromName(o.referenceValue),n.key):ca(o,n.data.field(a.field)),"desc"===a.dir&&(i*=-1),0!==i)break}return i}function xa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ua(t.position[n],e.position[n]))return!1;return!0}var Za=(0,y.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,p.Z)(this,t),this.field=e,this.dir=n}));function Aa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Oa=(0,y.Z)((function t(){(0,p.Z)(this,t)})),Ma=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r){var a;return(0,p.Z)(this,n),(a=e.call(this)).field=t,a.op=i,a.value=r,a}return(0,y.Z)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(ca(e,this.value)):null!==e&&sa(this.value)===sa(e)&&this.matchesComparison(ca(e,this.value))}},{key:"matchesComparison",value:function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Xi()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new Ua(t,e,i):"array-contains"===e?new ja(t,i):"in"===e?new qa(t,i):"not-in"===e?new Wa(t,i):"array-contains-any"===e?new Ha(t,i):new n(t,e,i)}},{key:"createKeyFieldInFilter",value:function(t,e,n){return"in"===e?new Va(t,n):new Ba(t,n)}}]),n}(Oa),La=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this)).filters=t,r.op=i,r.ce=null,r}return(0,y.Z)(n,[{key:"matches",value:function(t){return Ia(this)?void 0===this.filters.find((function(e){return!e.matches(t)})):void 0!==this.filters.find((function(e){return e.matches(t)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(t,e){return t.concat(e.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(t,e){return new n(t,e)}}]),n}(Oa);function Ia(t){return"and"===t.op}function Na(t){return Da(t)&&Ia(t)}function Da(t){var e,n=(0,l.Z)(t.filters);try{for(n.s();!(e=n.n()).done;){if(e.value instanceof La)return!1}}catch(i){n.e(i)}finally{n.f()}return!0}function Ra(t){if(t instanceof Ma)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(Na(t))return t.filters.map((function(t){return Ra(t)})).join(",");var e=t.filters.map((function(t){return Ra(t)})).join(",");return"".concat(t.op,"(").concat(e,")")}function Pa(t,e){return t instanceof Ma?function(t,e){return e instanceof Ma&&t.op===e.op&&t.field.isEqual(e.field)&&ua(t.value,e.value)}(t,e):t instanceof La?function(t,e){return e instanceof La&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce((function(t,n,i){return t&&Pa(n,e.filters[i])}),!0)}(t,e):void Xi()}function Fa(t){return t instanceof Ma?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(fa(t.value))}(t):t instanceof La?function(t){return t.op.toString()+" {"+t.getFilters().map(Fa).join(" ,")+"}"}(t):"Filter"}var Ua=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r){var a;return(0,p.Z)(this,n),(a=e.call(this,t,i,r)).key=wr.fromName(r.referenceValue),a}return(0,y.Z)(n,[{key:"matches",value:function(t){var e=wr.comparator(t.key,this.key);return this.matchesComparison(e)}}]),n}(Ma),Va=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this,t,"in",i)).keys=za("in",i),r}return(0,y.Z)(n,[{key:"matches",value:function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(Ma),Ba=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this,t,"not-in",i)).keys=za("not-in",i),r}return(0,y.Z)(n,[{key:"matches",value:function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(Ma);function za(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return wr.fromName(t.referenceValue)}))}var ja=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){return(0,p.Z)(this,n),e.call(this,t,"array-contains",i)}return(0,y.Z)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return ya(e)&&la(e.arrayValue,this.value)}}]),n}(Ma),qa=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){return(0,p.Z)(this,n),e.call(this,t,"in",i)}return(0,y.Z)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return null!==e&&la(this.value.arrayValue,e)}}]),n}(Ma),Wa=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){return(0,p.Z)(this,n),e.call(this,t,"not-in",i)}return(0,y.Z)(n,[{key:"matches",value:function(t){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!la(this.value.arrayValue,e)}}]),n}(Ma),Ha=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){return(0,p.Z)(this,n),e.call(this,t,"array-contains-any",i)}return(0,y.Z)(n,[{key:"matches",value:function(t){var e=this,n=t.data.field(this.field);return!(!ya(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return la(e.value.arrayValue,t)}))}}]),n}(Ma),Ka=(0,y.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,p.Z)(this,t),this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=o,this.endAt=s,this.le=null}));function Ga(t){return new Ka(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Qa(t){var e=$i(t);if(null===e.le){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return Ra(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Nr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((function(t){return fa(t)})).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((function(t){return fa(t)})).join(",")),e.le=n}return e.le}function Ja(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Aa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var i=0;i<t.filters.length;i++)if(!Pa(t.filters[i],e.filters[i]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xa(t.startAt,e.startAt)&&xa(t.endAt,e.endAt)}function Xa(t){return wr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ya=(0,y.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,p.Z)(this,t),this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.he=null,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function $a(t,e,n,i,r,a,o,s){return new Ya(t,e,n,i,r,a,o,s)}function to(t){return new Ya(t)}function eo(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function no(t){return null!==t.collectionGroup}function io(t){var e=$i(t);if(null===e.he){e.he=[];var n,i=new Set,r=(0,l.Z)(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.he.push(a),i.add(a.field.canonicalString())}}catch(u){r.e(u)}finally{r.f()}var o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",s=function(t){var e=new Hr(br.comparator);return t.filters.forEach((function(t){t.getFlattenedFilters().forEach((function(t){t.isInequality()&&(e=e.add(t.field))}))})),e}(e);s.forEach((function(t){i.has(t.canonicalString())||t.isKeyField()||e.he.push(new Za(t,o))})),i.has(br.keyField().canonicalString())||e.he.push(new Za(br.keyField(),o))}return e.he}function ro(t){var e=$i(t);return e.Pe||(e.Pe=ao(e,io(t))),e.Pe}function ao(t,e){if("F"===t.limitType)return Ga(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);e=e.map((function(t){var e="desc"===t.dir?"asc":"desc";return new Za(t.field,e)}));var n=t.endAt?new Ca(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ca(t.startAt.position,t.startAt.inclusive):null;return Ga(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}function oo(t,e){var n=t.filters.concat([e]);return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function so(t,e,n){return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uo(t,e){return Ja(ro(t),ro(e))&&t.limitType===e.limitType}function lo(t){return"".concat(Qa(ro(t)),"|lt:").concat(t.limitType)}function co(t){return"Query(target=".concat(function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((function(t){return Fa(t)})).join(", "),"]")),Nr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((function(t){return function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t)})).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((function(t){return fa(t)})).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((function(t){return fa(t)})).join(",")),"Target(".concat(e,")")}(ro(t)),"; limitType=").concat(t.limitType,")")}function ho(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):wr.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){var n,i=(0,l.Z)(io(t));try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!r.field.isKeyField()&&null===e.data.field(r.field))return!1}}catch(a){i.e(a)}finally{i.f()}return!0}(t,e)&&function(t,e){var n,i=(0,l.Z)(t.filters);try{for(i.s();!(n=i.n()).done;){if(!n.value.matches(e))return!1}}catch(r){i.e(r)}finally{i.f()}return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){var i=Ta(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,io(t),e))&&!(t.endAt&&!function(t,e,n){var i=Ta(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,io(t),e))}(t,e)}function fo(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vo(t){return function(e,n){var i,r=!1,a=(0,l.Z)(io(t));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=po(o,e,n);if(0!==s)return s;r=r||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function po(t,e,n){var i=t.field.isKeyField()?wr.comparator(e.key,n.key):function(t,e,n){var i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?ca(i,r):Xi()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Xi()}}var yo=function(){function t(e,n){(0,p.Z)(this,t),this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,y.Z)(t,[{key:"get",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n){var i,r=(0,l.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=(0,s.Z)(i.value,2),o=a[0],u=a[1];if(this.equalsFn(o,t))return u}}catch(c){r.e(c)}finally{r.f()}}}},{key:"has",value:function(t){return void 0!==this.get(t)}},{key:"set",value:function(t,e){var n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(var r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}},{key:"delete",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(t){Br(this.inner,(function(e,n){var i,r=(0,l.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=(0,s.Z)(i.value,2),o=a[0],u=a[1];t(o,u)}}catch(c){r.e(c)}finally{r.f()}}))}},{key:"isEmpty",value:function(){return zr(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),mo=new jr(wr.comparator);function go(){return mo}var ko=new jr(wr.comparator);function bo(){for(var t=ko,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];t=t.insert(o.key,o)}return t}function wo(t){var e=ko;return t.forEach((function(t,n){return e=e.insert(t,n.overlayedDocument)})),e}function _o(){return So()}function Eo(){return So()}function So(){return new yo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)}))}var Co=new jr(wr.comparator),To=new Hr(wr.comparator);function xo(){for(var t=To,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];t=t.add(o)}return t}var Zo=new Hr(vr);function Ao(){return Zo}function Oo(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dr(e)?"-0":e}}function Mo(t){return{integerValue:""+t}}function Lo(t,e){return Rr(e)?Mo(e):Oo(t,e)}var Io=(0,y.Z)((function t(){(0,p.Z)(this,t),this._=void 0}));function No(t,e,n){return t instanceof Po?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&ea(e)&&(e=na(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Fo?Uo(t,e):t instanceof Vo?Bo(t,e):function(t,e){var n=Ro(t,e),i=jo(n)+jo(t.Te);return pa(n)&&pa(t.Te)?Mo(i):Oo(t.serializer,i)}(t,e)}function Do(t,e,n){return t instanceof Fo?Uo(t,e):t instanceof Vo?Bo(t,e):n}function Ro(t,e){return t instanceof zo?function(t){return pa(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}var Po=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n)}(Io),Fo=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t){var i;return(0,p.Z)(this,n),(i=e.call(this)).elements=t,i}return(0,y.Z)(n)}(Io);function Uo(t,e){var n,i=qo(e),r=(0,l.Z)(t.elements);try{var a=function(){var t=n.value;i.some((function(e){return ua(e,t)}))||i.push(t)};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return{arrayValue:{values:i}}}var Vo=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t){var i;return(0,p.Z)(this,n),(i=e.call(this)).elements=t,i}return(0,y.Z)(n)}(Io);function Bo(t,e){var n,i=qo(e),r=(0,l.Z)(t.elements);try{var a=function(){var t=n.value;i=i.filter((function(e){return!ua(e,t)}))};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return{arrayValue:{values:i}}}var zo=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this)).serializer=t,r.Te=i,r}return(0,y.Z)(n)}(Io);function jo(t){return $r(t.integerValue||t.doubleValue)}function qo(t){return ya(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Wo=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.field=e,this.transform=n}));var Ho=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.version=e,this.transformResults=n})),Ko=function(){function t(e,n){(0,p.Z)(this,t),this.updateTime=e,this.exists=n}return(0,y.Z)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function Go(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Qo=(0,y.Z)((function t(){(0,p.Z)(this,t)}));function Jo(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new us(t.key,Ko.none()):new es(t.key,t.data,Ko.none());var n,i=t.data,r=_a.empty(),a=new Hr(br.comparator),o=(0,l.Z)(e.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=i.field(s);null===u&&s.length>1&&(s=s.popLast(),u=i.field(s)),null===u?r.delete(s):r.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new ns(t.key,r,new Gr(a.toArray()),Ko.none())}function Xo(t,e,n){t instanceof es?function(t,e,n){var i=t.value.clone(),r=rs(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(t,e,n){if(Go(t.precondition,e)){var i=rs(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(is(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Yo(t,e,n,i){return t instanceof es?function(t,e,n,i){if(!Go(t.precondition,e))return n;var r=t.value.clone(),a=as(t.fieldTransforms,i,e);return r.setAll(a),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof ns?function(t,e,n,i){if(!Go(t.precondition,e))return n;var r=as(t.fieldTransforms,i,e),a=e.data;return a.setAll(is(t)),a.setAll(r),e.convertToFoundDocument(e.version,a).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((function(t){return t.field})))}(t,e,n,i):function(t,e,n){return Go(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function $o(t,e){var n,i=null,r=(0,l.Z)(t.fieldTransforms);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=e.data.field(a.field),s=Ro(a.transform,o||null);null!=s&&(null===i&&(i=_a.empty()),i.set(a.field,s))}}catch(u){r.e(u)}finally{r.f()}return i||null}function ts(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&dr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Fo&&e instanceof Fo||t instanceof Vo&&e instanceof Vo?dr(t.elements,e.elements,ua):t instanceof zo&&e instanceof zo?ua(t.Te,e.Te):t instanceof Po&&e instanceof Po}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var es=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,p.Z)(this,n),(a=e.call(this)).key=t,a.value=i,a.precondition=r,a.fieldTransforms=o,a.type=0,a}return(0,y.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Qo),ns=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,p.Z)(this,n),(o=e.call(this)).key=t,o.data=i,o.fieldMask=r,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return(0,y.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Qo);function is(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var i=t.data.field(n);e.set(n,i)}})),e}function rs(t,e,n){var i=new Map;Yi(t.length===n.length);for(var r=0;r<n.length;r++){var a=t[r],o=a.transform,s=e.data.field(a.field);i.set(a.field,Do(o,s,n[r]))}return i}function as(t,e,n){var i,r=new Map,a=(0,l.Z)(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.transform,u=n.data.field(o.field);r.set(o.field,No(s,u,e))}}catch(c){a.e(c)}finally{a.f()}return r}var os,ss,us=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this)).key=t,r.precondition=i,r.type=2,r.fieldTransforms=[],r}return(0,y.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Qo),ls=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this)).key=t,r.precondition=i,r.type=3,r.fieldTransforms=[],r}return(0,y.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Qo),cs=function(){function t(e,n,i,r){(0,p.Z)(this,t),this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}return(0,y.Z)(t,[{key:"applyToRemoteDocument",value:function(t,e){for(var n=e.mutationResults,i=0;i<this.mutations.length;i++){var r=this.mutations[i];r.key.isEqual(t.key)&&Xo(r,t,n[i])}}},{key:"applyToLocalView",value:function(t,e){var n,i=(0,l.Z)(this.baseMutations);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.key.isEqual(t.key)&&(e=Yo(r,t,e,this.localWriteTime))}}catch(u){i.e(u)}finally{i.f()}var a,o=(0,l.Z)(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(t.key)&&(e=Yo(s,t,e,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return e}},{key:"applyToLocalDocumentSet",value:function(t,e){var n=this,i=Eo();return this.mutations.forEach((function(r){var a=t.get(r.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Jo(o,s=e.has(r.key)?null:s);null!==u&&i.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(yr.min())})),i}},{key:"keys",value:function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),xo())}},{key:"isEqual",value:function(t){return this.batchId===t.batchId&&dr(this.mutations,t.mutations,(function(t,e){return ts(t,e)}))&&dr(this.baseMutations,t.baseMutations,(function(t,e){return ts(t,e)}))}}]),t}(),hs=function(){function t(e,n,i,r){(0,p.Z)(this,t),this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}return(0,y.Z)(t,null,[{key:"from",value:function(e,n,i){Yi(e.mutations.length===i.length);for(var r=Co,a=e.mutations,o=0;o<a.length;o++)r=r.insert(a[o].key,i[o].version);return new t(e,n,i,r)}}]),t}(),fs=function(){function t(e,n){(0,p.Z)(this,t),this.largestBatchId=e,this.mutation=n}return(0,y.Z)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(t){return null!==t&&this.mutation===t.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),vs=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.count=e,this.unchangedNames=n}));function ds(t){switch(t){default:return Xi();case tr.CANCELLED:case tr.UNKNOWN:case tr.DEADLINE_EXCEEDED:case tr.RESOURCE_EXHAUSTED:case tr.INTERNAL:case tr.UNAVAILABLE:case tr.UNAUTHENTICATED:return!1;case tr.INVALID_ARGUMENT:case tr.NOT_FOUND:case tr.ALREADY_EXISTS:case tr.PERMISSION_DENIED:case tr.FAILED_PRECONDITION:case tr.ABORTED:case tr.OUT_OF_RANGE:case tr.UNIMPLEMENTED:case tr.DATA_LOSS:return!0}}function ps(t){if(void 0===t)return Gi("GRPC error has no .code"),tr.UNKNOWN;switch(t){case os.OK:return tr.OK;case os.CANCELLED:return tr.CANCELLED;case os.UNKNOWN:return tr.UNKNOWN;case os.DEADLINE_EXCEEDED:return tr.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return tr.RESOURCE_EXHAUSTED;case os.INTERNAL:return tr.INTERNAL;case os.UNAVAILABLE:return tr.UNAVAILABLE;case os.UNAUTHENTICATED:return tr.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return tr.INVALID_ARGUMENT;case os.NOT_FOUND:return tr.NOT_FOUND;case os.ALREADY_EXISTS:return tr.ALREADY_EXISTS;case os.PERMISSION_DENIED:return tr.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return tr.FAILED_PRECONDITION;case os.ABORTED:return tr.ABORTED;case os.OUT_OF_RANGE:return tr.OUT_OF_RANGE;case os.UNIMPLEMENTED:return tr.UNIMPLEMENTED;case os.DATA_LOSS:return tr.DATA_LOSS;default:return Xi()}}(ss=os||(os={}))[ss.OK=0]="OK",ss[ss.CANCELLED=1]="CANCELLED",ss[ss.UNKNOWN=2]="UNKNOWN",ss[ss.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ss[ss.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ss[ss.NOT_FOUND=5]="NOT_FOUND",ss[ss.ALREADY_EXISTS=6]="ALREADY_EXISTS",ss[ss.PERMISSION_DENIED=7]="PERMISSION_DENIED",ss[ss.UNAUTHENTICATED=16]="UNAUTHENTICATED",ss[ss.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ss[ss.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ss[ss.ABORTED=10]="ABORTED",ss[ss.OUT_OF_RANGE=11]="OUT_OF_RANGE",ss[ss.UNIMPLEMENTED=12]="UNIMPLEMENTED",ss[ss.INTERNAL=13]="INTERNAL",ss[ss.UNAVAILABLE=14]="UNAVAILABLE",ss[ss.DATA_LOSS=15]="DATA_LOSS";var ys=null;function ms(){return new TextEncoder}var gs=new Bi([4294967295,4294967295],0);function ks(t){var e=ms().encode(t),n=new Vi;return n.update(e),new Uint8Array(n.digest())}function bs(t){var e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Bi([n,i],0),new Bi([r,a],0)]}var ws=function(){function t(e,n,i){if((0,p.Z)(this,t),this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new _s("Invalid padding: ".concat(n));if(i<0)throw new _s("Invalid hash count: ".concat(i));if(e.length>0&&0===this.hashCount)throw new _s("Invalid hash count: ".concat(i));if(0===e.length&&0!==n)throw new _s("Invalid padding when bitmap length is 0: ".concat(n));this.Ee=8*e.length-n,this.de=Bi.fromNumber(this.Ee)}return(0,y.Z)(t,[{key:"Ae",value:function(t,e,n){var i=t.add(e.multiply(Bi.fromNumber(n)));return 1===i.compare(gs)&&(i=new Bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}},{key:"Re",value:function(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}},{key:"mightContain",value:function(t){if(0===this.Ee)return!1;for(var e=bs(ks(t)),n=(0,s.Z)(e,2),i=n[0],r=n[1],a=0;a<this.hashCount;a++){var o=this.Ae(i,r,a);if(!this.Re(o))return!1}return!0}},{key:"insert",value:function(t){if(0!==this.Ee)for(var e=bs(ks(t)),n=(0,s.Z)(e,2),i=n[0],r=n[1],a=0;a<this.hashCount;a++){var o=this.Ae(i,r,a);this.Ve(o)}}},{key:"Ve",value:function(t){var e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}],[{key:"create",value:function(e,n,i){var r=e%8==0?0:8-e%8,a=new t(new Uint8Array(Math.ceil(e/8)),r,n);return i.forEach((function(t){return a.insert(t)})),a}}]),t}(),_s=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){var t;return(0,p.Z)(this,n),(t=e.apply(this,arguments)).name="BloomFilterError",t}return(0,y.Z)(n)}((0,u.Z)(Error)),Es=function(){function t(e,n,i,r,a){(0,p.Z)(this,t),this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}return(0,y.Z)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n,i){var r=new Map;return r.set(e,Ss.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(yr.min(),r,new jr(vr),go(),xo())}}]),t}(),Ss=function(){function t(e,n,i,r,a){(0,p.Z)(this,t),this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}return(0,y.Z)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n,i){return new t(i,n,xo(),xo(),xo())}}]),t}(),Cs=(0,y.Z)((function t(e,n,i,r){(0,p.Z)(this,t),this.me=e,this.removedTargetIds=n,this.key=i,this.fe=r})),Ts=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.targetId=e,this.ge=n})),xs=(0,y.Z)((function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,p.Z)(this,t),this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r})),Zs=function(){function t(){(0,p.Z)(this,t),this.pe=0,this.ye=Ms(),this.we=Jr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}return(0,y.Z)(t,[{key:"current",get:function(){return this.Se}},{key:"resumeToken",get:function(){return this.we}},{key:"De",get:function(){return 0!==this.pe}},{key:"Ce",get:function(){return this.be}},{key:"ve",value:function(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}},{key:"Fe",value:function(){var t=xo(),e=xo(),n=xo();return this.ye.forEach((function(i,r){switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Xi()}})),new Ss(this.we,this.Se,t,e,n)}},{key:"Me",value:function(){this.be=!1,this.ye=Ms()}},{key:"xe",value:function(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}},{key:"Oe",value:function(t){this.be=!0,this.ye=this.ye.remove(t)}},{key:"Ne",value:function(){this.pe+=1}},{key:"Be",value:function(){this.pe-=1}},{key:"Le",value:function(){this.be=!0,this.Se=!0}}]),t}(),As=function(){function t(e){(0,p.Z)(this,t),this.ke=e,this.qe=new Map,this.Qe=go(),this.Ke=Os(),this.$e=new jr(vr)}return(0,y.Z)(t,[{key:"Ue",value:function(t){var e,n=(0,l.Z)(t.me);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.fe&&t.fe.isFoundDocument()?this.We(i,t.fe):this.Ge(i,t.key,t.fe)}}catch(s){n.e(s)}finally{n.f()}var r,a=(0,l.Z)(t.removedTargetIds);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.Ge(o,t.key,t.fe)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ze",value:function(t){var e=this;this.forEachTarget(t,(function(n){var i=e.je(n);switch(t.state){case 0:e.He(n)&&i.ve(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.ve(t.resumeToken);break;case 2:i.Be(),i.De||e.removeTarget(n);break;case 3:e.He(n)&&(i.Le(),i.ve(t.resumeToken));break;case 4:e.He(n)&&(e.Je(n),i.ve(t.resumeToken));break;default:Xi()}}))}},{key:"forEachTarget",value:function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((function(t,i){n.He(i)&&e(i)}))}},{key:"Ye",value:function(t){var e=t.targetId,n=t.ge.count,i=this.Ze(e);if(i){var r=i.target;if(Xa(r))if(0===n){var a=new wr(r.path);this.Ge(e,a,Sa.newNoDocument(a,yr.min()))}else Yi(1===n);else{var o=this.Xe(e);if(o!==n){var s=this.et(t),u=s?this.tt(s,t,o):1;if(0!==u){this.Je(e);var l=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.$e=this.$e.insert(e,l)}null==ys||ys.nt(function(t,e,n,i,r){var a,o,s,u,l,c,h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},f=e.unchangedNames;return f&&(h.bloomFilter={applied:0===r,hashCount:null!==(a=null==f?void 0:f.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(u=null===(s=null===(o=null==f?void 0:f.bits)||void 0===o?void 0:o.bitmap)||void 0===s?void 0:s.length)&&void 0!==u?u:0,padding:null!==(c=null===(l=null==f?void 0:f.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:function(t){var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),h}(o,t.ge,this.ke.rt(),s,u))}}}}},{key:"et",value:function(t){var e=t.ge.unchangedNames;if(!e||!e.bits)return null;var n,i,r=e.bits,a=r.bitmap,o=void 0===a?"":a,s=r.padding,u=void 0===s?0:s,l=e.hashCount,c=void 0===l?0:l;try{n=ta(o).toUint8Array()}catch(t){if(t instanceof Qr)return Qi("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{i=new ws(n,u,c)}catch(t){return Qi(t instanceof _s?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===i.Ee?null:i}},{key:"tt",value:function(t,e,n){return e.ge.count===n-this.it(t,e.targetId)?0:2}},{key:"it",value:function(t,e){var n=this,i=this.ke.getRemoteKeysForTarget(e),r=0;return i.forEach((function(i){var a=n.ke.rt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(i.path.canonicalString());t.mightContain(o)||(n.Ge(e,i,null),r++)})),r}},{key:"st",value:function(t){var e=this,n=new Map;this.qe.forEach((function(i,r){var a=e.Ze(r);if(a){if(i.current&&Xa(a.target)){var o=new wr(a.target.path);null!==e.Qe.get(o)||e.ot(r,o)||e.Ge(r,o,Sa.newNoDocument(o,t))}i.Ce&&(n.set(r,i.Fe()),i.Me())}}));var i=xo();this.Ke.forEach((function(t,n){var r=!0;n.forEachWhile((function(t){var n=e.Ze(t);return!n||"TargetPurposeLimboResolution"===n.purpose||(r=!1,!1)})),r&&(i=i.add(t))})),this.Qe.forEach((function(e,n){return n.setReadTime(t)}));var r=new Es(t,n,this.$e,this.Qe,i);return this.Qe=go(),this.Ke=Os(),this.$e=new jr(vr),r}},{key:"We",value:function(t,e){if(this.He(t)){var n=this.ot(t,e.key)?2:0;this.je(t).xe(e.key,n),this.Qe=this.Qe.insert(e.key,e),this.Ke=this.Ke.insert(e.key,this._t(e.key).add(t))}}},{key:"Ge",value:function(t,e,n){if(this.He(t)){var i=this.je(t);this.ot(t,e)?i.xe(e,1):i.Oe(e),this.Ke=this.Ke.insert(e,this._t(e).delete(t)),n&&(this.Qe=this.Qe.insert(e,n))}}},{key:"removeTarget",value:function(t){this.qe.delete(t)}},{key:"Xe",value:function(t){var e=this.je(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}},{key:"Ne",value:function(t){this.je(t).Ne()}},{key:"je",value:function(t){var e=this.qe.get(t);return e||(e=new Zs,this.qe.set(t,e)),e}},{key:"_t",value:function(t){var e=this.Ke.get(t);return e||(e=new Hr(vr),this.Ke=this.Ke.insert(t,e)),e}},{key:"He",value:function(t){var e=null!==this.Ze(t);return e||Ki("WatchChangeAggregator","Detected inactive target",t),e}},{key:"Ze",value:function(t){var e=this.qe.get(t);return e&&e.De?null:this.ke.ut(t)}},{key:"Je",value:function(t){var e=this;this.qe.set(t,new Zs),this.ke.getRemoteKeysForTarget(t).forEach((function(n){e.Ge(t,n,null)}))}},{key:"ot",value:function(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}]),t}();function Os(){return new jr(wr.comparator)}function Ms(){return new jr(wr.comparator)}var Ls={asc:"ASCENDING",desc:"DESCENDING"},Is={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ns={and:"AND",or:"OR"},Ds=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.databaseId=e,this.useProto3Json=n}));function Rs(t,e){return t.useProto3Json||Nr(e)?e:{value:e}}function Ps(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fs(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Us(t,e){return Ps(t,e.toTimestamp())}function Vs(t){return Yi(!!t),yr.fromTimestamp(function(t){var e=Yr(t);return new pr(e.seconds,e.nanos)}(t))}function Bs(t,e){return function(t){return new gr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function zs(t){var e=gr.fromString(t);return Yi(uu(e)),e}function js(t,e){return Bs(t.databaseId,e.path)}function qs(t,e){var n=zs(e);if(n.get(1)!==t.databaseId.projectId)throw new er(tr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new er(tr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new wr(Gs(n))}function Ws(t,e){return Bs(t.databaseId,e)}function Hs(t){var e=zs(t);return 4===e.length?gr.emptyPath():Gs(e)}function Ks(t){return new gr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gs(t){return Yi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Qs(t,e,n){return{name:js(t,e),fields:n.value.mapValue.fields}}function Js(t,e){var n;if(e instanceof es)n={update:Qs(t,e.key,e.value)};else if(e instanceof us)n={delete:js(t,e.key)};else if(e instanceof ns)n={update:Qs(t,e.key,e.data),updateMask:su(e.fieldMask)};else{if(!(e instanceof ls))return Xi();n={verify:js(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Po)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zo)return{fieldPath:e.field.canonicalString(),increment:n.Te};throw Xi()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Us(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Xi()}(t,e.precondition)),n}function Xs(t,e){return{documents:[Ws(t,e.path)]}}function Ys(t,e){var n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=Ws(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ws(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);var r=function(t){if(0!==t.length)return ou(La.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);var a=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ru(t.field),direction:eu(t.dir)}}(t)}))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Rs(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function $s(t){var e=Hs(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Yi(1===i);var a=n.from[0];a.allDescendants?r=a.collectionId:e=e.child(a.collectionId)}var o=[];n.where&&(o=function(t){var e=tu(t);return e instanceof La&&Na(e)?e.getFilters():[e]}(n.where));var s=[];n.orderBy&&(s=function(t){return t.map((function(t){return function(t){return new Za(au(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}))}(n.orderBy));var u=null;n.limit&&(u=function(t){var e;return Nr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var l=null;n.startAt&&(l=function(t){var e=!!t.before,n=t.values||[];return new Ca(n,e)}(n.startAt));var c=null;return n.endAt&&(c=function(t){var e=!t.before,n=t.values||[];return new Ca(n,e)}(n.endAt)),$a(e,r,s,o,u,"F",l,c)}function tu(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=au(t.unaryFilter.field);return Ma.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=au(t.unaryFilter.field);return Ma.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=au(t.unaryFilter.field);return Ma.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var r=au(t.unaryFilter.field);return Ma.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Xi()}}(t):void 0!==t.fieldFilter?function(t){return Ma.create(au(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xi()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return La.create(t.compositeFilter.filters.map((function(t){return tu(t)})),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Xi()}}(t.compositeFilter.op))}(t):Xi()}function eu(t){return Ls[t]}function nu(t){return Is[t]}function iu(t){return Ns[t]}function ru(t){return{fieldPath:t.canonicalString()}}function au(t){return br.fromServerFormat(t.fieldPath)}function ou(t){return t instanceof Ma?function(t){if("=="===t.op){if(ga(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NAN"}};if(ma(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ga(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NOT_NAN"}};if(ma(t.value))return{unaryFilter:{field:ru(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ru(t.field),op:nu(t.op),value:t.value}}}(t):t instanceof La?function(t){var e=t.getFilters().map((function(t){return ou(t)}));return 1===e.length?e[0]:{compositeFilter:{op:iu(t.op),filters:e}}}(t):Xi()}function su(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function uu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var lu=function(){function t(e,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yr.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:yr.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Jr.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,p.Z)(this,t),this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return(0,y.Z)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}},{key:"withExpectedCount",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}]),t}(),cu=(0,y.Z)((function t(e){(0,p.Z)(this,t),this.ct=e}));function hu(t){var e=$s({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?so(e,e.limit,"L"):e}var fu=function(){function t(){(0,p.Z)(this,t)}return(0,y.Z)(t,[{key:"Pt",value:function(t,e){this.It(t,e),e.Tt()}},{key:"It",value:function(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt($r(t.integerValue));else if("doubleValue"in t){var n=$r(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Dr(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){var i=t.timestampValue;this.Et(e,20),"string"==typeof i?e.At(i):(e.At("".concat(i.seconds||"")),e.dt(i.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(ta(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){var r=t.geoPointValue;this.Et(e,45),e.dt(r.latitude||0),e.dt(r.longitude||0)}else"mapValue"in t?wa(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Xi()}},{key:"Rt",value:function(t,e){this.Et(e,25),this.St(t,e)}},{key:"St",value:function(t,e){e.At(t)}},{key:"yt",value:function(t,e){var n=t.fields||{};this.Et(e,55);for(var i=0,r=Object.keys(n);i<r.length;i++){var a=r[i];this.Rt(a,e),this.It(n[a],e)}}},{key:"wt",value:function(t,e){var n=t.values||[];this.Et(e,50);var i,r=(0,l.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.It(a,e)}}catch(o){r.e(o)}finally{r.f()}}},{key:"gt",value:function(t,e){var n=this;this.Et(e,37),wr.fromName(t).path.forEach((function(t){n.Et(e,60),n.St(t,e)}))}},{key:"Et",value:function(t,e){t.dt(e)}},{key:"Vt",value:function(t){t.dt(2)}}]),t}();fu.bt=new fu;var vu=function(){function t(){(0,p.Z)(this,t),this._n=new du}return(0,y.Z)(t,[{key:"addToCollectionParentIndex",value:function(t,e){return this._n.add(e),Mr.resolve()}},{key:"getCollectionParents",value:function(t,e){return Mr.resolve(this._n.getEntries(e))}},{key:"addFieldIndex",value:function(t,e){return Mr.resolve()}},{key:"deleteFieldIndex",value:function(t,e){return Mr.resolve()}},{key:"deleteAllFieldIndexes",value:function(t){return Mr.resolve()}},{key:"createTargetIndexes",value:function(t,e){return Mr.resolve()}},{key:"getDocumentsMatchingTarget",value:function(t,e){return Mr.resolve(null)}},{key:"getIndexType",value:function(t,e){return Mr.resolve(0)}},{key:"getFieldIndexes",value:function(t,e){return Mr.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(t){return Mr.resolve(null)}},{key:"getMinOffset",value:function(t,e){return Mr.resolve(Cr.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(t,e){return Mr.resolve(Cr.min())}},{key:"updateCollectionGroup",value:function(t,e,n){return Mr.resolve()}},{key:"updateIndexEntries",value:function(t,e){return Mr.resolve()}}]),t}(),du=function(){function t(){(0,p.Z)(this,t),this.index={}}return(0,y.Z)(t,[{key:"add",value:function(t){var e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Hr(gr.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}},{key:"has",value:function(t){var e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}},{key:"getEntries",value:function(t){return(this.index[t]||new Hr(gr.comparator)).toArray()}}]),t}();new Uint8Array(0);var pu=function(){function t(e,n,i){(0,p.Z)(this,t),this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}return(0,y.Z)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();pu.DEFAULT_COLLECTION_PERCENTILE=10,pu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pu.DEFAULT=new pu(41943040,pu.DEFAULT_COLLECTION_PERCENTILE,pu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pu.DISABLED=new pu(-1,0,0);var yu=function(){function t(e){(0,p.Z)(this,t),this.On=e}return(0,y.Z)(t,[{key:"next",value:function(){return this.On+=2,this.On}}],[{key:"Nn",value:function(){return new t(0)}},{key:"Bn",value:function(){return new t(-1)}}]),t}();var mu=function(){function t(){(0,p.Z)(this,t),this.changes=new yo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return(0,y.Z)(t,[{key:"addEntry",value:function(t){this.assertNotApplied(),this.changes.set(t.key,t)}},{key:"removeEntry",value:function(t,e){this.assertNotApplied(),this.changes.set(t,Sa.newInvalidDocument(t).setReadTime(e))}},{key:"getEntry",value:function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Mr.resolve(n):this.getFromCache(t,e)}},{key:"getEntries",value:function(t,e){return this.getAllFromCache(t,e)}},{key:"apply",value:function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}},{key:"assertNotApplied",value:function(){}}]),t}();var gu=(0,y.Z)((function t(e,n){(0,p.Z)(this,t),this.overlayedDocument=e,this.mutatedFields=n})),ku=function(){function t(e,n,i,r){(0,p.Z)(this,t),this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}return(0,y.Z)(t,[{key:"getDocument",value:function(t,e){var n=this,i=null;return this.documentOverlayCache.getOverlay(t,e).next((function(r){return i=r,n.remoteDocumentCache.getEntry(t,e)})).next((function(t){return null!==i&&Yo(i.mutation,t,Gr.empty(),pr.now()),t}))}},{key:"getDocuments",value:function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e,xo()).next((function(){return e}))}))}},{key:"getLocalViewOfDocuments",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xo(),r=_o();return this.populateOverlays(t,r,e).next((function(){return n.computeViews(t,e,r,i).next((function(t){var e=bo();return t.forEach((function(t,n){e=e.insert(t,n.overlayedDocument)})),e}))}))}},{key:"getOverlayedDocuments",value:function(t,e){var n=this,i=_o();return this.populateOverlays(t,i,e).next((function(){return n.computeViews(t,e,i,xo())}))}},{key:"populateOverlays",value:function(t,e,n){var i=[];return n.forEach((function(t){e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((function(t){t.forEach((function(t,n){e.set(t,n)}))}))}},{key:"computeViews",value:function(t,e,n,i){var r=go(),a=So(),o=So();return e.forEach((function(t,e){var o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof ns)?r=r.insert(e.key,e):void 0!==o?(a.set(e.key,o.mutation.getFieldMask()),Yo(o.mutation,e,o.mutation.getFieldMask(),pr.now())):a.set(e.key,Gr.empty())})),this.recalculateAndSaveOverlays(t,r).next((function(t){return t.forEach((function(t,e){return a.set(t,e)})),e.forEach((function(t,e){var n;return o.set(t,new gu(e,null!==(n=a.get(t))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(t,e){var n=this,i=So(),r=new jr((function(t,e){return t-e})),a=xo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){var n,a=(0,l.Z)(t);try{var o=function(){var t=n.value;t.keys().forEach((function(n){var a=e.get(n);if(null!==a){var o=i.get(n)||Gr.empty();o=t.applyToLocalView(a,o),i.set(n,o);var s=(r.get(t.batchId)||xo()).add(n);r=r.insert(t.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=r.getReverseIterator(),u=function(){var r=s.getNext(),u=r.key,l=r.value,c=Eo();l.forEach((function(t){if(!a.has(t)){var n=Jo(e.get(t),i.get(t));null!==n&&c.set(t,n),a=a.add(t)}})),o.push(n.documentOverlayCache.saveOverlays(t,u,c))};s.hasNext();)u();return Mr.waitFor(o)})).next((function(){return i}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.recalculateAndSaveOverlays(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(t,e,n,i){return function(t){return wr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):no(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}},{key:"getNextDocuments",value:function(t,e,n,i){var r=this;return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((function(a){var o=i-a.size>0?r.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-a.size):Mr.resolve(_o()),s=-1,u=a;return o.next((function(e){return Mr.forEach(e,(function(e,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(e)?Mr.resolve():r.remoteDocumentCache.getEntry(t,e).next((function(t){u=u.insert(e,t)}))})).next((function(){return r.populateOverlays(t,e,a)})).next((function(){return r.computeViews(t,u,e,xo())})).next((function(t){return{batchId:s,changes:wo(t)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(t,e){return this.getDocument(t,new wr(e)).next((function(t){var e=bo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(t,e,n,i){var r=this,a=e.collectionGroup,o=bo();return this.indexManager.getCollectionParents(t,a).next((function(s){return Mr.forEach(s,(function(s){var u=function(t,e){return new Ya(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(a));return r.getDocumentsMatchingCollectionQuery(t,u,n,i).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(t,e,n,i){var r,a=this;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((function(o){return r=o,a.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)})).next((function(t){r.forEach((function(e,n){var i=n.getKey();null===t.get(i)&&(t=t.insert(i,Sa.newInvalidDocument(i)))}));var n=bo();return t.forEach((function(t,i){var a=r.get(t);void 0!==a&&Yo(a.mutation,i,Gr.empty(),pr.now()),ho(e,i)&&(n=n.insert(t,i))})),n}))}}]),t}(),bu=function(){function t(e){(0,p.Z)(this,t),this.serializer=e,this.cr=new Map,this.lr=new Map}return(0,y.Z)(t,[{key:"getBundleMetadata",value:function(t,e){return Mr.resolve(this.cr.get(e))}},{key:"saveBundleMetadata",value:function(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Vs(t.createTime)}}(e)),Mr.resolve()}},{key:"getNamedQuery",value:function(t,e){return Mr.resolve(this.lr.get(e))}},{key:"saveNamedQuery",value:function(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:hu(t.bundledQuery),readTime:Vs(t.readTime)}}(e)),Mr.resolve()}}]),t}(),wu=function(){function t(){(0,p.Z)(this,t),this.overlays=new jr(wr.comparator),this.hr=new Map}return(0,y.Z)(t,[{key:"getOverlay",value:function(t,e){return Mr.resolve(this.overlays.get(e))}},{key:"getOverlays",value:function(t,e){var n=this,i=_o();return Mr.forEach(e,(function(e){return n.getOverlay(t,e).next((function(t){null!==t&&i.set(e,t)}))})).next((function(){return i}))}},{key:"saveOverlays",value:function(t,e,n){var i=this;return n.forEach((function(n,r){i.ht(t,e,r)})),Mr.resolve()}},{key:"removeOverlaysForBatchId",value:function(t,e,n){var i=this,r=this.hr.get(n);return void 0!==r&&(r.forEach((function(t){return i.overlays=i.overlays.remove(t)})),this.hr.delete(n)),Mr.resolve()}},{key:"getOverlaysForCollection",value:function(t,e,n){for(var i=_o(),r=e.length+1,a=new wr(e.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===r&&s.largestBatchId>n&&i.set(s.getKey(),s)}return Mr.resolve(i)}},{key:"getOverlaysForCollectionGroup",value:function(t,e,n,i){for(var r=new jr((function(t,e){return t-e})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===e&&o.largestBatchId>n){var s=r.get(o.largestBatchId);null===s&&(s=_o(),r=r.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=_o(),l=r.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(t,e){return u.set(t,e)})),!(u.size()>=i)););return Mr.resolve(u)}},{key:"ht",value:function(t,e,n){var i=this.overlays.get(n.key);if(null!==i){var r=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,r)}this.overlays=this.overlays.insert(n.key,new fs(e,n));var a=this.hr.get(e);void 0===a&&(a=xo(),this.hr.set(e,a)),this.hr.set(e,a.add(n.key))}}]),t}(),_u=function(){function t(){(0,p.Z)(this,t),this.Pr=new Hr(Eu.Ir),this.Tr=new Hr(Eu.Er)}return(0,y.Z)(t,[{key:"isEmpty",value:function(){return this.Pr.isEmpty()}},{key:"addReference",value:function(t,e){var n=new Eu(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}},{key:"dr",value:function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))}},{key:"removeReference",value:function(t,e){this.Ar(new Eu(t,e))}},{key:"Rr",value:function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))}},{key:"Vr",value:function(t){var e=this,n=new wr(new gr([])),i=new Eu(n,t),r=new Eu(n,t+1),a=[];return this.Tr.forEachInRange([i,r],(function(t){e.Ar(t),a.push(t.key)})),a}},{key:"mr",value:function(){var t=this;this.Pr.forEach((function(e){return t.Ar(e)}))}},{key:"Ar",value:function(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}},{key:"gr",value:function(t){var e=new wr(new gr([])),n=new Eu(e,t),i=new Eu(e,t+1),r=xo();return this.Tr.forEachInRange([n,i],(function(t){r=r.add(t.key)})),r}},{key:"containsKey",value:function(t){var e=new Eu(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}]),t}(),Eu=function(){function t(e,n){(0,p.Z)(this,t),this.key=e,this.pr=n}return(0,y.Z)(t,null,[{key:"Ir",value:function(t,e){return wr.comparator(t.key,e.key)||vr(t.pr,e.pr)}},{key:"Er",value:function(t,e){return vr(t.pr,e.pr)||wr.comparator(t.key,e.key)}}]),t}(),Su=function(){function t(e,n){(0,p.Z)(this,t),this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Hr(Eu.Ir)}return(0,y.Z)(t,[{key:"checkEmpty",value:function(t){return Mr.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(t,e,n,i){var r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new cs(r,e,n,i);this.mutationQueue.push(a);var o,s=(0,l.Z)(i);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.wr=this.wr.add(new Eu(u.key,r)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Mr.resolve(a)}},{key:"lookupMutationBatch",value:function(t,e){return Mr.resolve(this.Sr(e))}},{key:"getNextMutationBatchAfterBatchId",value:function(t,e){var n=e+1,i=this.br(n),r=i<0?0:i;return Mr.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Mr.resolve(0===this.mutationQueue.length?-1:this.yr-1)}},{key:"getAllMutationBatches",value:function(t){return Mr.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(t,e){var n=this,i=new Eu(e,0),r=new Eu(e,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([i,r],(function(t){var e=n.Sr(t.pr);a.push(e)})),Mr.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(t,e){var n=this,i=new Hr(vr);return e.forEach((function(t){var e=new Eu(t,0),r=new Eu(t,Number.POSITIVE_INFINITY);n.wr.forEachInRange([e,r],(function(t){i=i.add(t.pr)}))})),Mr.resolve(this.Dr(i))}},{key:"getAllMutationBatchesAffectingQuery",value:function(t,e){var n=e.path,i=n.length+1,r=n;wr.isDocumentKey(r)||(r=r.child(""));var a=new Eu(new wr(r),0),o=new Hr(vr);return this.wr.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),a),Mr.resolve(this.Dr(o))}},{key:"Dr",value:function(t){var e=this,n=[];return t.forEach((function(t){var i=e.Sr(t);null!==i&&n.push(i)})),n}},{key:"removeMutationBatch",value:function(t,e){var n=this;Yi(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();var i=this.wr;return Mr.forEach(e.mutations,(function(r){var a=new Eu(r.key,e.batchId);return i=i.delete(a),n.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((function(){n.wr=i}))}},{key:"Mn",value:function(t){}},{key:"containsKey",value:function(t,e){var n=new Eu(e,0),i=this.wr.firstAfterOrEqual(n);return Mr.resolve(e.isEqual(i&&i.key))}},{key:"performConsistencyCheck",value:function(t){return this.mutationQueue.length,Mr.resolve()}},{key:"Cr",value:function(t,e){return this.br(t)}},{key:"br",value:function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}},{key:"Sr",value:function(t){var e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}]),t}(),Cu=function(){function t(e){(0,p.Z)(this,t),this.vr=e,this.docs=new jr(wr.comparator),this.size=0}return(0,y.Z)(t,[{key:"setIndexManager",value:function(t){this.indexManager=t}},{key:"addEntry",value:function(t,e){var n=e.key,i=this.docs.get(n),r=i?i.size:0,a=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}},{key:"removeEntry",value:function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}},{key:"getEntry",value:function(t,e){var n=this.docs.get(e);return Mr.resolve(n?n.document.mutableCopy():Sa.newInvalidDocument(e))}},{key:"getEntries",value:function(t,e){var n=this,i=go();return e.forEach((function(t){var e=n.docs.get(t);i=i.insert(t,e?e.document.mutableCopy():Sa.newInvalidDocument(t))})),Mr.resolve(i)}},{key:"getDocumentsMatchingQuery",value:function(t,e,n,i){for(var r=go(),a=e.path,o=new wr(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),l=u.key,c=u.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||Tr(Sr(c),n)<=0||(i.has(c.key)||ho(e,c))&&(r=r.insert(c.key,c.mutableCopy()))}return Mr.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(t,e,n,i){Xi()}},{key:"Fr",value:function(t,e){return Mr.forEach(this.docs,(function(t){return e(t)}))}},{key:"newChangeBuffer",value:function(t){return new Tu(this)}},{key:"getSize",value:function(t){return Mr.resolve(this.size)}}]),t}(),Tu=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t){var i;return(0,p.Z)(this,n),(i=e.call(this)).ar=t,i}return(0,y.Z)(n,[{key:"applyChanges",value:function(t){var e=this,n=[];return this.changes.forEach((function(i,r){r.isValidDocument()?n.push(e.ar.addEntry(t,r)):e.ar.removeEntry(i)})),Mr.waitFor(n)}},{key:"getFromCache",value:function(t,e){return this.ar.getEntry(t,e)}},{key:"getAllFromCache",value:function(t,e){return this.ar.getEntries(t,e)}}]),n}(mu),xu=function(){function t(e){(0,p.Z)(this,t),this.persistence=e,this.Mr=new yo((function(t){return Qa(t)}),Ja),this.lastRemoteSnapshotVersion=yr.min(),this.highestTargetId=0,this.Or=0,this.Nr=new _u,this.targetCount=0,this.Br=yu.Nn()}return(0,y.Z)(t,[{key:"forEachTarget",value:function(t,e){return this.Mr.forEach((function(t,n){return e(n)})),Mr.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(t){return Mr.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(t){return Mr.resolve(this.Or)}},{key:"allocateTargetId",value:function(t){return this.highestTargetId=this.Br.next(),Mr.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Mr.resolve()}},{key:"qn",value:function(t){this.Mr.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Br=new yu(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}},{key:"addTargetData",value:function(t,e){return this.qn(e),this.targetCount+=1,Mr.resolve()}},{key:"updateTargetData",value:function(t,e){return this.qn(e),Mr.resolve()}},{key:"removeTargetData",value:function(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Mr.resolve()}},{key:"removeTargets",value:function(t,e,n){var i=this,r=0,a=[];return this.Mr.forEach((function(o,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(i.Mr.delete(o),a.push(i.removeMatchingKeysForTargetId(t,s.targetId)),r++)})),Mr.waitFor(a).next((function(){return r}))}},{key:"getTargetCount",value:function(t){return Mr.resolve(this.targetCount)}},{key:"getTargetData",value:function(t,e){var n=this.Mr.get(e)||null;return Mr.resolve(n)}},{key:"addMatchingKeys",value:function(t,e,n){return this.Nr.dr(e,n),Mr.resolve()}},{key:"removeMatchingKeys",value:function(t,e,n){this.Nr.Rr(e,n);var i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((function(e){r.push(i.markPotentiallyOrphaned(t,e))})),Mr.waitFor(r)}},{key:"removeMatchingKeysForTargetId",value:function(t,e){return this.Nr.Vr(e),Mr.resolve()}},{key:"getMatchingKeysForTargetId",value:function(t,e){var n=this.Nr.gr(e);return Mr.resolve(n)}},{key:"containsKey",value:function(t,e){return Mr.resolve(this.Nr.containsKey(e))}}]),t}(),Zu=function(){function t(e,n){var i=this;(0,p.Z)(this,t),this.Lr={},this.overlays={},this.kr=new Ir(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xu(this),this.indexManager=new vu,this.remoteDocumentCache=function(t){return new Cu(t)}((function(t){return i.referenceDelegate.Kr(t)})),this.serializer=new cu(n),this.$r=new bu(this.serializer)}return(0,y.Z)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(t){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(t){var e=this.overlays[t.toKey()];return e||(e=new wu,this.overlays[t.toKey()]=e),e}},{key:"getMutationQueue",value:function(t,e){var n=this.Lr[t.toKey()];return n||(n=new Su(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(t,e,n){var i=this;Ki("MemoryPersistence","Starting transaction:",t);var r=new Au(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((function(t){return i.referenceDelegate.Wr(r).next((function(){return t}))})).toPromise().then((function(t){return r.raiseOnCommittedEvent(),t}))}},{key:"Gr",value:function(t,e){return Mr.or(Object.values(this.Lr).map((function(n){return function(){return n.containsKey(t,e)}})))}}]),t}(),Au=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t){var i;return(0,p.Z)(this,n),(i=e.call(this)).currentSequenceNumber=t,i}return(0,y.Z)(n)}(Zr),Ou=function(){function t(e){(0,p.Z)(this,t),this.persistence=e,this.zr=new _u,this.jr=null}return(0,y.Z)(t,[{key:"Jr",get:function(){if(this.jr)return this.jr;throw Xi()}},{key:"addReference",value:function(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Mr.resolve()}},{key:"removeReference",value:function(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Mr.resolve()}},{key:"markPotentiallyOrphaned",value:function(t,e){return this.Jr.add(e.toString()),Mr.resolve()}},{key:"removeTarget",value:function(t,e){var n=this;this.zr.Vr(e.targetId).forEach((function(t){return n.Jr.add(t.toString())}));var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.Jr.add(t.toString())}))})).next((function(){return i.removeTargetData(t,e)}))}},{key:"Ur",value:function(){this.jr=new Set}},{key:"Wr",value:function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mr.forEach(this.Jr,(function(i){var r=wr.fromPath(i);return e.Yr(t,r).next((function(t){t||n.removeEntry(r,yr.min())}))})).next((function(){return e.jr=null,n.apply(t)}))}},{key:"updateLimboDocument",value:function(t,e){var n=this;return this.Yr(t,e).next((function(t){t?n.Jr.delete(e.toString()):n.Jr.add(e.toString())}))}},{key:"Kr",value:function(t){return 0}},{key:"Yr",value:function(t,e){var n=this;return Mr.or([function(){return Mr.resolve(n.zr.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Gr(t,e)}])}}],[{key:"Hr",value:function(e){return new t(e)}}]),t}();var Mu=function(){function t(e,n,i,r){(0,p.Z)(this,t),this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}return(0,y.Z)(t,null,[{key:"Ki",value:function(e,n){var i,r=xo(),a=xo(),o=(0,l.Z)(n.docChanges);try{for(o.s();!(i=o.n()).done;){var s=i.value;switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new t(e,n.fromCache,r,a)}}]),t}(),Lu=function(){function t(){(0,p.Z)(this,t),this._documentReadCount=0}return(0,y.Z)(t,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(t){this._documentReadCount+=t}}]),t}(),Iu=function(){function t(){(0,p.Z)(this,t),this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=8}return(0,y.Z)(t,[{key:"initialize",value:function(t,e){this.zi=t,this.indexManager=e,this.$i=!0}},{key:"getDocumentsMatchingQuery",value:function(t,e,n,i){var r=this,a={result:null};return this.ji(t,e).next((function(t){a.result=t})).next((function(){if(!a.result)return r.Hi(t,e,i,n).next((function(t){a.result=t}))})).next((function(){if(!a.result){var n=new Lu;return r.Ji(t,e,n).next((function(i){if(a.result=i,r.Ui)return r.Yi(t,e,n,i.size)}))}})).next((function(){return a.result}))}},{key:"Yi",value:function(t,e,n,i){return n.documentReadCount<this.Wi?(Hi()<=k.in.DEBUG&&Ki("QueryEngine","SDK will not create cache indexes for query:",co(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Mr.resolve()):(Hi()<=k.in.DEBUG&&Ki("QueryEngine","Query:",co(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Hi()<=k.in.DEBUG&&Ki("QueryEngine","The SDK decides to create cache indexes for query:",co(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ro(e))):Mr.resolve())}},{key:"ji",value:function(t,e){var n=this;if(eo(e))return Mr.resolve(null);var i=ro(e);return this.indexManager.getIndexType(t,i).next((function(r){return 0===r?null:(null!==e.limit&&1===r&&(e=so(e,null,"F"),i=ro(e)),n.indexManager.getDocumentsMatchingTarget(t,i).next((function(r){var a=xo.apply(void 0,(0,d.Z)(r));return n.zi.getDocuments(t,a).next((function(r){return n.indexManager.getMinOffset(t,i).next((function(i){var o=n.Zi(e,r);return n.Xi(e,o,a,i.readTime)?n.ji(t,so(e,null,"F")):n.es(t,o,e,i)}))}))})))}))}},{key:"Hi",value:function(t,e,n,i){var r=this;return eo(e)||i.isEqual(yr.min())?Mr.resolve(null):this.zi.getDocuments(t,n).next((function(a){var o=r.Zi(e,a);return r.Xi(e,o,n,i)?Mr.resolve(null):(Hi()<=k.in.DEBUG&&Ki("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),co(e)),r.es(t,o,e,Er(i,-1)).next((function(t){return t})))}))}},{key:"Zi",value:function(t,e){var n=new Hr(vo(t));return e.forEach((function(e,i){ho(t,i)&&(n=n.add(i))})),n}},{key:"Xi",value:function(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;var r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}},{key:"Ji",value:function(t,e,n){return Hi()<=k.in.DEBUG&&Ki("QueryEngine","Using full collection scan to execute query:",co(e)),this.zi.getDocumentsMatchingQuery(t,e,Cr.min(),n)}},{key:"es",value:function(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((function(t){return e.forEach((function(e){t=t.insert(e.key,e)})),t}))}}]),t}(),Nu=function(){function t(e,n,i,r){(0,p.Z)(this,t),this.persistence=e,this.ts=n,this.serializer=r,this.ns=new jr(vr),this.rs=new yo((function(t){return Qa(t)}),Ja),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}return(0,y.Z)(t,[{key:"_s",value:function(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ku(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.ns)}))}}]),t}();function Du(t,e,n,i){return new Nu(t,e,n,i)}function Ru(t,e){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=$i(e),t.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return i.mutationQueue.getAllMutationBatches(t).next((function(r){return e=r,i._s(n),i.mutationQueue.getAllMutationBatches(t)})).next((function(n){var r,a=[],o=[],s=xo(),u=(0,l.Z)(e);try{for(u.s();!(r=u.n()).done;){var c=r.value;a.push(c.batchId);var h,f=(0,l.Z)(c.mutations);try{for(f.s();!(h=f.n()).done;){var v=h.value;s=s.add(v.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=(0,l.Z)(n);try{for(p.s();!(d=p.n()).done;){var y=d.value;o.push(y.batchId);var m,g=(0,l.Z)(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;s=s.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return i.localDocuments.getDocuments(t,s).next((function(t){return{us:t,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),Pu.apply(this,arguments)}function Fu(t,e){var n=$i(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){var r=n.batch,a=r.keys(),o=Mr.resolve();return a.forEach((function(t){o=o.next((function(){return i.getEntry(e,t)})).next((function(e){var a=n.docVersions.get(t);Yi(null!==a),e.version.compareTo(a)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((function(){return t.mutationQueue.removeMutationBatch(e,r)}))}(n,t,e,r).next((function(){return r.apply(t)})).next((function(){return n.mutationQueue.performConsistencyCheck(t)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){for(var e=xo(),n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))})).next((function(){return n.localDocuments.getDocuments(t,i)}))}))}function Uu(t){var e=$i(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Qr.getLastRemoteSnapshotVersion(t)}))}function Vu(t,e){var n=$i(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;var o=[];e.targetChanges.forEach((function(a,s){var u=r.get(s);if(u){o.push(n.Qr.removeMatchingKeys(t,a.removedDocuments,s).next((function(){return n.Qr.addMatchingKeys(t,a.addedDocuments,s)})));var l=u.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(s)?l=l.withResumeToken(Jr.EMPTY_BYTE_STRING,yr.min()).withLastLimboFreeSnapshotVersion(yr.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,i)),r=r.insert(s,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.Qr.updateTargetData(t,l))}}));var s=go(),u=xo();if(e.documentUpdates.forEach((function(i){e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(Bu(t,a,e.documentUpdates).next((function(t){s=t.cs,u=t.ls}))),!i.isEqual(yr.min())){var l=n.Qr.getLastRemoteSnapshotVersion(t).next((function(e){return n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)}));o.push(l)}return Mr.waitFor(o).next((function(){return a.apply(t)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(t,s,u)})).next((function(){return s}))})).then((function(t){return n.ns=r,t}))}function Bu(t,e,n){var i=xo(),r=xo();return n.forEach((function(t){return i=i.add(t)})),e.getEntries(t,i).next((function(t){var i=go();return n.forEach((function(n,a){var o=t.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),a.isNoDocument()&&a.version.isEqual(yr.min())?(e.removeEntry(n,a.readTime),i=i.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(a),i=i.insert(n,a)):Ki("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{cs:i,ls:r}}))}function zu(t,e){var n=$i(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)}))}function ju(t,e){var n=$i(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var i;return n.Qr.getTargetData(t,e).next((function(r){return r?(i=r,Mr.resolve(i)):n.Qr.allocateTargetId(t).next((function(r){return i=new lu(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((function(){return i}))}))}))})).then((function(t){var i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}function qu(t,e,n){return Wu.apply(this,arguments)}function Wu(){return Wu=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){var r,a,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=$i(e),a=r.ns.get(n),o=i?"readwrite":"readwrite-primary",t.prev=1,t.t0=i,t.t0){t.next=6;break}return t.next=6,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,a)}));case 6:t.next=13;break;case 8:if(t.prev=8,t.t1=t.catch(1),Lr(t.t1)){t.next=12;break}throw t.t1;case 12:Ki("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(t.t1));case 13:r.ns=r.ns.remove(n),r.rs.delete(a.target);case 14:case"end":return t.stop()}}),t,null,[[1,8]])}))),Wu.apply(this,arguments)}function Hu(t,e,n){var i=$i(t),r=yr.min(),a=xo();return i.persistence.runTransaction("Execute query","readwrite",(function(t){return function(t,e,n){var i=$i(t),r=i.rs.get(n);return void 0!==r?Mr.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,ro(e)).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((function(t){a=t}))})).next((function(){return i.ts.getDocumentsMatchingQuery(t,e,n?r:yr.min(),n?a:xo())})).next((function(t){return Ku(i,fo(e),t),{documents:t,hs:a}}))}))}function Ku(t,e,n){var i=t.ss.get(e)||yr.min();n.forEach((function(t,e){e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}var Gu=function(){function t(){(0,p.Z)(this,t),this.activeTargetIds=Ao()}return(0,y.Z)(t,[{key:"As",value:function(t){this.activeTargetIds=this.activeTargetIds.add(t)}},{key:"Rs",value:function(t){this.activeTargetIds=this.activeTargetIds.delete(t)}},{key:"ds",value:function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}]),t}(),Qu=function(){function t(){(0,p.Z)(this,t),this.no=new Gu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,y.Z)(t,[{key:"addPendingMutation",value:function(t){}},{key:"updateMutationState",value:function(t,e,n){}},{key:"addLocalQueryTarget",value:function(t){return this.no.As(t),this.ro[t]||"not-current"}},{key:"updateQueryState",value:function(t,e,n){this.ro[t]=e}},{key:"removeLocalQueryTarget",value:function(t){this.no.Rs(t)}},{key:"isLocalQueryTarget",value:function(t){return this.no.activeTargetIds.has(t)}},{key:"clearQueryState",value:function(t){delete this.ro[t]}},{key:"getAllActiveQueryTargets",value:function(){return this.no.activeTargetIds}},{key:"isActiveQueryTarget",value:function(t){return this.no.activeTargetIds.has(t)}},{key:"start",value:function(){return this.no=new Gu,Promise.resolve()}},{key:"handleUserChange",value:function(t,e,n){}},{key:"setOnlineState",value:function(t){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(t){}},{key:"notifyBundleLoaded",value:function(t){}}]),t}(),Ju=function(){function t(){(0,p.Z)(this,t)}return(0,y.Z)(t,[{key:"io",value:function(t){}},{key:"shutdown",value:function(){}}]),t}(),Xu=function(){function t(){var e=this;(0,p.Z)(this,t),this.so=function(){return e.oo()},this._o=function(){return e.ao()},this.uo=[],this.co()}return(0,y.Z)(t,[{key:"io",value:function(t){this.uo.push(t)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}},{key:"co",value:function(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}},{key:"oo",value:function(){Ki("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var t,e=(0,l.Z)(this.uo);try{for(e.s();!(t=e.n()).done;){(0,t.value)(0)}}catch(n){e.e(n)}finally{e.f()}}},{key:"ao",value:function(){Ki("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var t,e=(0,l.Z)(this.uo);try{for(e.s();!(t=e.n()).done;){(0,t.value)(1)}}catch(n){e.e(n)}finally{e.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),Yu=null;function $u(){return null===Yu?Yu=268435456+Math.round(2147483648*Math.random()):Yu++,"0x"+Yu.toString(16)}var tl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},el=function(){function t(e){(0,p.Z)(this,t),this.lo=e.lo,this.ho=e.ho}return(0,y.Z)(t,[{key:"Po",value:function(t){this.Io=t}},{key:"To",value:function(t){this.Eo=t}},{key:"onMessage",value:function(t){this.Ao=t}},{key:"close",value:function(){this.ho()}},{key:"send",value:function(t){this.lo(t)}},{key:"Ro",value:function(){this.Io()}},{key:"Vo",value:function(t){this.Eo(t)}},{key:"mo",value:function(t){this.Ao(t)}}]),t}(),nl="WebChannelConnection",il=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t){var i;return(0,p.Z)(this,n),(i=e.call(this,t)).forceLongPolling=t.forceLongPolling,i.autoDetectLongPolling=t.autoDetectLongPolling,i.useFetchStreams=t.useFetchStreams,i.longPollingOptions=t.longPollingOptions,i}return(0,y.Z)(n,[{key:"Co",value:function(t,e,n,i){var r=$u();return new Promise((function(a,o){var s=new Ui;s.setWithCredentials(!0),s.listenOnce(Di.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Ni.NO_ERROR:var e=s.getResponseJson();Ki(nl,"XHR for RPC '".concat(t,"' ").concat(r," received:"),JSON.stringify(e)),a(e);break;case Ni.TIMEOUT:Ki(nl,"RPC '".concat(t,"' ").concat(r," timed out")),o(new er(tr.DEADLINE_EXCEEDED,"Request time out"));break;case Ni.HTTP_ERROR:var n=s.getStatus();if(Ki(nl,"RPC '".concat(t,"' ").concat(r," failed with status:"),n,"response text:",s.getResponseText()),n>0){var i=s.getResponseJson();Array.isArray(i)&&(i=i[0]);var u=null==i?void 0:i.error;if(u&&u.status&&u.message){var l=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(tr).indexOf(e)>=0?e:tr.UNKNOWN}(u.status);o(new er(l,u.message))}else o(new er(tr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new er(tr.UNAVAILABLE,"Connection failed."));break;default:Xi()}}finally{Ki(nl,"RPC '".concat(t,"' ").concat(r," completed."))}}));var u=JSON.stringify(i);Ki(nl,"RPC '".concat(t,"' ").concat(r," sending request:"),i),s.send(e,"POST",u,n,15)}))}},{key:"Fo",value:function(t,e,n){var i=$u(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Li(),o=Ii(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Do(s.initMessageHeaders,e,n),s.encodeInitMessageHeaders=!0;var l=r.join("");Ki(nl,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(l),s);var c=a.createWebChannel(l,s),h=!1,f=!1,v=new el({lo:function(e){f?Ki(nl,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(h||(Ki(nl,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),c.open(),h=!0),Ki(nl,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),c.send(e))},ho:function(){return c.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(c,Fi.EventType.OPEN,(function(){f||Ki(nl,"RPC '".concat(t,"' stream ").concat(i," transport opened."))})),d(c,Fi.EventType.CLOSE,(function(){f||(f=!0,Ki(nl,"RPC '".concat(t,"' stream ").concat(i," transport closed")),v.Vo())})),d(c,Fi.EventType.ERROR,(function(e){f||(f=!0,Qi(nl,"RPC '".concat(t,"' stream ").concat(i," transport errored:"),e),v.Vo(new er(tr.UNAVAILABLE,"The operation could not be completed")))})),d(c,Fi.EventType.MESSAGE,(function(e){var n;if(!f){var r=e.data[0];Yi(!!r);var a=r,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Ki(nl,"RPC '".concat(t,"' stream ").concat(i," received error:"),o);var s=o.status,u=function(t){var e=os[t];if(void 0!==e)return ps(e)}(s),l=o.message;void 0===u&&(u=tr.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),f=!0,v.Vo(new er(u,l)),c.close()}else Ki(nl,"RPC '".concat(t,"' stream ").concat(i," received:"),r),v.mo(r)}})),d(o,Ri.STAT_EVENT,(function(e){e.stat===Pi.PROXY?Ki(nl,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===Pi.NOPROXY&&Ki(nl,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((function(){v.Ro()}),0),v}}]),n}(function(){function t(e){(0,p.Z)(this,t),this.databaseInfo=e,this.databaseId=e.databaseId;var n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+e.host,this.po="projects/".concat(i,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(i):"project_id=".concat(i,"&database_id=").concat(r)}return(0,y.Z)(t,[{key:"wo",get:function(){return!1}},{key:"So",value:function(t,e,n,i,r){var a=$u(),o=this.bo(t,e);Ki("RestConnection","Sending RPC '".concat(t,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(s,i,r),this.Co(t,o,s,n).then((function(e){return Ki("RestConnection","Received RPC '".concat(t,"' ").concat(a,": "),e),e}),(function(e){throw Qi("RestConnection","RPC '".concat(t,"' ").concat(a," failed with error: "),e,"url: ",o,"request:",n),e}))}},{key:"vo",value:function(t,e,n,i,r,a){return this.So(t,e,n,i,r)}},{key:"Do",value:function(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+qi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((function(e,n){return t[n]=e})),n&&n.headers.forEach((function(e,n){return t[n]=e}))}},{key:"bo",value:function(t,e){var n=tl[t];return"".concat(this.fo,"/v1/").concat(e,":").concat(n)}}]),t}());function rl(){return"undefined"!=typeof document?document:null}function al(t){return new Ds(t,!0)}var ol=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,p.Z)(this,t),this.oi=e,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=a,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}return(0,y.Z)(t,[{key:"reset",value:function(){this.No=0}},{key:"ko",value:function(){this.No=this.Oo}},{key:"qo",value:function(t){var e=this;this.cancel();var n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Lo),r=Math.max(0,n-i);r>0&&Ki("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(i," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(function(){return e.Lo=Date.now(),t()})),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}},{key:"Ko",value:function(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}},{key:"cancel",value:function(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Qo",value:function(){return(Math.random()-.5)*this.No}}]),t}(),sl=function(){function t(e,n,i,r,a,o,s,u){(0,p.Z)(this,t),this.oi=e,this.$o=i,this.Uo=r,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ol(e,n)}return(0,y.Z)(t,[{key:"Ho",value:function(){return 1===this.state||5===this.state||this.Jo()}},{key:"Jo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Yo()}},{key:"stop",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.Ho(),!t.t0){t.next=4;break}return t.next=4,this.close(0);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"Zo",value:function(){this.state=0,this.jo.reset()}},{key:"Xo",value:function(){var t=this;this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(function(){return t.e_()})))}},{key:"t_",value:function(t){this.n_(),this.stream.send(t)}},{key:"e_",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.Jo()){t.next=2;break}return t.abrupt("return",this.close(0));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"close",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():n&&n.code===tr.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===tr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,t.next=9,this.listener.To(n);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"i_",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(e){var i=(0,s.Z)(e,2),r=i[0],a=i[1];t.Wo===n&&t.o_(r,a)}),(function(n){e((function(){var e=new er(tr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.__(e)}))}))}},{key:"o_",value:function(t,e){var n=this,i=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((function(){i((function(){return n.state=2,n.zo=n.oi.enqueueAfterDelay(n.Uo,1e4,(function(){return n.Jo()&&(n.state=3),Promise.resolve()})),n.listener.Po()}))})),this.stream.To((function(t){i((function(){return n.__(t)}))})),this.stream.onMessage((function(t){i((function(){return n.onMessage(t)}))}))}},{key:"Yo",value:function(){var t=this;this.state=5,this.jo.qo((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}}),e)}))))}},{key:"__",value:function(t){return Ki("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}},{key:"s_",value:function(t){var e=this;return function(n){e.oi.enqueueAndForget((function(){return e.Wo===t?n():(Ki("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),ul=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r,a,o,s){var u;return(0,p.Z)(this,n),(u=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,a,s)).serializer=o,u}return(0,y.Z)(n,[{key:"a_",value:function(t,e){return this.connection.Fo("Listen",t,e)}},{key:"onMessage",value:function(t){this.jo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Xi()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(t,e){return t.useProto3Json?(Yi(void 0===e||"string"==typeof e),Jr.fromBase64String(e||"")):(Yi(void 0===e||e instanceof Uint8Array),Jr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(t){var e=void 0===t.code?tr.UNKNOWN:ps(t.code);return new er(e,t.message||"")}(o);n=new xs(i,r,a,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var l=qs(t,u.document.name),c=Vs(u.document.updateTime),h=u.document.createTime?Vs(u.document.createTime):yr.min(),f=new _a({mapValue:{fields:u.document.fields}}),v=Sa.newFoundDocument(l,c,h,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Cs(d,p,v.key,v)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var m=qs(t,y.document),g=y.readTime?Vs(y.readTime):yr.min(),k=Sa.newNoDocument(m,g),b=y.removedTargetIds||[];n=new Cs([],b,k.key,k)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var _=qs(t,w.document),E=w.removedTargetIds||[];n=new Cs([],E,_,null)}else{if(!("filter"in e))return Xi();e.filter;var S=e.filter;S.targetId;var C=S.count,T=void 0===C?0:C,x=S.unchangedNames,Z=new vs(T,x),A=S.targetId;n=new Ts(A,Z)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return yr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?yr.min():e.readTime?Vs(e.readTime):yr.min()}(t);return this.listener.u_(e,n)}},{key:"c_",value:function(t){var e={};e.database=Ks(this.serializer),e.addTarget=function(t,e){var n,i=e.target;if((n=Xa(i)?{documents:Xs(t,i)}:{query:Ys(t,i)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Fs(t,e.resumeToken);var r=Rs(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(yr.min())>0){n.readTime=Ps(t,e.snapshotVersion.toTimestamp());var a=Rs(t,e.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,t);var n=function(t,e){var n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xi()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}},{key:"l_",value:function(t){var e={};e.database=Ks(this.serializer),e.removeTarget=t,this.t_(e)}}]),n}(sl),ll=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r,a,o,s){var u;return(0,p.Z)(this,n),(u=e.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,a,s)).serializer=o,u.h_=!1,u}return(0,y.Z)(n,[{key:"P_",get:function(){return this.h_}},{key:"start",value:function(){this.h_=!1,this.lastStreamToken=void 0,(0,a.Z)((0,o.Z)(n.prototype),"start",this).call(this)}},{key:"i_",value:function(){this.h_&&this.I_([])}},{key:"a_",value:function(t,e){return this.connection.Fo("Write",t,e)}},{key:"onMessage",value:function(t){if(Yi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();var e=function(t,e){return t&&t.length>0?(Yi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Vs(t.updateTime):Vs(e);return n.isEqual(yr.min())&&(n=Vs(e)),new Ho(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Vs(t.commitTime);return this.listener.T_(n,e)}return Yi(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}},{key:"d_",value:function(){var t={};t.database=Ks(this.serializer),this.t_(t)}},{key:"I_",value:function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Js(e.serializer,t)}))};this.t_(n)}}]),n}(sl),cl=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r,a){var o;return(0,p.Z)(this,n),(o=e.call(this)).authCredentials=t,o.appCheckCredentials=i,o.connection=r,o.serializer=a,o.A_=!1,o}return(0,y.Z)(n,[{key:"R_",value:function(){if(this.A_)throw new er(tr.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"So",value:function(t,e,n){var i=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(r){var a=(0,s.Z)(r,2),o=a[0],u=a[1];return i.connection.So(t,e,n,o,u)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===tr.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),t):new er(tr.UNKNOWN,t.toString())}))}},{key:"vo",value:function(t,e,n,i){var r=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=(0,s.Z)(a,2),u=o[0],l=o[1];return r.connection.vo(t,e,n,u,l,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===tr.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),t):new er(tr.UNKNOWN,t.toString())}))}},{key:"terminate",value:function(){this.A_=!0}}]),n}((0,y.Z)((function t(){(0,p.Z)(this,t)})));var hl=function(){function t(e,n){(0,p.Z)(this,t),this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}return(0,y.Z)(t,[{key:"p_",value:function(){var t=this;0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.f_=null,t.w_("Backend didn't respond within 10 seconds."),t.y_("Offline"),Promise.resolve()})))}},{key:"S_",value:function(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.y_("Offline")))}},{key:"set",value:function(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}},{key:"y_",value:function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}},{key:"w_",value:function(t){var e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Gi(e),this.g_=!1):Ki("OnlineStateTracker",e)}},{key:"b_",value:function(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}]),t}(),fl=(0,y.Z)((function t(e,n,i,r,a){var o=this;(0,p.Z)(this,t),this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=a,this.M_.io((function(t){i.enqueueAndForget((0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=El(o),!t.t0){t.next=5;break}return Ki("RemoteStore","Restarting streams for network reachability change."),t.next=5,function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=$i(e)).v_.add(4),t.next=4,pl(n);case 4:return n.x_.set("Unknown"),n.v_.delete(4),t.next=8,vl(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(o);case 5:case"end":return t.stop()}}),t)}))))})),this.x_=new hl(i,r)}));function vl(t){return dl.apply(this,arguments)}function dl(){return(dl=(0,h.Z)((0,c.Z)().mark((function t(e){var n,i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!El(e)){t.next=18;break}n=(0,l.Z)(e.F_),t.prev=2,n.s();case 4:if((i=n.n()).done){t.next=10;break}return r=i.value,t.next=8,r(!0);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))).apply(this,arguments)}function pl(t){return yl.apply(this,arguments)}function yl(){return(yl=(0,h.Z)((0,c.Z)().mark((function t(e){var n,i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,l.Z)(e.F_),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=9;break}return r=i.value,t.next=7,r(!1);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))).apply(this,arguments)}function ml(t,e){var n=$i(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),_l(n)?wl(n):Yl(n).Jo()&&kl(n,e))}function gl(t,e){var n=$i(t),i=Yl(n);n.C_.delete(e),i.Jo()&&bl(n,e),0===n.C_.size&&(i.Jo()?i.Xo():El(n)&&n.x_.set("Unknown"))}function kl(t,e){if(t.O_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yr.min())>0){var n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(t).c_(e)}function bl(t,e){t.O_.Ne(e),Yl(t).l_(e)}function wl(t){t.O_=new As({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},ut:function(e){return t.C_.get(e)||null},rt:function(){return t.datastore.serializer.databaseId}}),Yl(t).start(),t.x_.p_()}function _l(t){return El(t)&&!Yl(t).Ho()&&t.C_.size>0}function El(t){return 0===$i(t).v_.size}function Sl(t){t.O_=void 0}function Cl(t){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,h.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.C_.forEach((function(t,n){kl(e,t)}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function xl(t,e){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,h.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Sl(e),_l(e)?(e.x_.S_(n),wl(e)):e.x_.set("Unknown");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Al(t,e,n){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.x_.set("Online"),!(n instanceof xs&&2===n.state&&n.cause)){t.next=13;break}return t.prev=1,t.next=4,function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r,a,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.cause,r=(0,l.Z)(n.targetIds),t.prev=2,r.s();case 4:if((a=r.n()).done){t.next=14;break}if(o=a.value,t.t0=e.C_.has(o),!t.t0){t.next=12;break}return t.next=10,e.remoteSyncer.rejectListen(o,i);case 10:e.C_.delete(o),e.O_.removeTarget(o);case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2),r.e(t.t1);case 19:return t.prev=19,r.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})));return function(e,n){return t.apply(this,arguments)}}()(e,n);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),Ki("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),t.t0),t.next=11,Ml(e,t.t0);case 11:case 22:t.next=29;break;case 13:if(n instanceof Cs?e.O_.Ue(n):n instanceof Ts?e.O_.Ye(n):e.O_.ze(n),i.isEqual(yr.min())){t.next=29;break}return t.prev=14,t.next=17,Uu(e.localStore);case 17:if(r=t.sent,t.t1=i.compareTo(r)>=0,!t.t1){t.next=22;break}return t.next=22,function(t,e){var n=t.O_.st(e);return n.targetChanges.forEach((function(n,i){if(n.resumeToken.approximateByteSize()>0){var r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e,n){var i=t.C_.get(e);if(i){t.C_.set(e,i.withResumeToken(Jr.EMPTY_BYTE_STRING,i.snapshotVersion)),bl(t,e);var r=new lu(i.target,e,n,i.sequenceNumber);kl(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(e,i);case 24:return t.prev=24,t.t2=t.catch(14),Ki("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,Ml(e,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])}))),Ol.apply(this,arguments)}function Ml(t,e,n){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Lr(n)){t.next=2;break}throw n;case 2:return e.v_.add(1),t.next=5,pl(e);case 5:e.x_.set("Offline"),i||(i=function(){return Uu(e.localStore)}),e.asyncQueue.enqueueRetryable((0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ki("RemoteStore","Retrying IndexedDB access"),t.next=3,i();case 3:return e.v_.delete(1),t.next=6,vl(e);case 6:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Il(t,e){return e().catch((function(n){return Ml(t,n,e)}))}function Nl(t){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,h.Z)((0,c.Z)().mark((function t(e){var n,i,r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=$i(e),i=$l(n),r=n.D_.length>0?n.D_[n.D_.length-1].batchId:-1;case 2:if(!Rl(n)){t.next=19;break}return t.prev=3,t.next=6,zu(n.localStore,r);case 6:if(null!==(a=t.sent)){t.next=10;break}return 0===n.D_.length&&i.Xo(),t.abrupt("break",19);case 10:r=a.batchId,Pl(n,a),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(3),t.next=17,Ml(n,t.t0);case 17:t.next=2;break;case 19:Fl(n)&&Ul(n);case 20:case"end":return t.stop()}}),t,null,[[3,13]])}))),Dl.apply(this,arguments)}function Rl(t){return El(t)&&t.D_.length<10}function Pl(t,e){t.D_.push(e);var n=$l(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Fl(t){return El(t)&&!$l(t).Ho()&&t.D_.length>0}function Ul(t){$l(t).start()}function Vl(t){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$l(e).d_();case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zl(t){return jl.apply(this,arguments)}function jl(){return(jl=(0,h.Z)((0,c.Z)().mark((function t(e){var n,i,r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=$l(e),i=(0,l.Z)(e.D_);try{for(i.s();!(r=i.n()).done;)a=r.value,n.I_(a.mutations)}catch(o){i.e(o)}finally{i.f()}case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ql(t,e,n){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){var r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.D_.shift(),a=hs.from(r,n,i),t.next=3,Il(e,(function(){return e.remoteSyncer.applySuccessfulWrite(a)}));case 3:return t.next=5,Nl(e);case 5:case"end":return t.stop()}}),t)}))),Wl.apply(this,arguments)}function Hl(t,e){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,h.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n&&$l(e).P_,!t.t0){t.next=4;break}return t.next=4,function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!function(t){return ds(t)&&t!==tr.ABORTED}(n.code)){t.next=7;break}return i=e.D_.shift(),$l(e).Zo(),t.next=5,Il(e,(function(){return e.remoteSyncer.rejectFailedWrite(i.batchId,n)}));case 5:return t.next=7,Nl(e);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(e,n);case 4:Fl(e)&&Ul(e);case 5:case"end":return t.stop()}}),t)}))),Kl.apply(this,arguments)}function Gl(t,e){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=$i(e)).asyncQueue.verifyOperationInProgress(),Ki("RemoteStore","RemoteStore received new credentials"),r=El(i),i.v_.add(3),t.next=6,pl(i);case 6:return r&&i.x_.set("Unknown"),t.next=9,i.remoteSyncer.handleCredentialChange(n);case 9:return i.v_.delete(3),t.next=12,vl(i);case 12:case"end":return t.stop()}}),t)}))),Ql.apply(this,arguments)}function Jl(t,e){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=$i(e),!n){t.next=7;break}return i.v_.delete(2),t.next=5,vl(i);case 5:t.next=13;break;case 7:if(t.t0=n,t.t0){t.next=13;break}return i.v_.add(2),t.next=12,pl(i);case 12:i.x_.set("Unknown");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yl(t){return t.N_||(t.N_=function(t,e,n){var i=$i(t);return i.R_(),new ul(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:Cl.bind(null,t),To:xl.bind(null,t),u_:Al.bind(null,t)}),t.F_.push(function(){var e=(0,h.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}t.N_.Zo(),_l(t)?wl(t):t.x_.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.N_.stop();case 6:Sl(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.N_}function $l(t){return t.B_||(t.B_=function(t,e,n){var i=$i(t);return i.R_(),new ll(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:Vl.bind(null,t),To:Hl.bind(null,t),E_:zl.bind(null,t),T_:ql.bind(null,t)}),t.F_.push(function(){var e=(0,h.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return t.B_.Zo(),e.next=4,Nl(t);case 4:e.next=9;break;case 6:return e.next=8,t.B_.stop();case 8:t.D_.length>0&&(Ki("RemoteStore","Stopping write stream with ".concat(t.D_.length," pending writes")),t.D_=[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.B_}var tc=function(){function t(e,n,i,r,a){(0,p.Z)(this,t),this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return(0,y.Z)(t,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new er(tr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}},{key:"handleDelayElapsed",value:function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(e,n,i,r,a){var o=new t(e,n,Date.now()+i,r,a);return o.start(i),o}}]),t}();function ec(t,e){if(Gi("AsyncQueue","".concat(e,": ").concat(t)),Lr(t))return new er(tr.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}var nc=function(){function t(e){(0,p.Z)(this,t),this.comparator=e?function(t,n){return e(t,n)||wr.comparator(t.key,n.key)}:function(t,e){return wr.comparator(t.key,e.key)},this.keyedMap=bo(),this.sortedSet=new jr(this.comparator)}return(0,y.Z)(t,[{key:"has",value:function(t){return null!=this.keyedMap.get(t)}},{key:"get",value:function(t){return this.keyedMap.get(t)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"add",value:function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}},{key:"delete",value:function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();n.hasNext();){var r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),ic=function(){function t(){(0,p.Z)(this,t),this.L_=new jr(wr.comparator)}return(0,y.Z)(t,[{key:"track",value:function(t){var e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):Xi():this.L_=this.L_.insert(e,t)}},{key:"k_",value:function(){var t=[];return this.L_.inorderTraversal((function(e,n){t.push(n)})),t}}]),t}(),rc=function(){function t(e,n,i,r,a,o,s,u,l){(0,p.Z)(this,t),this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}return(0,y.Z)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&uo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,i,r,a){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,nc.emptySet(n),o,i,r,!0,!1,a)}}]),t}(),ac=(0,y.Z)((function t(){(0,p.Z)(this,t),this.q_=void 0,this.listeners=[]})),oc=(0,y.Z)((function t(){(0,p.Z)(this,t),this.queries=new yo((function(t){return lo(t)}),uo),this.onlineState="Unknown",this.Q_=new Set}));function sc(t,e){return uc.apply(this,arguments)}function uc(){return uc=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r,a,o,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=$i(e),r=n.query,a=!1,(o=i.queries.get(r))||(a=!0,o=new ac),!a){t.next=13;break}return t.prev=3,t.next=6,i.onListen(r);case 6:o.q_=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),s=ec(t.t0,"Initialization of query '".concat(co(n.query),"' failed")),t.abrupt("return",void n.onError(s));case 13:i.queries.set(r,o),o.listeners.push(n),n.K_(i.onlineState),o.q_&&n.U_(o.q_)&&vc(i);case 14:case"end":return t.stop()}}),t,null,[[3,9]])}))),uc.apply(this,arguments)}function lc(t,e){return cc.apply(this,arguments)}function cc(){return cc=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r,a,o,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=$i(e),r=n.query,a=!1,(o=i.queries.get(r))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){t.next=6;break}return t.abrupt("return",(i.queries.delete(r),i.onUnlisten(r)));case 6:case"end":return t.stop()}}),t)}))),cc.apply(this,arguments)}function hc(t,e){var n,i=$i(t),r=!1,a=(0,l.Z)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=i.queries.get(s);if(u){var c,h=(0,l.Z)(u.listeners);try{for(h.s();!(c=h.n()).done;){c.value.U_(o)&&(r=!0)}}catch(f){h.e(f)}finally{h.f()}u.q_=o}}}catch(f){a.e(f)}finally{a.f()}r&&vc(i)}function fc(t,e,n){var i=$i(t),r=i.queries.get(e);if(r){var a,o=(0,l.Z)(r.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}i.queries.delete(e)}function vc(t){t.Q_.forEach((function(t){t.next()}))}var dc=function(){function t(e,n,i){(0,p.Z)(this,t),this.query=e,this.W_=n,this.G_=!1,this.z_=null,this.onlineState="Unknown",this.options=i||{}}return(0,y.Z)(t,[{key:"U_",value:function(t){if(!this.options.includeMetadataChanges){var e,n=[],i=(0,l.Z)(t.docChanges);try{for(i.s();!(e=i.n()).done;){var r=e.value;3!==r.type&&n.push(r)}}catch(o){i.e(o)}finally{i.f()}t=new rc(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}var a=!1;return this.G_?this.j_(t)&&(this.W_.next(t),a=!0):this.H_(t,this.onlineState)&&(this.J_(t),a=!0),this.z_=t,a}},{key:"onError",value:function(t){this.W_.error(t)}},{key:"K_",value:function(t){this.onlineState=t;var e=!1;return this.z_&&!this.G_&&this.H_(this.z_,t)&&(this.J_(this.z_),e=!0),e}},{key:"H_",value:function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return(!this.options.Y_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}},{key:"j_",value:function(t){if(t.docChanges.length>0)return!0;var e=this.z_&&this.z_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}},{key:"J_",value:function(t){t=rc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.G_=!0,this.W_.next(t)}}]),t}();var pc=(0,y.Z)((function t(e){(0,p.Z)(this,t),this.key=e})),yc=(0,y.Z)((function t(e){(0,p.Z)(this,t),this.key=e})),mc=function(){function t(e,n){(0,p.Z)(this,t),this.query=e,this.sa=n,this.oa=null,this.hasCachedResults=!1,this.current=!1,this._a=xo(),this.mutatedKeys=xo(),this.aa=vo(e),this.ua=new nc(this.aa)}return(0,y.Z)(t,[{key:"ca",get:function(){return this.sa}},{key:"la",value:function(t,e){var n=this,i=e?e.ha:new ic,r=e?e.ua:this.ua,a=e?e.mutatedKeys:this.mutatedKeys,o=r,s=!1,u="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((function(t,e){var c=r.get(t),h=ho(n.query,e)?e:null,f=!!c&&n.mutatedKeys.has(c.key),v=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;c&&h?c.data.isEqual(h.data)?f!==v&&(i.track({type:3,doc:h}),d=!0):n.Pa(c,h)||(i.track({type:2,doc:h}),d=!0,(u&&n.aa(h,u)>0||l&&n.aa(h,l)<0)&&(s=!0)):!c&&h?(i.track({type:0,doc:h}),d=!0):c&&!h&&(i.track({type:1,doc:c}),d=!0,(u||l)&&(s=!0)),d&&(h?(o=o.add(h),a=v?a.add(t):a.delete(t)):(o=o.delete(t),a=a.delete(t)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),i.track({type:1,doc:c})}return{ua:o,ha:i,Xi:s,mutatedKeys:a}}},{key:"Pa",value:function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}},{key:"applyChanges",value:function(t,e,n){var i=this,r=this.ua;this.ua=t.ua,this.mutatedKeys=t.mutatedKeys;var a=t.ha.k_();a.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xi()}};return n(t)-n(e)}(t.type,e.type)||i.aa(t.doc,e.doc)})),this.Ia(n);var o=e?this.Ta():[],s=0===this._a.size&&this.current?1:0,u=s!==this.oa;return this.oa=s,0!==a.length||u?{snapshot:new rc(this.query,t.ua,r,a,t.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"K_",value:function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ua:this.ua,ha:new ic,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Ea:[]}}},{key:"da",value:function(t){return!this.sa.has(t)&&!!this.ua.has(t)&&!this.ua.get(t).hasLocalMutations}},{key:"Ia",value:function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.sa=e.sa.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.sa=e.sa.delete(t)})),this.current=t.current)}},{key:"Ta",value:function(){var t=this;if(!this.current)return[];var e=this._a;this._a=xo(),this.ua.forEach((function(e){t.da(e.key)&&(t._a=t._a.add(e.key))}));var n=[];return e.forEach((function(e){t._a.has(e)||n.push(new yc(e))})),this._a.forEach((function(t){e.has(t)||n.push(new pc(t))})),n}},{key:"Aa",value:function(t){this.sa=t.hs,this._a=xo();var e=this.la(t.documents);return this.applyChanges(e,!0)}},{key:"Ra",value:function(){return rc.fromInitialDocuments(this.query,this.ua,this.mutatedKeys,0===this.oa,this.hasCachedResults)}}]),t}(),gc=(0,y.Z)((function t(e,n,i){(0,p.Z)(this,t),this.query=e,this.targetId=n,this.view=i})),kc=(0,y.Z)((function t(e){(0,p.Z)(this,t),this.key=e,this.Va=!1})),bc=function(){function t(e,n,i,r,a,o){(0,p.Z)(this,t),this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ma={},this.fa=new yo((function(t){return lo(t)}),uo),this.ga=new Map,this.pa=new Set,this.ya=new jr(wr.comparator),this.wa=new Map,this.Sa=new _u,this.ba={},this.Da=new Map,this.Ca=yu.Bn(),this.onlineState="Unknown",this.va=void 0}return(0,y.Z)(t,[{key:"isPrimaryClient",get:function(){return!0===this.va}}]),t}();function wc(t,e){return _c.apply(this,arguments)}function _c(){return _c=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r,a,o,s,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Jc(e),!(o=i.fa.get(n))){t.next=6;break}r=o.targetId,i.sharedClientState.addLocalQueryTarget(r),a=o.view.Ra(),t.next=15;break;case 6:return t.next=8,ju(i.localStore,ro(n));case 8:return s=t.sent,u=i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,t.next=13,Ec(i,n,r,"current"===u,s.resumeToken);case 13:a=t.sent,i.isPrimaryClient&&ml(i.remoteStore,s);case 15:return t.abrupt("return",a);case 16:case"end":return t.stop()}}),t)}))),_c.apply(this,arguments)}function Ec(t,e,n,i,r){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,h.Z)((0,c.Z)().mark((function t(e,n,i,r,a){var o,s,u,l,f,v;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.Fa=function(t,n,i){return function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e,n,i,r){var a,o,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.view.la(i),t.t0=a.Xi,!t.t0){t.next=6;break}return t.next=5,Hu(e.localStore,n.query,!1).then((function(t){var e=t.documents;return n.view.la(e,a)}));case 5:a=t.sent;case 6:return o=r&&r.targetChanges.get(n.targetId),s=n.view.applyChanges(a,e.isPrimaryClient,o),t.abrupt("return",(zc(e,n.targetId,s.Ea),s.snapshot));case 8:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}()(e,t,n,i)},t.next=3,Hu(e.localStore,n,!0);case 3:return o=t.sent,s=new mc(n,o.hs),u=s.la(o.documents),l=Ss.createSynthesizedTargetChangeForCurrentChange(i,r&&"Offline"!==e.onlineState,a),f=s.applyChanges(u,e.isPrimaryClient,l),zc(e,i,f.Ea),v=new gc(n,i,s),t.abrupt("return",(e.fa.set(n,v),e.ga.has(i)?e.ga.get(i).push(n):e.ga.set(i,[n]),f.snapshot));case 11:case"end":return t.stop()}}),t)}))),Sc.apply(this,arguments)}function Cc(t,e){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=$i(e),r=i.fa.get(n),!((a=i.ga.get(r.targetId)).length>1)){t.next=3;break}return t.abrupt("return",(i.ga.set(r.targetId,a.filter((function(t){return!uo(t,n)}))),void i.fa.delete(n)));case 3:if(!i.isPrimaryClient){t.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(r.targetId),t.t0=i.sharedClientState.isActiveQueryTarget(r.targetId),t.t0){t.next=9;break}return t.next=9,qu(i.localStore,r.targetId,!1).then((function(){i.sharedClientState.clearQueryState(r.targetId),gl(i.remoteStore,r.targetId),Vc(i,r.targetId)})).catch(Ar);case 9:t.next=14;break;case 11:return Vc(i,r.targetId),t.next=14,qu(i.localStore,r.targetId,!0);case 14:case"end":return t.stop()}}),t)}))),Tc.apply(this,arguments)}function xc(t,e,n){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){var r,a,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Xc(e),t.prev=1,t.next=4,function(t,e){var n,i,r=$i(t),a=pr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),xo());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){var s=go(),u=xo();return r.os.getEntries(t,o).next((function(t){(s=t).forEach((function(t,e){e.isValidDocument()||(u=u.add(t))}))})).next((function(){return r.localDocuments.getOverlayedDocuments(t,s)})).next((function(i){n=i;var o,s=[],u=(0,l.Z)(e);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=$o(c,n.get(c.key).overlayedDocument);null!=h&&s.push(new ns(c.key,h,Ea(h.value.mapValue),Ko.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.mutationQueue.addMutationBatch(t,a,s,e)})).next((function(e){i=e;var a=e.applyToLocalDocumentSet(n,u);return r.documentOverlayCache.saveOverlays(t,e.batchId,a)}))})).then((function(){return{batchId:i.batchId,changes:wo(n)}}))}(r.localStore,n);case 4:return a=t.sent,r.sharedClientState.addPendingMutation(a.batchId),function(t,e,n){var i=t.ba[t.currentUser.toKey()];i||(i=new jr(vr)),i=i.insert(e,n),t.ba[t.currentUser.toKey()]=i}(r,a.batchId,i),t.next=9,Wc(r,a.changes);case 9:return t.next=11,Nl(r.remoteStore);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),o=ec(t.t0,"Failed to persist write"),i.reject(o);case 17:case"end":return t.stop()}}),t,null,[[1,13]])}))),Zc.apply(this,arguments)}function Ac(t,e){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=$i(e),t.prev=1,t.next=4,Vu(i.localStore,n);case 4:return r=t.sent,n.targetChanges.forEach((function(t,e){var n=i.wa.get(e);n&&(Yi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?n.Va=!0:t.modifiedDocuments.size>0?Yi(n.Va):t.removedDocuments.size>0&&(Yi(n.Va),n.Va=!1))})),t.next=8,Wc(i,r,n);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,Ar(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),Oc.apply(this,arguments)}function Mc(t,e,n){var i=$i(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){var r=[];i.fa.forEach((function(t,n){var i=n.view.K_(e);i.snapshot&&r.push(i.snapshot)})),function(t,e){var n=$i(t);n.onlineState=e;var i=!1;n.queries.forEach((function(t,n){var r,a=(0,l.Z)(n.listeners);try{for(a.s();!(r=a.n()).done;){r.value.K_(e)&&(i=!0)}}catch(o){a.e(o)}finally{a.f()}})),i&&vc(n)}(i.eventManager,e),r.length&&i.ma.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Lc(t,e,n){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){var r,a,o,s,u,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=$i(e)).sharedClientState.updateQueryState(n,"rejected",i),a=r.wa.get(n),!(o=a&&a.key)){t.next=14;break}return s=(s=new jr(wr.comparator)).insert(o,Sa.newNoDocument(o,yr.min())),u=xo().add(o),l=new Es(yr.min(),new Map,new jr(vr),s,u),t.next=9,Ac(r,l);case 9:r.ya=r.ya.remove(o),r.wa.delete(n),qc(r),t.next=16;break;case 14:return t.next=16,qu(r.localStore,n,!1).then((function(){return Vc(r,n,i)})).catch(Ar);case 16:case"end":return t.stop()}}),t)}))),Ic.apply(this,arguments)}function Nc(t,e){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=$i(e),r=n.batch.batchId,t.prev=1,t.next=4,Fu(i.localStore,n);case 4:return a=t.sent,Uc(i,r,null),Fc(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),t.next=10,Wc(i,a);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,Ar(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])}))),Dc.apply(this,arguments)}function Rc(t,e,n){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){var r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=$i(e),t.prev=1,t.next=4,function(t,e){var n=$i(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var i;return n.mutationQueue.lookupMutationBatch(t,e).next((function(e){return Yi(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)})).next((function(){return n.mutationQueue.performConsistencyCheck(t)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(t,i,e)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i)})).next((function(){return n.localDocuments.getDocuments(t,i)}))}))}(r.localStore,n);case 4:return a=t.sent,Uc(r,n,i),Fc(r,n),r.sharedClientState.updateMutationState(n,"rejected",i),t.next=10,Wc(r,a);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,Ar(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])}))),Pc.apply(this,arguments)}function Fc(t,e){(t.Da.get(e)||[]).forEach((function(t){t.resolve()})),t.Da.delete(e)}function Uc(t,e,n){var i=$i(t),r=i.ba[i.currentUser.toKey()];if(r){var a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.ba[i.currentUser.toKey()]=r}}function Vc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);var i,r=(0,l.Z)(t.ga.get(e));try{for(r.s();!(i=r.n()).done;){var a=i.value;t.fa.delete(a),n&&t.ma.Ma(a,n)}}catch(o){r.e(o)}finally{r.f()}t.ga.delete(e),t.isPrimaryClient&&t.Sa.Vr(e).forEach((function(e){t.Sa.containsKey(e)||Bc(t,e)}))}function Bc(t,e){t.pa.delete(e.path.canonicalString());var n=t.ya.get(e);null!==n&&(gl(t.remoteStore,n),t.ya=t.ya.remove(e),t.wa.delete(n),qc(t))}function zc(t,e,n){var i,r=(0,l.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;a instanceof pc?(t.Sa.addReference(a.key,e),jc(t,a)):a instanceof yc?(Ki("SyncEngine","Document no longer in limbo: "+a.key),t.Sa.removeReference(a.key,e),t.Sa.containsKey(a.key)||Bc(t,a.key)):Xi()}}catch(o){r.e(o)}finally{r.f()}}function jc(t,e){var n=e.key,i=n.path.canonicalString();t.ya.get(n)||t.pa.has(i)||(Ki("SyncEngine","New document in limbo: "+n),t.pa.add(i),qc(t))}function qc(t){for(;t.pa.size>0&&t.ya.size<t.maxConcurrentLimboResolutions;){var e=t.pa.values().next().value;t.pa.delete(e);var n=new wr(gr.fromString(e)),i=t.Ca.next();t.wa.set(i,new kc(n)),t.ya=t.ya.insert(n,i),ml(t.remoteStore,new lu(ro(to(n.path)),i,"TargetPurposeLimboResolution",Ir.ae))}}function Wc(t,e,n){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,h.Z)((0,c.Z)().mark((function t(e,n,i){var r,a,o,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=$i(e),a=[],o=[],s=[],t.t0=r.fa.isEmpty(),t.t0){t.next=9;break}return r.fa.forEach((function(t,e){s.push(r.Fa(e,n,i).then((function(t){if((t||i)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(e.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){a.push(t);var n=Mu.Ki(e.targetId,t);o.push(n)}})))})),t.next=6,Promise.all(s);case 6:return r.ma.u_(a),t.next=9,function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r,a,o,s,u,h,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=$i(e),t.prev=1,t.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Mr.forEach(n,(function(e){return Mr.forEach(e.qi,(function(n){return i.persistence.referenceDelegate.addReference(t,e.targetId,n)})).next((function(){return Mr.forEach(e.Qi,(function(n){return i.persistence.referenceDelegate.removeReference(t,e.targetId,n)}))}))}))}));case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(1),Lr(t.t0)){t.next=10;break}throw t.t0;case 10:Ki("LocalStore","Failed to update sequence numbers: "+t.t0);case 11:r=(0,l.Z)(n);try{for(r.s();!(a=r.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=i.ns.get(s),h=u.snapshotVersion,f=u.withLastLimboFreeSnapshotVersion(h),i.ns=i.ns.insert(s,f))}catch(c){r.e(c)}finally{r.f()}case 13:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()(r.localStore,o);case 9:case"end":return t.stop()}}),t)}))),Hc.apply(this,arguments)}function Kc(t,e){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=$i(e)).currentUser.isEqual(n)){t.next=11;break}return Ki("SyncEngine","User change. New user:",n.toKey()),t.next=5,Ru(i.localStore,n);case 5:return r=t.sent,i.currentUser=n,function(t,e){t.Da.forEach((function(t){t.forEach((function(t){t.reject(new er(tr.CANCELLED,e))}))})),t.Da.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(n,r.removedBatchIds,r.addedBatchIds),t.next=11,Wc(i,r.us);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qc(t,e){var n=$i(t),i=n.wa.get(e);if(i&&i.Va)return xo().add(i.key);var r=xo(),a=n.ga.get(e);if(!a)return r;var o,s=(0,l.Z)(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.fa.get(u);r=r.unionWith(c.view.ca)}}catch(h){s.e(h)}finally{s.f()}return r}function Jc(t){var e=$i(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ac.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lc.bind(null,e),e.ma.u_=hc.bind(null,e.eventManager),e.ma.Ma=fc.bind(null,e.eventManager),e}function Xc(t){var e=$i(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rc.bind(null,e),e}var Yc=function(){function t(){(0,p.Z)(this,t),this.synchronizeTabs=!1}return(0,y.Z)(t,[{key:"initialize",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.serializer=al(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),t.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(t,e){return null}},{key:"createIndexBackfillerScheduler",value:function(t,e){return null}},{key:"createLocalStore",value:function(t){return Du(this.persistence,new Iu,t.initialUser,this.serializer)}},{key:"createPersistence",value:function(t){return new Zu(Ou.Hr,this.serializer)}},{key:"createSharedClientState",value:function(t){return new Qu}},{key:"terminate",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),t.next=3,this.sharedClientState.shutdown();case 3:return t.next=5,this.persistence.shutdown();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),$c=function(){function t(){(0,p.Z)(this,t)}return(0,y.Z)(t,[{key:"initialize",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.localStore,t.t0){t.next=12;break}return this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Mc(i.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Kc.bind(null,this.syncEngine),t.next=12,Jl(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createEventManager",value:function(t){return new oc}},{key:"createDatastore",value:function(t){var e=al(t.databaseInfo.databaseId),n=function(t){return new il(t)}(t.databaseInfo);return function(t,e,n,i){return new cl(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}},{key:"createRemoteStore",value:function(t){var e=this;return function(t,e,n,i,r){return new fl(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(function(t){return Mc(e.syncEngine,t,0)}),Xu.C()?new Xu:new Ju)}},{key:"createSyncEngine",value:function(t,e){return function(t,e,n,i,r,a,o){var s=new bc(t,e,n,i,r,a);return o&&(s.va=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}},{key:"terminate",value:function(){return function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=$i(e),Ki("RemoteStore","RemoteStore shutting down."),n.v_.add(5),t.next=5,pl(n);case 5:n.M_.shutdown(),n.x_.set("Unknown");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(this.remoteStore)}}]),t}();var th=function(){function t(e){(0,p.Z)(this,t),this.observer=e,this.muted=!1}return(0,y.Z)(t,[{key:"next",value:function(t){this.observer.next&&this.Na(this.observer.next,t)}},{key:"error",value:function(t){this.observer.error?this.Na(this.observer.error,t):Gi("Uncaught Error in snapshot listener:",t.toString())}},{key:"Ba",value:function(){this.muted=!0}},{key:"Na",value:function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)}}]),t}(),eh=function(){function t(e,n,i,r){var a=this;(0,p.Z)(this,t),this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ji.UNAUTHENTICATED,this.clientId=fr.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ki("FirestoreClient","Received user=",e.uid),t.next=3,a.authCredentialListener(e);case 3:a.user=e;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.appCheckCredentials.start(i,(function(t){return Ki("FirestoreClient","Received new app check token=",t),a.appCheckCredentialListener(t,a.user)}))}return(0,y.Z)(t,[{key:"getConfiguration",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(t){this.authCredentialListener=t}},{key:"setAppCheckTokenChangeListener",value:function(t){this.appCheckCredentialListener=t}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new er(tr.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,h.Z)((0,c.Z)().mark((function n(){var i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=t._onlineComponents,!n.t0){n.next=5;break}return n.next=5,t._onlineComponents.terminate();case 5:if(n.t1=t._offlineComponents,!n.t1){n.next=9;break}return n.next=9,t._offlineComponents.terminate();case 9:t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),i=ec(n.t2,"Failed to shutdown persistence"),e.reject(i);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),e.promise}}]),t}();function nh(t,e){return ih.apply(this,arguments)}function ih(){return ih=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.asyncQueue.verifyOperationInProgress(),Ki("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,e.getConfiguration();case 3:return i=t.sent,t.next=6,n.initialize(i);case 6:r=i.initialUser,e.setCredentialChangeListener(function(){var t=(0,h.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r.isEqual(e),t.t0){t.next=5;break}return t.next=4,Ru(n.localStore,e);case 4:r=e;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e._offlineComponents=n;case 8:case"end":return t.stop()}}),t)}))),ih.apply(this,arguments)}function rh(t,e){return ah.apply(this,arguments)}function ah(){return ah=(0,h.Z)((0,c.Z)().mark((function t(e,n){var i,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.asyncQueue.verifyOperationInProgress(),t.next=3,sh(e);case 3:return i=t.sent,Ki("FirestoreClient","Initializing OnlineComponentProvider"),t.next=7,e.getConfiguration();case 7:return r=t.sent,t.next=10,n.initialize(i,r);case 10:e.setCredentialChangeListener((function(t){return Gl(n.remoteStore,t)})),e.setAppCheckTokenChangeListener((function(t,e){return Gl(n.remoteStore,e)})),e._onlineComponents=n;case 13:case"end":return t.stop()}}),t)}))),ah.apply(this,arguments)}function oh(t){return"FirebaseError"===t.name?t.code===tr.FAILED_PRECONDITION||t.code===tr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function sh(t){return uh.apply(this,arguments)}function uh(){return(uh=(0,h.Z)((0,c.Z)().mark((function t(e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._offlineComponents){t.next=21;break}if(!e._uninitializedComponentsProvider){t.next=18;break}return Ki("FirestoreClient","Using user provided OfflineComponentProvider"),t.prev=3,t.next=6,nh(e,e._uninitializedComponentsProvider._offline);case 6:t.next=16;break;case 8:if(t.prev=8,t.t0=t.catch(3),oh(n=t.t0)){t.next=13;break}throw n;case 13:return Qi("Error using user provided cache. Falling back to memory cache: "+n),t.next=16,nh(e,new Yc);case 16:t.next=21;break;case 18:return Ki("FirestoreClient","Using default OfflineComponentProvider"),t.next=21,nh(e,new Yc);case 21:return t.abrupt("return",e._offlineComponents);case 22:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}function lh(t){return ch.apply(this,arguments)}function ch(){return(ch=(0,h.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e._onlineComponents,t.t0){t.next=11;break}if(!e._uninitializedComponentsProvider){t.next=8;break}return Ki("FirestoreClient","Using user provided OnlineComponentProvider"),t.next=6,rh(e,e._uninitializedComponentsProvider._online);case 6:t.next=11;break;case 8:return Ki("FirestoreClient","Using default OnlineComponentProvider"),t.next=11,rh(e,new $c);case 11:return t.abrupt("return",e._onlineComponents);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function hh(t){return lh(t).then((function(t){return t.syncEngine}))}function fh(t){return vh.apply(this,arguments)}function vh(){return(vh=(0,h.Z)((0,c.Z)().mark((function t(e){var n,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lh(e);case 2:return n=t.sent,i=n.eventManager,t.abrupt("return",(i.onListen=wc.bind(null,n.syncEngine),i.onUnlisten=Cc.bind(null,n.syncEngine),i));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dh(t){var e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}var ph=new Map;function yh(t,e,n){if(!n)throw new er(tr.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function mh(t){if(!wr.isDocumentKey(t))throw new er(tr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function gh(t){if(wr.isDocumentKey(t))throw new er(tr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function kh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}return"function"==typeof t?"a function":Xi()}function bh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new er(tr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=kh(t);throw new er(tr.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}return t}function wh(t,e){if(e<=0)throw new er(tr.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(e,"."))}var _h=function(){function t(e){var n,i;if((0,p.Z)(this,t),void 0===e.host){if(void 0!==e.ssl)throw new er(tr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new er(tr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new er(tr.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dh(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new er(tr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new er(tr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new er(tr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}return(0,y.Z)(t,[{key:"isEqual",value:function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}]),t}(),Eh=function(){function t(e,n,i,r){(0,p.Z)(this,t),this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _h({}),this._settingsFrozen=!1}return(0,y.Z)(t,[{key:"app",get:function(){if(!this._app)throw new er(tr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(t){if(this._settingsFrozen)throw new er(tr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _h(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new rr;switch(t.type){case"firstParty":return new ur(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new er(tr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(t){var e=ph.get(t);e&&(Ki("ComponentProvider","Removing Datastore"),ph.delete(t),e.terminate())}(this),Promise.resolve()}}]),t}();function Sh(t,e,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(t=bh(t,Eh))._getSettings(),o="".concat(e,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){var s,u;if("string"==typeof r.mockUserToken)s=r.mockUserToken,u=ji.MOCK_USER;else{s=(0,b.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new er(tr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ji(l)}t._authCredentials=new ar(new ir(s,u))}}var Ch=function(){function t(e,n,i){(0,p.Z)(this,t),this.converter=n,this._query=i,this.type="query",this.firestore=e}return(0,y.Z)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),Th=function(){function t(e,n,i){(0,p.Z)(this,t),this.converter=n,this._key=i,this.type="document",this.firestore=e}return(0,y.Z)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new xh(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),xh=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r){var a;return(0,p.Z)(this,n),(a=e.call(this,t,i,to(r)))._path=r,a.type="collection",a}return(0,y.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Th(this.firestore,null,new wr(t))}},{key:"withConverter",value:function(t){return new n(this.firestore,t,this._path)}}]),n}(Ch);function Zh(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=(0,b.m9)(t),yh("collection","path",e),t instanceof Eh){var a=gr.fromString.apply(gr,[e].concat(i));return gh(a),new xh(t,null,a)}if(!(t instanceof Th||t instanceof xh))throw new er(tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t._path.child(gr.fromString.apply(gr,[e].concat(i)));return gh(o),new xh(t.firestore,null,o)}var Ah=function(){function t(){var e=this;(0,p.Z)(this,t),this.Ya=Promise.resolve(),this.Za=[],this.Xa=!1,this.eu=[],this.tu=null,this.nu=!1,this.ru=!1,this.iu=[],this.jo=new ol(this,"async_queue_retry"),this.su=function(){var t=rl();t&&Ki("AsyncQueue","Visibility state changed to "+t.visibilityState),e.jo.Ko()};var n=rl();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.su)}return(0,y.Z)(t,[{key:"isShuttingDown",get:function(){return this.Xa}},{key:"enqueueAndForget",value:function(t){this.enqueue(t)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(t){this.ou(),this._u(t)}},{key:"enterRestrictedMode",value:function(t){if(!this.Xa){this.Xa=!0,this.ru=t||!1;var e=rl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.su)}}},{key:"enqueue",value:function(t){var e=this;if(this.ou(),this.Xa)return new Promise((function(){}));var n=new nr;return this._u((function(){return e.Xa&&e.ru?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(t){var e=this;this.enqueueAndForget((function(){return e.Za.push(t),e.au()}))}},{key:"au",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(){var e=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.Za.length){t.next=14;break}return t.prev=1,t.next=4,this.Za[0]();case 4:this.Za.shift(),this.jo.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),Lr(t.t0)){t.next=12;break}throw t.t0;case 12:Ki("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:this.Za.length>0&&this.jo.qo((function(){return e.au()}));case 14:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"_u",value:function(t){var e=this,n=this.Ya.then((function(){return e.nu=!0,t().catch((function(t){e.tu=t,e.nu=!1;var n=function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Gi("INTERNAL UNHANDLED ERROR: ",n),t})).then((function(t){return e.nu=!1,t}))}));return this.Ya=n,n}},{key:"enqueueAfterDelay",value:function(t,e,n){var i=this;this.ou(),this.iu.indexOf(t)>-1&&(e=0);var r=tc.createAndSchedule(this,t,e,n,(function(t){return i.uu(t)}));return this.eu.push(r),r}},{key:"ou",value:function(){this.tu&&Xi()}},{key:"verifyOperationInProgress",value:function(){}},{key:"cu",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.Ya,t.next=3,e;case 3:if(e!==this.Ya){t.next=0;break}case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"lu",value:function(t){var e,n=(0,l.Z)(this.eu);try{for(n.s();!(e=n.n()).done;){if(e.value.timerId===t)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"hu",value:function(t){var e=this;return this.cu().then((function(){e.eu.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));var n,i=(0,l.Z)(e.eu);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.skipDelay(),"all"!==t&&r.timerId===t)break}}catch(a){i.e(a)}finally{i.f()}return e.cu()}))}},{key:"Pu",value:function(t){this.iu.push(t)}},{key:"uu",value:function(t){var e=this.eu.indexOf(t);this.eu.splice(e,1)}}]),t}();function Oh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;var n,i=t,r=(0,l.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in i&&"function"==typeof i[a])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(t,["next","error","complete"])}var Mh=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r,a){var o;return(0,p.Z)(this,n),(o=e.call(this,t,i,r,a)).type="firestore",o._queue=new Ah,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return(0,y.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||Nh(this),this._firestoreClient.terminate()}}]),n}(Eh);function Lh(t,e){var n="object"==typeof t?t:(0,m.Mq)(),i="string"==typeof t?t:e||"(default)",r=(0,m.qX)(n,"firestore").getImmediate({identifier:i});if(!r._initialized){var a=(0,b.P0)("firestore");a&&Sh.apply(void 0,[r].concat((0,d.Z)(a)))}return r}function Ih(t){return t._firestoreClient||Nh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Nh(t){var e,n,i,r=t._freezeSettings(),a=function(t,e,n,i){return new ra(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,dh(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new eh(t._authCredentials,t._appCheckCredentials,t._queue,a),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Dh=function(){function t(e){(0,p.Z)(this,t),this._byteString=e}return(0,y.Z)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(t){return this._byteString.isEqual(t._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(Jr.fromBase64String(e))}catch(e){throw new er(tr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}},{key:"fromUint8Array",value:function(e){return new t(Jr.fromUint8Array(e))}}]),t}(),Rh=function(){function t(){(0,p.Z)(this,t);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=0;r<n.length;++r)if(0===n[r].length)throw new er(tr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(n)}return(0,y.Z)(t,[{key:"isEqual",value:function(t){return this._internalPath.isEqual(t._internalPath)}}]),t}();var Ph=(0,y.Z)((function t(e){(0,p.Z)(this,t),this._methodName=e})),Fh=function(){function t(e,n){if((0,p.Z)(this,t),!isFinite(e)||e<-90||e>90)throw new er(tr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new er(tr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}return(0,y.Z)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(t){return this._lat===t._lat&&this._long===t._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}}]),t}(),Uh=/^__.*__$/,Vh=function(){function t(e,n,i){(0,p.Z)(this,t),this.data=e,this.fieldMask=n,this.fieldTransforms=i}return(0,y.Z)(t,[{key:"toMutation",value:function(t,e){return null!==this.fieldMask?new ns(t,this.data,this.fieldMask,e,this.fieldTransforms):new es(t,this.data,e,this.fieldTransforms)}}]),t}();function Bh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xi()}}var zh=function(){function t(e,n,i,r,a,o){(0,p.Z)(this,t),this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===a&&this.Iu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,y.Z)(t,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"du",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Eu({path:n,Au:!1});return i.Ru(t),i}},{key:"Vu",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Eu({path:n,Au:!1});return i.Iu(),i}},{key:"mu",value:function(t){return this.Eu({path:void 0,Au:!0})}},{key:"fu",value:function(t){return ef(t,this.settings.methodName,this.settings.gu||!1,this.path,this.settings.pu)}},{key:"contains",value:function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))}},{key:"Iu",value:function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ru(this.path.get(t))}},{key:"Ru",value:function(t){if(0===t.length)throw this.fu("Document fields must not be empty");if(Bh(this.Tu)&&Uh.test(t))throw this.fu('Document fields cannot begin and end with "__"')}}]),t}(),jh=function(){function t(e,n,i){(0,p.Z)(this,t),this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||al(e)}return(0,y.Z)(t,[{key:"yu",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new zh({Tu:t,methodName:e,pu:n,path:br.emptyPath(),Au:!1,gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),t}();function qh(t){var e=t._freezeSettings(),n=al(t._databaseId);return new jh(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wh(t,e,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=t.yu(a.merge||a.mergeFields?2:0,e,n,r);Xh("Data must be an object, but it was:",o,i);var s,u,c=Qh(i,o);if(a.merge)s=new Gr(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var h,f=[],v=(0,l.Z)(a.mergeFields);try{for(v.s();!(h=v.n()).done;){var d=Yh(e,h.value,n);if(!o.contains(d))throw new er(tr.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));nf(f,d)||f.push(d)}}catch(p){v.e(p)}finally{v.f()}s=new Gr(f),u=o.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=o.fieldTransforms;return new Vh(new _a(c),s,u)}var Hh=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n,[{key:"_toFieldTransform",value:function(t){return new Wo(t.path,new Po)}},{key:"isEqual",value:function(t){return t instanceof n}}]),n}(Ph);function Kh(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Gh(n,t.yu(i?4:3,e))}function Gh(t,e){if(Jh(t=(0,b.m9)(t)))return Xh("Unsupported field value:",e,t),Qh(t,e);if(t instanceof Ph)return function(t,e){if(!Bh(e.Tu))throw e.fu("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.fu("".concat(t._methodName,"() is not currently supported inside arrays"));var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Au&&4!==e.Tu)throw e.fu("Nested arrays are not supported");return function(t,e){var n,i=[],r=0,a=(0,l.Z)(t);try{for(a.s();!(n=a.n()).done;){var o=Gh(n.value,e.mu(r));null==o&&(o={nullValue:"NULL_VALUE"}),i.push(o),r++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:i}}}(t,e)}return function(t,e){if(null===(t=(0,b.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Lo(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=pr.fromDate(t);return{timestampValue:Ps(e.serializer,n)}}if(t instanceof pr){var i=new pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ps(e.serializer,i)}}if(t instanceof Fh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dh)return{bytesValue:Fs(e.serializer,t._byteString)};if(t instanceof Th){var r=e.databaseId,a=t.firestore._databaseId;if(!a.isEqual(r))throw e.fu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(r.projectId,"/").concat(r.database));return{referenceValue:Bs(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.fu("Unsupported field value: ".concat(kh(t)))}(t,e)}function Qh(t,e){var n={};return zr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(t,(function(t,i){var r=Gh(i,e.du(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Jh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pr||t instanceof Fh||t instanceof Dh||t instanceof Th||t instanceof Ph)}function Xh(t,e,n){if(!Jh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var i=kh(n);throw"an object"===i?e.fu(t+" a custom object"):e.fu(t+" "+i)}}function Yh(t,e,n){if((e=(0,b.m9)(e))instanceof Rh)return e._internalPath;if("string"==typeof e)return tf(t,e);throw ef("Field path arguments must be of type string or ",t,!1,void 0,n)}var $h=new RegExp("[~\\*/\\[\\]]");function tf(t,e,n){if(e.search($h)>=0)throw ef("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return(0,r.Z)(Rh,(0,d.Z)(e.split(".")))._internalPath}catch(I){throw ef("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function ef(t,e,n,i,r){var a=i&&!i.isEmpty(),o=void 0!==r,s="Function ".concat(e,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(i)),o&&(u+=" in document ".concat(r)),u+=")"),new er(tr.INVALID_ARGUMENT,s+t+u)}function nf(t,e){return t.some((function(t){return t.isEqual(e)}))}var rf=function(){function t(e,n,i,r,a){(0,p.Z)(this,t),this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}return(0,y.Z)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Th(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var t=new af(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(t){if(this._document){var e=this._document.data.field(of("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}]),t}(),af=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n,[{key:"data",value:function(){return(0,a.Z)((0,o.Z)(n.prototype),"data",this).call(this)}}]),n}(rf);function of(t,e){return"string"==typeof e?tf(t,e):e instanceof Rh?e._internalPath:e._delegate._internalPath}function sf(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new er(tr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uf=(0,y.Z)((function t(){(0,p.Z)(this,t)})),lf=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n)}(uf);function cf(t,e){for(var n=[],i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];e instanceof uf&&n.push(e),function(t){var e=t.filter((function(t){return t instanceof ff})).length,n=t.filter((function(t){return t instanceof hf})).length;if(e>1||e>0&&n>0)throw new er(tr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(r));var o,s=(0,l.Z)(n);try{for(s.s();!(o=s.n()).done;){t=o.value._apply(t)}}catch(u){s.e(u)}finally{s.f()}return t}var hf=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r){var a;return(0,p.Z)(this,n),(a=e.call(this))._field=t,a._op=i,a._value=r,a.type="where",a}return(0,y.Z)(n,[{key:"_apply",value:function(t){var e=this._parse(t);return _f(t._query,e),new Ch(t.firestore,t.converter,oo(t._query,e))}},{key:"_parse",value:function(t){var e=qh(t.firestore),n=function(t,e,n,i,r,a,o){var s;if(r.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new er(tr.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){wf(o,a);var u,c=[],h=(0,l.Z)(o);try{for(h.s();!(u=h.n()).done;){var f=u.value;c.push(bf(i,t,f))}}catch(v){h.e(v)}finally{h.f()}s={arrayValue:{values:c}}}else s=bf(i,t,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||wf(o,a),s=Kh(n,e,o,"in"===a||"not-in"===a);return Ma.create(r,a,s)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(t,e,i){return new n(t,e,i)}}]),n}(lf);var ff=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this)).type=t,r._queryConstraints=i,r}return(0,y.Z)(n,[{key:"_parse",value:function(t){var e=this._queryConstraints.map((function(e){return e._parse(t)})).filter((function(t){return t.getFilters().length>0}));return 1===e.length?e[0]:La.create(e,this._getOperator())}},{key:"_apply",value:function(t){var e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){var n,i=t,r=e.getFlattenedFilters(),a=(0,l.Z)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;_f(i,o),i=oo(i,o)}}catch(s){a.e(s)}finally{a.f()}}(t._query,e),new Ch(t.firestore,t.converter,oo(t._query,e)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(t,e){return new n(t,e)}}]),n}(uf);var vf=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i){var r;return(0,p.Z)(this,n),(r=e.call(this))._field=t,r._direction=i,r.type="orderBy",r}return(0,y.Z)(n,[{key:"_apply",value:function(t){var e=function(t,e,n){if(null!==t.startAt)throw new er(tr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new er(tr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Za(e,n)}(t._query,this._field,this._direction);return new Ch(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ya(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}],[{key:"_create",value:function(t,e){return new n(t,e)}}]),n}(lf);function df(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=of("orderBy",t);return vf._create(n,e)}var pf=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r){var a;return(0,p.Z)(this,n),(a=e.call(this)).type=t,a._limit=i,a._limitType=r,a}return(0,y.Z)(n,[{key:"_apply",value:function(t){return new Ch(t.firestore,t.converter,so(t._query,this._limit,this._limitType))}}],[{key:"_create",value:function(t,e,i){return new n(t,e,i)}}]),n}(lf);function yf(t){return wh("limit",t),pf._create("limit",t,"F")}var mf=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r){var a;return(0,p.Z)(this,n),(a=e.call(this)).type=t,a._docOrFields=i,a._inclusive=r,a}return(0,y.Z)(n,[{key:"_apply",value:function(t){var e=kf(t,this.type,this._docOrFields,this._inclusive);return new Ch(t.firestore,t.converter,function(t,e){return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}],[{key:"_create",value:function(t,e,i){return new n(t,e,i)}}]),n}(lf);function gf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return mf._create("startAfter",e,!1)}function kf(t,e,n,i){if(n[0]=(0,b.m9)(n[0]),n[0]instanceof rf)return function(t,e,n,i,r){if(!i)throw new er(tr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=(0,l.Z)(io(t));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(da(e,i.key));else{var c=i.data.field(u.field);if(ea(c))throw new er(tr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new er(tr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(h,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Ca(o,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);var r=qh(t.firestore);return function(t,e,n,i,r,a){var o=t.explicitOrderBy;if(r.length>o.length)throw new er(tr.INVALID_ARGUMENT,"Too many arguments provided to ".concat(i,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<r.length;u++){var l=r[u];if(o[u].field.isKeyField()){if("string"!=typeof l)throw new er(tr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(i,"(), but got a ").concat(typeof l));if(!no(t)&&-1!==l.indexOf("/"))throw new er(tr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(i,"() must be a plain document ID, but '").concat(l,"' contains a slash."));var c=t.path.child(gr.fromString(l));if(!wr.isDocumentKey(c))throw new er(tr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(i,"() must result in a valid document path, but '").concat(c,"' is not because it contains an odd number of segments."));var h=new wr(c);s.push(da(e,h))}else{var f=Kh(n,i,l);s.push(f)}}return new Ca(s,a)}(t._query,t.firestore._databaseId,r,e,n,i)}function bf(t,e,n){if("string"==typeof(n=(0,b.m9)(n))){if(""===n)throw new er(tr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!no(e)&&-1!==n.indexOf("/"))throw new er(tr.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var i=e.path.child(gr.fromString(n));if(!wr.isDocumentKey(i))throw new er(tr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return da(t,new wr(i))}if(n instanceof Th)return da(t,n._key);throw new er(tr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(kh(n),"."))}function wf(t,e){if(!Array.isArray(t)||0===t.length)throw new er(tr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function _f(t,e){var n=function(t,e){var n,i=(0,l.Z)(t);try{for(i.s();!(n=i.n()).done;){var r,a=n.value,o=(0,l.Z)(a.getFlattenedFilters());try{for(o.s();!(r=o.n()).done;){var s=r.value;if(e.indexOf(s.op)>=0)return s.op}}catch(u){o.e(u)}finally{o.f()}}}catch(u){i.e(u)}finally{i.f()}return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new er(tr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new er(tr.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var Ef=function(){function t(){(0,p.Z)(this,t)}return(0,y.Z)(t,[{key:"convertValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $r(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ta(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Xi()}}},{key:"convertObject",value:function(t,e){return this.convertObjectMap(t.fields,e)}},{key:"convertObjectMap",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",i={};return Br(t,(function(t,r){i[t]=e.convertValue(r,n)})),i}},{key:"convertGeoPoint",value:function(t){return new Fh($r(t.latitude),$r(t.longitude))}},{key:"convertArray",value:function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))}},{key:"convertServerTimestamp",value:function(t,e){switch(e){case"previous":var n=na(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ia(t));default:return null}}},{key:"convertTimestamp",value:function(t){var e=Yr(t);return new pr(e.seconds,e.nanos)}},{key:"convertDocumentKey",value:function(t,e){var n=gr.fromString(t);Yi(uu(n));var i=new aa(n.get(1),n.get(3)),r=new wr(n.popFirst(5));return i.isEqual(e)||Gi("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}]),t}();function Sf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Cf=function(){function t(e,n){(0,p.Z)(this,t),this.hasPendingWrites=e,this.fromCache=n}return(0,y.Z)(t,[{key:"isEqual",value:function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}]),t}(),Tf=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t,i,r,a,o,s){var u;return(0,p.Z)(this,n),(u=e.call(this,t,i,r,a,s))._firestore=t,u._firestoreImpl=t,u.metadata=o,u}return(0,y.Z)(n,[{key:"exists",value:function(){return(0,a.Z)((0,o.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var e=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(of("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}]),n}(rf),xf=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)((0,o.Z)(n.prototype),"data",this).call(this,t)}}]),n}(Tf),Zf=function(){function t(e,n,i,r){(0,p.Z)(this,t),this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Cf(r.hasPendingWrites,r.fromCache),this.query=i}return(0,y.Z)(t,[{key:"docs",get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(t,e){var n=this;this._snapshot.docs.forEach((function(i){t.call(e,new xf(n._firestore,n._userDataWriter,i.key,i,new Cf(n._snapshot.mutatedKeys.has(i.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new er(tr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var i=new xf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Cf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:n++}}))}var i=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new xf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Cf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),r=-1,a=-1;return 0!==e.type&&(r=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(a=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:Af(e.type),doc:n,oldIndex:r,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),t}();function Af(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xi()}}var Of=function(t){(0,f.Z)(n,t);var e=(0,v.Z)(n);function n(t){var i;return(0,p.Z)(this,n),(i=e.call(this)).firestore=t,i}return(0,y.Z)(n,[{key:"convertBytes",value:function(t){return new Dh(t)}},{key:"convertReference",value:function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Th(this.firestore,null,e)}}]),n}(Ef);function Mf(t,e){var n=bh(t.firestore,Mh),i=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=(0,b.m9)(t),1===arguments.length&&(e=fr.V()),yh("doc","path",e),t instanceof Eh){var a=gr.fromString.apply(gr,[e].concat(i));return mh(a),new Th(t,null,new wr(a))}if(!(t instanceof Th||t instanceof xh))throw new er(tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t._path.child(gr.fromString.apply(gr,[e].concat(i)));return mh(o),new Th(t.firestore,t instanceof xh?t.converter:null,new wr(o))}(t),r=Sf(t.converter,e);return If(n,[Wh(qh(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Ko.exists(!1))]).then((function(){return i}))}function Lf(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r,a,o;t=(0,b.m9)(t);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Oh(n[u])||(s=n[u],u++);var l,f,v,d={includeMetadataChanges:s.includeMetadataChanges};if(Oh(n[u])){var p=n[u];n[u]=null===(r=p.next)||void 0===r?void 0:r.bind(p),n[u+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[u+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(t instanceof Th)f=bh(t.firestore,Mh),v=to(t._key.path),l={next:function(e){n[u]&&n[u](Nf(f,t,e))},error:n[u+1],complete:n[u+2]};else{var y=bh(t,Ch);f=bh(y.firestore,Mh),v=y._query;var m=new Of(f);l={next:function(t){n[u]&&n[u](new Zf(f,m,y,t))},error:n[u+1],complete:n[u+2]},sf(t._query)}return function(t,e,n,i){var r=new th(i),a=new dc(e,r,n);return t.asyncQueue.enqueueAndForget((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=sc,e.next=3,fh(t);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))),function(){r.Ba(),t.asyncQueue.enqueueAndForget((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=lc,e.next=3,fh(t);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)}))))}}(Ih(f),v,d,l)}function If(t,e){return function(t,e){var n=new nr;return t.asyncQueue.enqueueAndForget((0,h.Z)((0,c.Z)().mark((function i(){return(0,c.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=xc,i.next=3,hh(t);case 3:return i.t1=i.sent,i.t2=e,i.t3=n,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3));case 7:case"end":return i.stop()}}),i)})))),n.promise}(Ih(t),e)}function Nf(t,e,n){var i=n.docs.get(e._key),r=new Of(t);return new Tf(t,r,e._key,i,new Cf(n.hasPendingWrites,n.fromCache),e.converter)}function Df(){return new Hh("serverTimestamp")}new WeakMap;!function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){qi=t}(m.Jn),(0,m.Xd)(new g.wA("firestore",(function(t,n){var i=n.instanceIdentifier,r=n.options,a=t.getProvider("app").getImmediate(),o=new Mh(new or(t.getProvider("auth-internal")),new cr(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new er(tr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aa(t.options.projectId,e)}(a,i),a);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),(0,m.KN)(zi,"4.3.0",t),(0,m.KN)(zi,"4.3.0","esm2017")}()},63:function(t,e,n){"use strict";n.d(e,{Mr:function(){return Wn},rM:function(){return kt},C2:function(){return Rr}});var i=n(9439),r=n(1752),a=n(1120),o=n(7762),s=n(7326),u=n(136),l=n(7277),c=n(3433),h=n(5671),f=n(3144);function v(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function d(t,e){return t.width===e.width&&t.height===e.height}var p=function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,n={next:t};return this._observers.push(n),{unsubscribe:function(){e._observers=e._observers.filter((function(t){return t!==n}))}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach((function(e){return e.next(t._window.devicePixelRatio)})),this._reinstallResolutionListener()},t}();var y=function(){function t(t,e,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=v({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!==e&&void 0!==e?e:function(t){return t},this._allowResizeObserver=null===(i=null===n||void 0===n?void 0:n.allowResizeObserver)||void 0===i||i,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw new Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(e=this._devicePixelRatioObservable)||void 0===e||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return v({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=v(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(e){return e!==t}))},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(e){return e!==t}))},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;d(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var n=this;this._bitmapSizeChangedListeners.forEach((function(i){return i.call(n,t,e)}))},t.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,n=v(this._transformBitmapSize(t,this._canvasElementClientSize)),i=d(this.bitmapSize,n)?null:n;null===e&&null===i||null!==e&&null!==i&&d(e,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(e,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var n=this;this._suggestedBitmapSizeChangedListeners.forEach((function(i){return i.call(n,t,e)}))},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise((function(t){var e=new ResizeObserver((function(n){t(n.every((function(t){return"devicePixelContentBoxSize"in t}))),e.disconnect()}));e.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=m(this._canvasElement);if(null===e)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(t){return new p(t)}(e),this._devicePixelRatioObservable.subscribe((function(){return t._invalidateBitmapSize()})),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var t,e;if(null!==this._canvasElement){var n=m(this._canvasElement);if(null!==n){var i=null!==(e=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==e?e:n.devicePixelRatio,r=this._canvasElement.getClientRects(),a=void 0!==r[0]?function(t,e){return v({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}(r[0],i):v({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(e){var n=e.find((function(e){return e.target===t._canvasElement}));if(n&&n.devicePixelContentBoxSize&&n.devicePixelContentBoxSize[0]){var i=n.devicePixelContentBoxSize[0],r=v({width:i.inlineSize,height:i.blockSize});t._suggestNewBitmapSize(r)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function m(t){return t.ownerDocument.defaultView}var g=function(){function t(t,e,n){if(0===e.width||0===e.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===n.width||0===n.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function k(t,e){var n=t.canvasElementClientSize;if(0===n.width||0===n.height)return null;var i=t.bitmapSize;if(0===i.width||0===i.height)return null;var r=t.canvasElement.getContext("2d",e);return null===r?null:new g(r,n,i)}var b,w,_,E={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},S={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},C={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},T={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},x={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Z={color:"#26a69a",base:0},A={color:"#2196f3"},O={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function M(t,e){var n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function L(t,e,n,i){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(i,e+r),t.stroke()}function I(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function N(t){if(void 0===t)throw new Error("Value is undefined");return t}function D(t){if(null===t)throw new Error("Value is null");return t}function R(t){return D(N(t))}(_=b||(b={}))[_.Simple=0]="Simple",_[_.WithSteps=1]="WithSteps",_[_.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(w||(w={}));var P={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function F(t){return t<0?0:t>255?255:Math.round(t)||0}function U(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var V=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,B=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,z=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,j=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function q(t){(t=t.toLowerCase())in P&&(t=P[t]);var e=j.exec(t)||z.exec(t);if(e)return[F(parseInt(e[1],10)),F(parseInt(e[2],10)),F(parseInt(e[3],10)),U(e.length<5?1:parseFloat(e[4]))];var n=B.exec(t);if(n)return[F(parseInt(n[1],16)),F(parseInt(n[2],16)),F(parseInt(n[3],16)),1];var i=V.exec(t);if(i)return[F(17*parseInt(i[1],16)),F(17*parseInt(i[2],16)),F(17*parseInt(i[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function W(t){var e,n=q(t);return{t:"rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),i:(e=n,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")}}var H=function(){function t(){(0,h.Z)(this,t),this.h=[]}return(0,f.Z)(t,[{key:"l",value:function(t,e,n){var i={o:t,_:e,u:!0===n};this.h.push(i)}},{key:"v",value:function(t){var e=this.h.findIndex((function(e){return t===e.o}));e>-1&&this.h.splice(e,1)}},{key:"p",value:function(t){this.h=this.h.filter((function(e){return e._!==t}))}},{key:"m",value:function(t,e,n){var i=(0,c.Z)(this.h);this.h=this.h.filter((function(t){return!t.u})),i.forEach((function(i){return i.o(t,e,n)}))}},{key:"M",value:function(){return this.h.length>0}},{key:"S",value:function(){this.h=[]}}]),t}();function K(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];for(var s in o)void 0!==o[s]&&("object"!=typeof o[s]||void 0===t[s]||Array.isArray(o[s])?t[s]=o[s]:K(t[s],o[s]))}return t}function G(t){return"number"==typeof t&&isFinite(t)}function Q(t){return"number"==typeof t&&t%1==0}function J(t){return"string"==typeof t}function X(t){return"boolean"==typeof t}function Y(t){var e,n,i,r=t;if(!r||"object"!=typeof r)return r;for(n in e=Array.isArray(r)?[]:{},r)r.hasOwnProperty(n)&&(i=r[n],e[n]=i&&"object"==typeof i?Y(i):i);return e}function $(t){return null!==t}function tt(t){return null===t?void 0:t}var et="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function nt(t,e,n){return void 0===e&&(e=et),"".concat(n=void 0!==n?"".concat(n," "):"").concat(t,"px ").concat(e)}var it=function(){function t(e){(0,h.Z)(this,t),this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=e}return(0,f.Z)(t,[{key:"W",value:function(){var t=this.k,e=this.j(),n=this.H();return t.P===e&&t.D===n||(t.P=e,t.D=n,t.R=nt(e,n),t.L=2.5/12*e,t.V=t.L,t.B=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}},{key:"$",value:function(){return this.F.W().layout.textColor}},{key:"U",value:function(){return this.F.q()}},{key:"j",value:function(){return this.F.W().layout.fontSize}},{key:"H",value:function(){return this.F.W().layout.fontFamily}}]),t}(),rt=function(){function t(){(0,h.Z)(this,t),this.Y=[]}return(0,f.Z)(t,[{key:"X",value:function(t){this.Y=t}},{key:"K",value:function(t,e,n){this.Y.forEach((function(i){i.K(t,e,n)}))}}]),t}(),at=function(){function t(){(0,h.Z)(this,t)}return(0,f.Z)(t,[{key:"K",value:function(t,e,n){var i=this;t.useMediaCoordinateSpace((function(t){return i.Z(t,e,n)}))}},{key:"G",value:function(t,e,n){var i=this;t.useMediaCoordinateSpace((function(t){return i.J(t,e,n)}))}},{key:"J",value:function(t,e,n){}}]),t}(),ot=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).tt=null,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.tt=t}},{key:"Z",value:function(t){var e=t.context;if(null!==this.tt&&null!==this.tt.nt){var n=this.tt.nt,i=this.tt,r=function(t){e.beginPath();for(var r=n.to-1;r>=n.from;--r){var a=i.st[r];e.moveTo(a.et,a.rt),e.arc(a.et,a.rt,t,0,2*Math.PI)}e.fill()};i.ht>0&&(e.fillStyle=i.lt,r(i.ot+i.ht)),e.fillStyle=i._t,r(i.ot)}}}]),n}(at);function st(){return{st:[{et:0,rt:0,ut:0,ct:0}],_t:"",lt:"",ot:0,ht:0,nt:null}}var ut={from:0,to:1},lt=function(){function t(e,n){(0,h.Z)(this,t),this.dt=new rt,this.ft=[],this.vt=[],this.bt=!0,this.F=e,this.wt=n,this.dt.X(this.ft)}return(0,f.Z)(t,[{key:"gt",value:function(t){var e=this.F.Mt();e.length!==this.ft.length&&(this.vt=e.map(st),this.ft=this.vt.map((function(t){var e=new ot;return e.it(t),e})),this.dt.X(this.ft)),this.bt=!0}},{key:"xt",value:function(){return this.bt&&(this.St(),this.bt=!1),this.dt}},{key:"St",value:function(){var t=this,e=2===this.wt.W().mode,n=this.F.Mt(),i=this.wt.kt(),r=this.F.yt();n.forEach((function(n,a){var o,s=t.vt[a],u=n.Ct(i);if(!e&&null!==u&&n.Tt()){var l=D(n.Pt());s._t=u.Rt,s.ot=u.ot,s.ht=u.Dt,s.st[0].ct=u.ct,s.st[0].rt=n.At().Ot(u.ct,l.Vt),s.lt=null!==(o=u.Bt)&&void 0!==o?o:t.F.It(s.st[0].rt/n.At().zt()),s.st[0].ut=i,s.st[0].et=r.Et(i),s.nt=ut}else s.nt=null}))}}]),t}(),ct=function(){function t(){(0,h.Z)(this,t)}return(0,f.Z)(t,[{key:"K",value:function(t,e,n){var i=this;t.useBitmapCoordinateSpace((function(t){return i.Z(t,e,n)}))}}]),t}(),ht=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,h.Z)(this,n),(i=e.call(this)).Lt=t,i}return(0,f.Z)(n,[{key:"Z",value:function(t){var e=t.context,n=t.bitmapSize,i=t.horizontalPixelRatio,r=t.verticalPixelRatio;if(null!==this.Lt){var a=this.Lt.Nt.Tt,o=this.Lt.Ft.Tt;if(a||o){var s=Math.round(this.Lt.et*i),u=Math.round(this.Lt.rt*r);e.lineCap="butt",a&&s>=0&&(e.lineWidth=Math.floor(this.Lt.Nt.ht*i),e.strokeStyle=this.Lt.Nt.O,e.fillStyle=this.Lt.Nt.O,M(e,this.Lt.Nt.Wt),function(t,e,n,i){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(e+r,0),t.lineTo(e+r,i),t.stroke()}(e,s,0,n.height)),o&&u>=0&&(e.lineWidth=Math.floor(this.Lt.Ft.ht*r),e.strokeStyle=this.Lt.Ft.O,e.fillStyle=this.Lt.Ft.O,M(e,this.Lt.Ft.Wt),L(e,u,0,n.width))}}}}]),n}(ct),ft=function(){function t(e){(0,h.Z)(this,t),this.bt=!0,this.jt={Nt:{ht:1,Wt:0,O:"",Tt:!1},Ft:{ht:1,Wt:0,O:"",Tt:!1},et:0,rt:0},this.Ht=new ht(this.jt),this.$t=e}return(0,f.Z)(t,[{key:"gt",value:function(){this.bt=!0}},{key:"xt",value:function(){return this.bt&&(this.St(),this.bt=!1),this.Ht}},{key:"St",value:function(){var t=this.$t.Tt(),e=D(this.$t.Ut()),n=e.qt().W().crosshair,i=this.jt;if(2===n.mode)return i.Ft.Tt=!1,void(i.Nt.Tt=!1);i.Ft.Tt=t&&this.$t.Yt(e),i.Nt.Tt=t&&this.$t.Xt(),i.Ft.ht=n.horzLine.width,i.Ft.Wt=n.horzLine.style,i.Ft.O=n.horzLine.color,i.Nt.ht=n.vertLine.width,i.Nt.Wt=n.vertLine.style,i.Nt.O=n.vertLine.color,i.et=this.$t.Kt(),i.rt=this.$t.Zt()}}]),t}();function vt(t,e,n,i,r,a){t.fillRect(e+a,n,i-2*a,a),t.fillRect(e+a,n+r-a,i-2*a,a),t.fillRect(e,n,a,r),t.fillRect(e+i-a,n,a,r)}function dt(t,e,n,i,r,a){t.save(),t.globalCompositeOperation="copy",t.fillStyle=a,t.fillRect(e,n,i,r),t.restore()}function pt(t,e){return t.map((function(t){return 0===t?t:t+e}))}function yt(t,e,n,i,r,a){t.beginPath(),t.lineTo(e+i-a[1],n),0!==a[1]&&t.arcTo(e+i,n,e+i,n+a[1],a[1]),t.lineTo(e+i,n+r-a[2]),0!==a[2]&&t.arcTo(e+i,n+r,e+i-a[2],n+r,a[2]),t.lineTo(e+a[3],n+r),0!==a[3]&&t.arcTo(e,n+r,e,n+r-a[3],a[3]),t.lineTo(e,n+a[0]),0!==a[0]&&t.arcTo(e,n,e+a[0],n,a[0])}function mt(t,e,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,0,0,0],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";if(t.save(),!o||!u||u===a)return yt(t,e,n,i,r,s),t.fillStyle=a,t.fill(),void t.restore();var l=o/2;"transparent"!==a&&(yt(t,e+o,n+o,i-2*o,r-2*o,pt(s,-o)),t.fillStyle=a,t.fill()),"transparent"!==u&&(yt(t,e+l,n+l,i-o,r-o,pt(s,-l)),t.lineWidth=o,t.strokeStyle=u,t.closePath(),t.stroke()),t.restore()}function gt(t,e,n,i,r,a,o){t.save(),t.globalCompositeOperation="copy";var s=t.createLinearGradient(0,0,0,r);s.addColorStop(0,a),s.addColorStop(1,o),t.fillStyle=s,t.fillRect(e,n,i,r),t.restore()}var kt,bt=function(){function t(e,n){(0,h.Z)(this,t),this.it(e,n)}return(0,f.Z)(t,[{key:"it",value:function(t,e){this.Lt=t,this.Gt=e}},{key:"zt",value:function(t,e){return this.Lt.Tt?t.P+t.L+t.V:0}},{key:"K",value:function(t,e,n,i){var r=this;if(this.Lt.Tt&&0!==this.Lt.Jt.length){var a=this.Lt.O,o=this.Gt.t,s=t.useBitmapCoordinateSpace((function(t){var s=t.context;s.font=e.R;var u=r.Qt(t,e,n,i),l=u.ti,c=function(t,e){u.ii?mt(s,l.ni,l.si,l.ei,l.ri,t,l.hi,[l.ot,0,0,l.ot],e):mt(s,l.li,l.si,l.ei,l.ri,t,l.hi,[0,l.ot,l.ot,0],e)};return c(o,"transparent"),r.Lt.ai&&(s.fillStyle=a,s.fillRect(l.li,l.oi,l._i-l.li,l.ui)),c("transparent",o),r.Lt.ci&&(s.fillStyle=e.A,s.fillRect(u.ii?l.di-l.hi:0,l.si,l.hi,l.fi-l.si)),u}));t.useMediaCoordinateSpace((function(t){var n=t.context,i=s.vi;n.font=e.R,n.textAlign=s.ii?"right":"left",n.textBaseline="middle",n.fillStyle=a,n.fillText(r.Lt.Jt,i.pi,(i.si+i.fi)/2+i.mi)}))}}},{key:"Qt",value:function(t,e,n,i){var r,a=t.context,o=t.bitmapSize,s=t.mediaSize,u=t.horizontalPixelRatio,l=t.verticalPixelRatio,c=this.Lt.ai||!this.Lt.bi?e.T:0,h=this.Lt.wi?e.C:0,f=e.L+this.Gt.gi,v=e.V+this.Gt.Mi,d=e.B,p=e.I,y=this.Lt.Jt,m=e.P,g=n.xi(a,y),k=Math.ceil(n.Si(a,y)),b=m+f+v,w=e.C+d+p+k+c,_=Math.max(1,Math.floor(l)),E=Math.round(b*l);E%2!=_%2&&(E+=1);var S,C,T,x=h>0?Math.max(1,Math.floor(h*u)):0,Z=Math.round(w*u),A=Math.round(c*u),O=null!==(r=this.Gt.ki)&&void 0!==r?r:this.Gt.yi,M=Math.round(O*l)-Math.floor(.5*l),L=Math.floor(M+_/2-E/2),I=L+E,N="right"===i,D=N?s.width-h:h,R=N?o.width-x:x;return N?(S=R-Z,C=R-A,T=D-c-d-h):(S=R+Z,C=R+A,T=D+c+d),{ii:N,ti:{si:L,oi:M,fi:I,ei:Z,ri:E,ot:2*u,hi:x,ni:S,li:R,_i:C,ui:_,di:o.width},vi:{si:L/l,fi:I/l,pi:T,mi:g}}}}]),t}(),wt=function(){function t(e){(0,h.Z)(this,t),this.Ci={yi:0,t:"#000",Mi:0,gi:0},this.Ti={Jt:"",Tt:!1,ai:!0,bi:!1,Bt:"",O:"#FFF",ci:!1,wi:!1},this.Pi={Jt:"",Tt:!1,ai:!1,bi:!0,Bt:"",O:"#FFF",ci:!0,wi:!0},this.bt=!0,this.Ri=new(e||bt)(this.Ti,this.Ci),this.Di=new(e||bt)(this.Pi,this.Ci)}return(0,f.Z)(t,[{key:"Jt",value:function(){return this.Oi(),this.Ti.Jt}},{key:"yi",value:function(){return this.Oi(),this.Ci.yi}},{key:"gt",value:function(){this.bt=!0}},{key:"zt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.max(this.Ri.zt(t,e),this.Di.zt(t,e))}},{key:"Ai",value:function(){return this.Ci.ki||0}},{key:"Vi",value:function(t){this.Ci.ki=t}},{key:"Bi",value:function(){return this.Oi(),this.Ti.Tt||this.Pi.Tt}},{key:"Ii",value:function(){return this.Oi(),this.Ti.Tt}},{key:"xt",value:function(t){return this.Oi(),this.Ti.ai=this.Ti.ai&&t.W().ticksVisible,this.Pi.ai=this.Pi.ai&&t.W().ticksVisible,this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Ri}},{key:"zi",value:function(){return this.Oi(),this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Di}},{key:"Oi",value:function(){this.bt&&(this.Ti.ai=!0,this.Pi.ai=!1,this.Ei(this.Ti,this.Pi,this.Ci))}}]),t}(),_t=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i,r){var a;return(0,h.Z)(this,n),(a=e.call(this)).$t=t,a.Li=i,a.Ni=r,a}return(0,f.Z)(n,[{key:"Ei",value:function(t,e,n){if(t.Tt=!1,2!==this.$t.W().mode){var i=this.$t.W().horzLine;if(i.labelVisible){var r=this.Li.Pt();if(this.$t.Tt()&&!this.Li.Fi()&&null!==r){var a=W(i.labelBackgroundColor);n.t=a.t,t.O=a.i;var o=2/12*this.Li.P();n.gi=o,n.Mi=o;var s=this.Ni(this.Li);n.yi=s.yi,t.Jt=this.Li.Wi(s.ct,r),t.Tt=!0}}}}}]),n}(wt),Et=/[1-9]/g,St=function(){function t(){(0,h.Z)(this,t),this.Lt=null}return(0,f.Z)(t,[{key:"it",value:function(t){this.Lt=t}},{key:"K",value:function(t,e){var n=this;if(null!==this.Lt&&!1!==this.Lt.Tt&&0!==this.Lt.Jt.length){var i=t.useMediaCoordinateSpace((function(t){var i=t.context;return i.font=e.R,Math.round(e.ji.Si(i,D(n.Lt).Jt,Et))}));if(!(i<=0)){var r=e.Hi,a=i+2*r,o=a/2,s=this.Lt.$i,u=this.Lt.yi,l=Math.floor(u-o)+.5;l<0?(u+=Math.abs(0-l),l=Math.floor(u-o)+.5):l+a>s&&(u-=Math.abs(s-(l+a)),l=Math.floor(u-o)+.5);var c=l+a,h=Math.ceil(0+e.C+e.T+e.L+e.P+e.V);t.useBitmapCoordinateSpace((function(t){var i=t.context,r=t.horizontalPixelRatio,a=t.verticalPixelRatio,o=D(n.Lt);i.fillStyle=o.t;var s=Math.round(l*r),u=Math.round(0*a),f=Math.round(c*r),v=Math.round(h*a),d=Math.round(2*r);if(i.beginPath(),i.moveTo(s,u),i.lineTo(s,v-d),i.arcTo(s,v,s+d,v,d),i.lineTo(f-d,v),i.arcTo(f,v,f,v-d,d),i.lineTo(f,u),i.fill(),o.ai){var p=Math.round(o.yi*r),y=u,m=Math.round((y+e.T)*a);i.fillStyle=o.O;var g=Math.max(1,Math.floor(r)),k=Math.floor(.5*r);i.fillRect(p-k,y,g,m-y)}})),t.useMediaCoordinateSpace((function(t){var i=t.context,a=D(n.Lt),o=0+e.C+e.T+e.L+e.P/2;i.font=e.R,i.textAlign="left",i.textBaseline="middle",i.fillStyle=a.O;var s=e.ji.xi(i,"Apr0");i.translate(l+r,o+s),i.fillText(a.Jt,0,0)}))}}}}]),t}(),Ct=function(){function t(e,n,i){(0,h.Z)(this,t),this.bt=!0,this.Ht=new St,this.jt={Tt:!1,t:"#4c525e",O:"white",Jt:"",$i:0,yi:NaN,ai:!0},this.wt=e,this.Ui=n,this.Ni=i}return(0,f.Z)(t,[{key:"gt",value:function(){this.bt=!0}},{key:"xt",value:function(){return this.bt&&(this.St(),this.bt=!1),this.Ht.it(this.jt),this.Ht}},{key:"St",value:function(){var t=this.jt;if(t.Tt=!1,2!==this.wt.W().mode){var e=this.wt.W().vertLine;if(e.labelVisible){var n=this.Ui.yt();if(!n.Fi()){t.$i=n.$i();var i=this.Ni();if(null!==i){t.yi=i.yi;var r=n.qi(this.wt.kt());t.Jt=n.Yi(D(r)),t.Tt=!0;var a=W(e.labelBackgroundColor);t.t=a.t,t.O=a.i,t.ai=n.W().ticksVisible}}}}}}]),t}(),Tt=function(){function t(){(0,h.Z)(this,t),this.Xi=null,this.Ki=0}return(0,f.Z)(t,[{key:"Zi",value:function(){return this.Ki}},{key:"Gi",value:function(t){this.Ki=t}},{key:"At",value:function(){return this.Xi}},{key:"Ji",value:function(t){this.Xi=t}},{key:"Qi",value:function(t){return[]}},{key:"tn",value:function(){return[]}},{key:"Tt",value:function(){return!0}}]),t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"}(kt||(kt={}));var xt=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){var r;(0,h.Z)(this,n),(r=e.call(this)).nn=null,r.sn=NaN,r.en=0,r.rn=!0,r.hn=new Map,r.ln=!1,r.an=NaN,r.on=NaN,r._n=NaN,r.un=NaN,r.Ui=t,r.cn=i,r.dn=new lt(t,(0,s.Z)(r)),r.fn=function(t){var e=r.on,n=r.sn;if(t===D(r.nn).vn())return{ct:n,yi:e};var i=D(t.Pt());return{ct:t.pn(e,i),yi:e}};var a=function(){var t=r.Ui.yt().mn(r.en),e=r.Kt();return t&&Number.isFinite(e)?{ut:t,yi:e}:null};return r.bn=new Ct((0,s.Z)(r),t,a),r.wn=new ft((0,s.Z)(r)),r}return(0,f.Z)(n,[{key:"W",value:function(){return this.cn}},{key:"gn",value:function(t,e){this._n=t,this.un=e}},{key:"Mn",value:function(){this._n=NaN,this.un=NaN}},{key:"xn",value:function(){return this._n}},{key:"Sn",value:function(){return this.un}},{key:"kn",value:function(t,e,n){this.ln||(this.ln=!0),this.rn=!0,this.yn(t,e,n)}},{key:"kt",value:function(){return this.en}},{key:"Kt",value:function(){return this.an}},{key:"Zt",value:function(){return this.on}},{key:"Tt",value:function(){return this.rn}},{key:"Cn",value:function(){this.rn=!1,this.Tn(),this.sn=NaN,this.an=NaN,this.on=NaN,this.nn=null,this.Mn()}},{key:"Pn",value:function(t){return null!==this.nn?[this.wn,this.dn]:[]}},{key:"Yt",value:function(t){return t===this.nn&&this.cn.horzLine.visible}},{key:"Xt",value:function(){return this.cn.vertLine.visible}},{key:"Rn",value:function(t,e){this.rn&&this.nn===t||this.hn.clear();var n=[];return this.nn===t&&n.push(this.Dn(this.hn,e,this.fn)),n}},{key:"tn",value:function(){return this.rn?[this.bn]:[]}},{key:"Ut",value:function(){return this.nn}},{key:"On",value:function(){this.wn.gt(),this.hn.forEach((function(t){return t.gt()})),this.bn.gt(),this.dn.gt()}},{key:"An",value:function(t){return t&&!t.vn().Fi()?t.vn():null}},{key:"yn",value:function(t,e,n){this.Vn(t,e,n)&&this.On()}},{key:"Vn",value:function(t,e,n){var i=this.an,r=this.on,a=this.sn,o=this.en,s=this.nn,u=this.An(n);this.en=t,this.an=isNaN(t)?NaN:this.Ui.yt().Et(t),this.nn=n;var l=null!==u?u.Pt():null;return null!==u&&null!==l?(this.sn=e,this.on=u.Ot(e,l)):(this.sn=NaN,this.on=NaN),i!==this.an||r!==this.on||o!==this.en||a!==this.sn||s!==this.nn}},{key:"Tn",value:function(){var t=this.Ui.Mt().map((function(t){return t.In().Bn()})).filter($),e=0===t.length?null:Math.max.apply(Math,(0,c.Z)(t));this.en=null!==e?e:NaN}},{key:"Dn",value:function(t,e,n){var i=t.get(e);return void 0===i&&(i=new _t(this,e,n),t.set(e,i)),i}}]),n}(Tt);function Zt(t){return"left"===t||"right"===t}var At=function(){function t(e){(0,h.Z)(this,t),this.zn=new Map,this.En=[],this.Ln=e}return(0,f.Z)(t,[{key:"Nn",value:function(t,e){var n=function(t,e){return void 0===t?e:{Fn:Math.max(t.Fn,e.Fn),Wn:t.Wn||e.Wn}}(this.zn.get(t),e);this.zn.set(t,n)}},{key:"jn",value:function(){return this.Ln}},{key:"Hn",value:function(t){var e=this.zn.get(t);return void 0===e?{Fn:this.Ln}:{Fn:Math.max(this.Ln,e.Fn),Wn:e.Wn}}},{key:"$n",value:function(){this.Un(),this.En=[{qn:0}]}},{key:"Yn",value:function(t){this.Un(),this.En=[{qn:1,Vt:t}]}},{key:"Xn",value:function(t){this.Kn(),this.En.push({qn:5,Vt:t})}},{key:"Un",value:function(){this.Kn(),this.En.push({qn:6})}},{key:"Zn",value:function(){this.Un(),this.En=[{qn:4}]}},{key:"Gn",value:function(t){this.Un(),this.En.push({qn:2,Vt:t})}},{key:"Jn",value:function(t){this.Un(),this.En.push({qn:3,Vt:t})}},{key:"Qn",value:function(){return this.En}},{key:"ts",value:function(t){var e,n=this,i=(0,o.Z)(t.En);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.ns(r)}}catch(a){i.e(a)}finally{i.f()}this.Ln=Math.max(this.Ln,t.Ln),t.zn.forEach((function(t,e){n.Nn(e,t)}))}},{key:"ns",value:function(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Zn();break;case 5:this.Xn(t.Vt);break;case 6:this.Kn()}}},{key:"Kn",value:function(){var t=this.En.findIndex((function(t){return 5===t.qn}));-1!==t&&this.En.splice(t,1)}}],[{key:"ss",value:function(){return new t(2)}},{key:"es",value:function(){return new t(3)}}]),t}();function Ot(t,e){if(!G(t))return"n/a";if(!Q(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}var Mt=function(){function t(e,n){if((0,h.Z)(this,t),n||(n=1),G(e)&&Q(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=n,this.hs()}return(0,f.Z)(t,[{key:"format",value:function(t){var e=t<0?"\u2212":"";return t=Math.abs(t),e+this.ls(t)}},{key:"hs",value:function(){if(this.os=0,this.Li>0&&this.rs>0)for(var t=this.Li;t>1;)t/=10,this.os++}},{key:"ls",value:function(t){var e=this.Li/this.rs,n=Math.floor(t),i="",r=void 0!==this.os?this.os:NaN;if(e>1){var a=+(Math.round(t*e)-n*e).toFixed(this.os);a>=e&&(a-=e,n+=1),i="."+Ot(+a.toFixed(this.os)*this.rs,r)}else n=Math.round(n*e)/e,r>0&&(i="."+Ot(0,r));return n.toFixed(0)+i}}]),t}(),Lt=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return(0,h.Z)(this,n),e.call(this,t)}return(0,f.Z)(n,[{key:"format",value:function(t){return"".concat((0,r.Z)((0,a.Z)(n.prototype),"format",this).call(this,t),"%")}}]),n}(Mt),It=function(){function t(e){(0,h.Z)(this,t),this._s=e}return(0,f.Z)(t,[{key:"format",value:function(t){var e="";return t<0&&(e="-",t=-t),t<995?e+this.us(t):t<999995?e+this.us(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.us(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.us(t/1e9)+"B")}},{key:"us",value:function(t){var e=Math.pow(10,this._s);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this._s).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,e){return e}))}}]),t}();function Nt(t,e,n,r,a,o,s){if(!(0===e.length||r.from>=e.length||r.to<=0)){var u=t.context,l=t.horizontalPixelRatio,c=t.verticalPixelRatio,h=e[r.from],f=o(t,h),v=h;if(r.to-r.from<2){var d=a/2;u.beginPath();var p={et:h.et-d,rt:h.rt},y={et:h.et+d,rt:h.rt};u.moveTo(p.et*l,p.rt*c),u.lineTo(y.et*l,y.rt*c),s(t,f,p,y)}else{var m=function(e,n){s(t,f,v,n),u.beginPath(),f=e,v=n},g=v;u.beginPath(),u.moveTo(h.et*l,h.rt*c);for(var k=r.from+1;k<r.to;++k){g=e[k];var b=o(t,g);switch(n){case 0:u.lineTo(g.et*l,g.rt*c);break;case 1:u.lineTo(g.et*l,e[k-1].rt*c),b!==f&&(m(b,g),u.lineTo(g.et*l,e[k-1].rt*c)),u.lineTo(g.et*l,g.rt*c);break;case 2:var w=Ft(e,k-1,k),_=(0,i.Z)(w,2),E=_[0],S=_[1];u.bezierCurveTo(E.et*l,E.rt*c,S.et*l,S.rt*c,g.et*l,g.rt*c)}1!==n&&b!==f&&(m(b,g),u.moveTo(g.et*l,g.rt*c))}(v!==g||v===g&&1===n)&&s(t,f,v,g)}}}var Dt=6;function Rt(t,e){return{et:t.et-e.et,rt:t.rt-e.rt}}function Pt(t,e){return{et:t.et/e,rt:t.rt/e}}function Ft(t,e,n){var i,r,a=Math.max(0,e-1),o=Math.min(t.length-1,n+1);return[(i=t[e],r=Pt(Rt(t[n],t[a]),Dt),{et:i.et+r.et,rt:i.rt+r.rt}),Rt(t[n],Pt(Rt(t[o],t[e]),Dt))]}function Ut(t,e,n,i,r){var a=e.context,o=e.horizontalPixelRatio,s=e.verticalPixelRatio;a.lineTo(r.et*o,t*s),a.lineTo(i.et*o,t*s),a.closePath(),a.fillStyle=n,a.fill()}var Vt=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).tt=null,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.tt=t}},{key:"Z",value:function(t){var e;if(null!==this.tt){var n=this.tt,i=n.st,r=n.nt,a=n.cs,o=n.ht,s=n.Wt,u=n.ds,l=null!==(e=this.tt.fs)&&void 0!==e?e:this.tt.vs?0:t.mediaSize.height;if(null!==r){var c=t.context;c.lineCap="butt",c.lineJoin="round",c.lineWidth=o,M(c,s),c.lineWidth=1,Nt(t,i,u,r,a,this.ps.bind(this),Ut.bind(null,l))}}}}]),n}(ct);function Bt(t,e,n){return Math.min(Math.max(t,e),n)}function zt(t,e,n){return e-t<=n}function jt(t){var e=Math.ceil(t);return e%2==0?e-1:e}var qt=function(){function t(){(0,h.Z)(this,t)}return(0,f.Z)(t,[{key:"bs",value:function(t,e){var n=this.ws,i=e.gs,r=e.Ms,a=e.xs,o=e.Ss,s=e.ks,u=e.fs;if(void 0===this.ys||void 0===n||n.gs!==i||n.Ms!==r||n.xs!==a||n.Ss!==o||n.fs!==u||n.ks!==s){var l=t.context.createLinearGradient(0,0,0,s);if(l.addColorStop(0,i),null!=u){var c=Bt(u*t.verticalPixelRatio/s,0,1);l.addColorStop(c,r),l.addColorStop(c,a)}l.addColorStop(1,o),this.ys=l,this.ws=e}return this.ys}}]),t}(),Wt=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Cs=new qt,t}return(0,f.Z)(n,[{key:"ps",value:function(t,e){return this.Cs.bs(t,{gs:e.Ts,Ms:"",xs:"",Ss:e.Ps,ks:t.bitmapSize.height})}}]),n}(Vt);function Ht(t,e){var n=t.context;n.strokeStyle=e,n.stroke()}var Kt=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).tt=null,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.tt=t}},{key:"Z",value:function(t){if(null!==this.tt){var e=this.tt,n=e.st,i=e.nt,r=e.cs,a=e.ds,o=e.ht,s=e.Wt,u=e.Rs;if(null!==i){var l=t.context;l.lineCap="butt",l.lineWidth=o*t.verticalPixelRatio,M(l,s),l.lineJoin="round";var c=this.Ds.bind(this);void 0!==a&&Nt(t,n,a,i,r,c,Ht),u&&function(t,e,n,i,r){for(var a=t.horizontalPixelRatio,o=t.verticalPixelRatio,s=t.context,u=null,l=Math.max(1,Math.floor(a))%2/2,c=n*o+l,h=i.to-1;h>=i.from;--h){var f=e[h];if(f){var v=r(t,f);v!==u&&(s.beginPath(),null!==u&&s.fill(),s.fillStyle=v,u=v);var d=Math.round(f.et*a)+l,p=f.rt*o;s.moveTo(d,p),s.arc(d,p,c,0,2*Math.PI)}}s.fill()}(t,n,u,i,c)}}}}]),n}(ct),Gt=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){return(0,h.Z)(this,n),e.apply(this,arguments)}return(0,f.Z)(n,[{key:"Ds",value:function(t,e){return e._t}}]),n}(Kt);function Qt(t,e,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.length)-r;0<a;){var o=a>>1,s=r+o;i(e[s],n)===t?(r=s+1,a-=o+1):a=o}return r}var Jt=Qt.bind(null,!0),Xt=Qt.bind(null,!1);function Yt(t,e){return t.ut<e}function $t(t,e){return e<t.ut}function te(t,e,n){var i=e.Os(),r=e.di(),a=Jt(t,i,Yt),o=Xt(t,r,$t);if(!n)return{from:a,to:o};var s=a,u=o;return a>0&&a<t.length&&t[a].ut>=i&&(s=a-1),o>0&&o<t.length&&t[o-1].ut<=r&&(u=o+1),{from:s,to:u}}var ee=function(){function t(e,n,i){(0,h.Z)(this,t),this.As=!0,this.Vs=!0,this.Bs=!0,this.Is=[],this.zs=null,this.Es=e,this.Ls=n,this.Ns=i}return(0,f.Z)(t,[{key:"gt",value:function(t){this.As=!0,"data"===t&&(this.Vs=!0),"options"===t&&(this.Bs=!0)}},{key:"xt",value:function(){return this.Es.Tt()?(this.Fs(),null===this.zs?null:this.Ws):null}},{key:"js",value:function(){var t=this;this.Is=this.Is.map((function(e){return Object.assign(Object.assign({},e),t.Es.$s().Hs(e.ut))}))}},{key:"Us",value:function(){this.zs=null}},{key:"Fs",value:function(){this.Vs&&(this.qs(),this.Vs=!1),this.Bs&&(this.js(),this.Bs=!1),this.As&&(this.Ys(),this.As=!1)}},{key:"Ys",value:function(){var t=this.Es.At(),e=this.Ls.yt();if(this.Us(),!e.Fi()&&!t.Fi()){var n=e.Xs();if(null!==n&&0!==this.Es.In().Ks()){var i=this.Es.Pt();null!==i&&(this.zs=te(this.Is,n,this.Ns),this.Zs(t,e,i.Vt),this.Gs())}}}}]),t}(),ne=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){return(0,h.Z)(this,n),e.call(this,t,i,!0)}return(0,f.Z)(n,[{key:"Zs",value:function(t,e,n){e.Js(this.Is,tt(this.zs)),t.Qs(this.Is,n,tt(this.zs))}},{key:"te",value:function(t,e){return{ut:t,ct:e,et:NaN,rt:NaN}}},{key:"qs",value:function(){var t=this,e=this.Es.$s();this.Is=this.Es.In().ie().map((function(n){var i=n.Vt[3];return t.ne(n.se,i,e)}))}}]),n}(ee),ie=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){var r;return(0,h.Z)(this,n),(r=e.call(this,t,i)).Ws=new rt,r.ee=new Wt,r.re=new Gt,r.Ws.X([r.ee,r.re]),r}return(0,f.Z)(n,[{key:"ne",value:function(t,e,n){return Object.assign(Object.assign({},this.te(t,e)),n.Hs(t))}},{key:"Gs",value:function(){var t=this.Es.W();this.ee.it({ds:t.lineType,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,fs:null,vs:t.invertFilledArea,nt:this.zs,cs:this.Ls.yt().he()}),this.re.it({ds:t.lineVisible?t.lineType:void 0,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,nt:this.zs,cs:this.Ls.yt().he(),Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}]),n}(ne),re=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Lt=null,t.le=0,t.ae=0,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.Lt=t}},{key:"Z",value:function(t){var e=t.context,n=t.horizontalPixelRatio,i=t.verticalPixelRatio;if(null!==this.Lt&&0!==this.Lt.In.length&&null!==this.Lt.nt){this.le=this.oe(n),this.le>=2&&Math.max(1,Math.floor(n))%2!=this.le%2&&this.le--,this.ae=this.Lt._e?Math.min(this.le,Math.floor(n)):this.le;for(var r=null,a=this.ae<=this.le&&this.Lt.he>=Math.floor(1.5*n),o=this.Lt.nt.from;o<this.Lt.nt.to;++o){var s=this.Lt.In[o];r!==s.ue&&(e.fillStyle=s.ue,r=s.ue);var u=Math.floor(.5*this.ae),l=Math.round(s.et*n),c=l-u,h=this.ae,f=c+h-1,v=Math.min(s.ce,s.de),d=Math.max(s.ce,s.de),p=Math.round(v*i)-u,y=Math.round(d*i)+u,m=Math.max(y-p,this.ae);e.fillRect(c,p,h,m);var g=Math.ceil(1.5*this.le);if(a){if(this.Lt.fe){var k=l-g,b=Math.max(p,Math.round(s.ve*i)-u),w=b+h-1;w>p+m-1&&(b=(w=p+m-1)-h+1),e.fillRect(k,b,c-k,w-b+1)}var _=l+g,E=Math.max(p,Math.round(s.pe*i)-u),S=E+h-1;S>p+m-1&&(E=(S=p+m-1)-h+1),e.fillRect(f+1,E,_-f,S-E+1)}}}}},{key:"oe",value:function(t){var e=Math.floor(t);return Math.max(e,Math.floor(function(t,e){return Math.floor(.3*t*e)}(D(this.Lt).he,t)))}}]),n}(ct),ae=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){return(0,h.Z)(this,n),e.call(this,t,i,!1)}return(0,f.Z)(n,[{key:"Zs",value:function(t,e,n){e.Js(this.Is,tt(this.zs)),t.me(this.Is,n,tt(this.zs))}},{key:"be",value:function(t,e,n){return{ut:t,we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3],et:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}},{key:"qs",value:function(){var t=this,e=this.Es.$s();this.Is=this.Es.In().ie().map((function(n){return t.ne(n.se,n,e)}))}}]),n}(ee),oe=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Ws=new re,t}return(0,f.Z)(n,[{key:"ne",value:function(t,e,n){return Object.assign(Object.assign({},this.be(t,e,n)),n.Hs(t))}},{key:"Gs",value:function(){var t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),fe:t.openVisible,_e:t.thinBars,nt:this.zs})}}]),n}(ae),se=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Cs=new qt,t}return(0,f.Z)(n,[{key:"ps",value:function(t,e){var n=this.tt;return this.Cs.bs(t,{gs:e.Se,Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:t.bitmapSize.height,fs:n.fs})}}]),n}(Vt),ue=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Te=new qt,t}return(0,f.Z)(n,[{key:"Ds",value:function(t,e){var n=this.tt;return this.Te.bs(t,{gs:e.Pe,Ms:e.Pe,xs:e.Re,Ss:e.Re,ks:t.bitmapSize.height,fs:n.fs})}}]),n}(Kt),le=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){var r;return(0,h.Z)(this,n),(r=e.call(this,t,i)).Ws=new rt,r.De=new se,r.Oe=new ue,r.Ws.X([r.De,r.Oe]),r}return(0,f.Z)(n,[{key:"ne",value:function(t,e,n){return Object.assign(Object.assign({},this.te(t,e)),n.Hs(t))}},{key:"Gs",value:function(){var t=this.Es.Pt();if(null!==t){var e=this.Es.W(),n=this.Es.At().Ot(e.baseValue.price,t.Vt),i=this.Ls.yt().he();this.De.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineType,fs:n,vs:!1,nt:this.zs,cs:i}),this.Oe.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,fs:n,nt:this.zs,cs:i})}}}]),n}(ne),ce=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Lt=null,t.le=0,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.Lt=t}},{key:"Z",value:function(t){if(null!==this.Lt&&0!==this.Lt.In.length&&null!==this.Lt.nt){var e=t.horizontalPixelRatio;this.le=function(t,e){if(t>=2.5&&t<=4)return Math.floor(3*e);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),i=Math.floor(t*n*e),r=Math.floor(t*e),a=Math.min(i,r);return Math.max(Math.floor(e),a)}(this.Lt.he,e),this.le>=2&&Math.floor(e)%2!=this.le%2&&this.le--;var n=this.Lt.In;this.Lt.Ae&&this.Ve(t,n,this.Lt.nt),this.Lt.ci&&this.Be(t,n,this.Lt.nt);var i=this.Ie(e);(!this.Lt.ci||this.le>2*i)&&this.ze(t,n,this.Lt.nt)}}},{key:"Ve",value:function(t,e,n){if(null!==this.Lt){var i=t.context,r=t.horizontalPixelRatio,a=t.verticalPixelRatio,o="",s=Math.min(Math.floor(r),Math.floor(this.Lt.he*r));s=Math.max(Math.floor(r),Math.min(s,this.le));for(var u=Math.floor(.5*s),l=null,c=n.from;c<n.to;c++){var h=e[c];h.Ee!==o&&(i.fillStyle=h.Ee,o=h.Ee);var f=Math.round(Math.min(h.ve,h.pe)*a),v=Math.round(Math.max(h.ve,h.pe)*a),d=Math.round(h.ce*a),p=Math.round(h.de*a),y=Math.round(r*h.et)-u,m=y+s-1;null!==l&&(y=Math.max(l+1,y),y=Math.min(y,m));var g=m-y+1;i.fillRect(y,d,g,f-d),i.fillRect(y,v+1,g,p-v),l=m}}}},{key:"Ie",value:function(t){var e=Math.floor(1*t);this.le<=2*e&&(e=Math.floor(.5*(this.le-1)));var n=Math.max(Math.floor(t),e);return this.le<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n}},{key:"Be",value:function(t,e,n){if(null!==this.Lt)for(var i=t.context,r=t.horizontalPixelRatio,a=t.verticalPixelRatio,o="",s=this.Ie(r),u=null,l=n.from;l<n.to;l++){var c=e[l];c.Le!==o&&(i.fillStyle=c.Le,o=c.Le);var h=Math.round(c.et*r)-Math.floor(.5*this.le),f=h+this.le-1,v=Math.round(Math.min(c.ve,c.pe)*a),d=Math.round(Math.max(c.ve,c.pe)*a);if(null!==u&&(h=Math.max(u+1,h),h=Math.min(h,f)),this.Lt.he*r>2*s)vt(i,h,v,f-h+1,d-v+1,s);else{var p=f-h+1;i.fillRect(h,v,p,d-v+1)}u=f}}},{key:"ze",value:function(t,e,n){if(null!==this.Lt)for(var i=t.context,r=t.horizontalPixelRatio,a=t.verticalPixelRatio,o="",s=this.Ie(r),u=n.from;u<n.to;u++){var l=e[u],c=Math.round(Math.min(l.ve,l.pe)*a),h=Math.round(Math.max(l.ve,l.pe)*a),f=Math.round(l.et*r)-Math.floor(.5*this.le),v=f+this.le-1;if(l.ue!==o){var d=l.ue;i.fillStyle=d,o=d}this.Lt.ci&&(f+=s,c+=s,v-=s,h-=s),c>h||i.fillRect(f,c,v-f+1,h-c+1)}}}]),n}(ct),he=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Ws=new ce,t}return(0,f.Z)(n,[{key:"ne",value:function(t,e,n){return Object.assign(Object.assign({},this.be(t,e,n)),n.Hs(t))}},{key:"Gs",value:function(){var t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),Ae:t.wickVisible,ci:t.borderVisible,nt:this.zs})}}]),n}(ae),fe=function(){function t(e,n){(0,h.Z)(this,t),this.Ne=e,this.Li=n}return(0,f.Z)(t,[{key:"K",value:function(t,e,n){this.Ne.draw(t,this.Li,e,n)}}]),t}(),ve=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i,r){var a;return(0,h.Z)(this,n),(a=e.call(this,t,i,!1)).wn=r,a.Ws=new fe(a.wn.renderer(),(function(e){var n=t.Pt();return null===n?null:t.At().Ot(e,n.Vt)})),a}return(0,f.Z)(n,[{key:"Fe",value:function(t){return this.wn.priceValueBuilder(t)}},{key:"We",value:function(t){return this.wn.isWhitespace(t)}},{key:"qs",value:function(){var t=this.Es.$s();this.Is=this.Es.In().ie().map((function(e){return Object.assign(Object.assign({ut:e.se,et:NaN},t.Hs(e.se)),{je:e.He})}))}},{key:"Zs",value:function(t,e){e.Js(this.Is,tt(this.zs))}},{key:"Gs",value:function(){this.wn.update({bars:this.Is.map(de),barSpacing:this.Ls.yt().he(),visibleRange:this.zs},this.Es.W())}}]),n}(ee);function de(t){return{x:t.et,time:t.ut,originalData:t.je,barColor:t.ue}}var pe=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Lt=null,t.$e=[],t}return(0,f.Z)(n,[{key:"it",value:function(t){this.Lt=t,this.$e=[]}},{key:"Z",value:function(t){var e=t.context,n=t.horizontalPixelRatio,i=t.verticalPixelRatio;if(null!==this.Lt&&0!==this.Lt.st.length&&null!==this.Lt.nt){this.$e.length||this.Ue(n);for(var r=Math.max(1,Math.floor(i)),a=Math.round(this.Lt.qe*i)-Math.floor(r/2),o=a+r,s=this.Lt.nt.from;s<this.Lt.nt.to;s++){var u=this.Lt.st[s],l=this.$e[s-this.Lt.nt.from],c=Math.round(u.rt*i),h=void 0,f=void 0;e.fillStyle=u.ue,c<=a?(h=c,f=o):(h=a,f=c-Math.floor(r/2)+r),e.fillRect(l.Os,h,l.di-l.Os+1,f-h)}}}},{key:"Ue",value:function(t){if(null!==this.Lt&&0!==this.Lt.st.length&&null!==this.Lt.nt){var e=Math.ceil(this.Lt.he*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.Lt.he*t)-e;this.$e=new Array(this.Lt.nt.to-this.Lt.nt.from);for(var i=this.Lt.nt.from;i<this.Lt.nt.to;i++){var r=this.Lt.st[i],a=Math.round(r.et*t),o=void 0,s=void 0;if(n%2){var u=(n-1)/2;o=a-u,s=a+u}else{var l=n/2;o=a-l,s=a+l-1}this.$e[i-this.Lt.nt.from]={Os:o,di:s,Ye:a,Xe:r.et*t,ut:r.ut}}for(var c=this.Lt.nt.from+1;c<this.Lt.nt.to;c++){var h=this.$e[c-this.Lt.nt.from],f=this.$e[c-this.Lt.nt.from-1];h.ut===f.ut+1&&h.Os-f.di!==e+1&&(f.Ye>f.Xe?f.di=h.Os-e-1:h.Os=f.di+e+1)}for(var v=Math.ceil(this.Lt.he*t),d=this.Lt.nt.from;d<this.Lt.nt.to;d++){var p=this.$e[d-this.Lt.nt.from];p.di<p.Os&&(p.di=p.Os);var y=p.di-p.Os+1;v=Math.min(y,v)}if(e>0&&v<4)for(var m=this.Lt.nt.from;m<this.Lt.nt.to;m++){var g=this.$e[m-this.Lt.nt.from];g.di-g.Os+1>v&&(g.Ye>g.Xe?g.di-=1:g.Os+=1)}}else this.$e=[]}}]),n}(ct),ye=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Ws=new pe,t}return(0,f.Z)(n,[{key:"ne",value:function(t,e,n){return Object.assign(Object.assign({},this.te(t,e)),n.Hs(t))}},{key:"Gs",value:function(){var t={st:this.Is,he:this.Ls.yt().he(),nt:this.zs,qe:this.Es.At().Ot(this.Es.W().base,D(this.Es.Pt()).Vt)};this.Ws.it(t)}}]),n}(ne),me=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Ws=new Gt,t}return(0,f.Z)(n,[{key:"ne",value:function(t,e,n){return Object.assign(Object.assign({},this.te(t,e)),n.Hs(t))}},{key:"Gs",value:function(){var t=this.Es.W(),e={st:this.Is,Wt:t.lineStyle,ds:t.lineVisible?t.lineType:void 0,ht:t.lineWidth,Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,nt:this.zs,cs:this.Ls.yt().he()};this.Ws.it(e)}}]),n}(ne),ge=/[2-9]/g,ke=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;(0,h.Z)(this,t),this.Ke=0,this.Ze=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=e}return(0,f.Z)(t,[{key:"ir",value:function(){this.Ke=0,this.Qe.clear(),this.Ze=1,this.Ge=1,this.Je={}}},{key:"Si",value:function(t,e,n){return this.nr(t,e,n).width}},{key:"xi",value:function(t,e,n){var i=this.nr(t,e,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}},{key:"nr",value:function(t,e,n){var i=n||ge,r=String(e).replace(i,"0");if(this.Qe.has(r))return N(this.Qe.get(r)).sr;if(this.Ke===this.tr){var a=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(a),this.Ge++,this.Ke--}t.save(),t.textBaseline="middle";var o=t.measureText(r);return t.restore(),0===o.width&&e.length||(this.Qe.set(r,{sr:o,er:this.Ze}),this.Je[this.Ze]=r,this.Ke++,this.Ze++),o}}]),t}(),be=function(){function t(e){(0,h.Z)(this,t),this.rr=null,this.k=null,this.hr="right",this.lr=e}return(0,f.Z)(t,[{key:"ar",value:function(t,e,n){this.rr=t,this.k=e,this.hr=n}},{key:"K",value:function(t){null!==this.k&&null!==this.rr&&this.rr.K(t,this.k,this.lr,this.hr)}}]),t}(),we=function(){function t(e,n,i){(0,h.Z)(this,t),this._r=e,this.lr=new ke(50),this.ur=n,this.F=i,this.j=-1,this.Ht=new be(this.lr)}return(0,f.Z)(t,[{key:"xt",value:function(){var t=this.F.cr(this.ur);if(null===t)return null;var e=t.dr(this.ur)?t.vr():this.ur.At();if(null===e)return null;var n=t.pr(e);if("overlay"===n)return null;var i=this.F.mr();return i.P!==this.j&&(this.j=i.P,this.lr.ir()),this.Ht.ar(this._r.zi(),i,n),this.Ht}}]),t}(),_e=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Lt=null,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.Lt=t}},{key:"br",value:function(t,e){var n;if(!(null===(n=this.Lt)||void 0===n?void 0:n.Tt))return null;var i=this.Lt,r=i.rt,a=i.ht,o=i.wr;return e>=r-a-7&&e<=r+a+7?{gr:this.Lt,wr:o}:null}},{key:"Z",value:function(t){var e=t.context,n=t.bitmapSize,i=t.horizontalPixelRatio,r=t.verticalPixelRatio;if(null!==this.Lt&&!1!==this.Lt.Tt){var a=Math.round(this.Lt.rt*r);a<0||a>n.height||(e.lineCap="butt",e.strokeStyle=this.Lt.O,e.lineWidth=Math.floor(this.Lt.ht*i),M(e,this.Lt.Wt),L(e,a,0,n.width))}}}]),n}(ct),Ee=function(){function t(e){(0,h.Z)(this,t),this.Mr={rt:0,O:"rgba(0, 0, 0, 0)",ht:1,Wt:0,Tt:!1},this.Sr=new _e,this.bt=!0,this.Es=e,this.Ls=e.qt(),this.Sr.it(this.Mr)}return(0,f.Z)(t,[{key:"gt",value:function(){this.bt=!0}},{key:"xt",value:function(){return this.Es.Tt()?(this.bt&&(this.kr(),this.bt=!1),this.Sr):null}}]),t}(),Se=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t){return(0,h.Z)(this,n),e.call(this,t)}return(0,f.Z)(n,[{key:"kr",value:function(){this.Mr.Tt=!1;var t=this.Es.At(),e=t.yr().yr;if(2===e||3===e){var n=this.Es.W();if(n.baseLineVisible&&this.Es.Tt()){var i=this.Es.Pt();null!==i&&(this.Mr.Tt=!0,this.Mr.rt=t.Ot(i.Vt,i.Vt),this.Mr.O=n.baseLineColor,this.Mr.ht=n.baseLineWidth,this.Mr.Wt=n.baseLineStyle)}}}}]),n}(Ee),Ce=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Lt=null,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.Lt=t}},{key:"He",value:function(){return this.Lt}},{key:"Z",value:function(t){var e=t.context,n=t.horizontalPixelRatio,i=t.verticalPixelRatio,r=this.Lt;if(null!==r){var a=Math.max(1,Math.floor(n)),o=a%2/2,s=Math.round(r.Xe.x*n)+o,u=r.Xe.y*i;e.fillStyle=r.Cr,e.beginPath();var l=Math.max(2,1.5*r.Tr)*n;e.arc(s,u,l,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.Pr,e.beginPath(),e.arc(s,u,r.ot*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=a,e.strokeStyle=r.Rr,e.beginPath(),e.arc(s,u,r.ot*n+a/2,0,2*Math.PI,!1),e.stroke()}}}]),n}(ct),Te=[{Dr:0,Or:.25,Ar:4,Vr:10,Br:.25,Ir:0,zr:.4,Er:.8},{Dr:.25,Or:.525,Ar:10,Vr:14,Br:0,Ir:0,zr:.8,Er:0},{Dr:.525,Or:1,Ar:14,Vr:14,Br:0,Ir:0,zr:0,Er:0}];function xe(t,e,n,i){return function(t,e){if("transparent"===t)return t;var n=q(t),i=n[3];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(e*i,")")}(t,n+(i-n)*e)}function Ze(t,e){for(var n,i=t%2600/2600,r=0,a=Te;r<a.length;r++){var o=a[r];if(i>=o.Dr&&i<=o.Or){n=o;break}}I(void 0!==n,"Last price animation internal logic error");var s,u,l,c=(i-n.Dr)/(n.Or-n.Dr);return{Pr:xe(e,c,n.Br,n.Ir),Rr:xe(e,c,n.zr,n.Er),ot:(s=c,u=n.Ar,l=n.Vr,u+(l-u)*s)}}var Ae=function(){function t(e){(0,h.Z)(this,t),this.Ht=new Ce,this.bt=!0,this.Lr=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=e}return(0,f.Z)(t,[{key:"jr",value:function(){this.Fr=this.Nr-1,this.gt()}},{key:"Hr",value:function(){if(this.gt(),2===this.Wr.W().lastPriceAnimation){var t=performance.now(),e=this.Fr-t;if(e>0)return void(e<650&&(this.Fr+=2600));this.Nr=t,this.Fr=t+2600}}},{key:"gt",value:function(){this.bt=!0}},{key:"$r",value:function(){this.Lr=!0}},{key:"Tt",value:function(){return 0!==this.Wr.W().lastPriceAnimation}},{key:"Ur",value:function(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}},{key:"xt",value:function(){return this.bt?(this.St(),this.bt=!1,this.Lr=!1):this.Lr&&(this.qr(),this.Lr=!1),this.Ht}},{key:"St",value:function(){this.Ht.it(null);var t=this.Wr.qt().yt(),e=t.Xs(),n=this.Wr.Pt();if(null!==e&&null!==n){var i=this.Wr.Yr(!0);if(!i.Xr&&e.Kr(i.se)){var r={x:t.Et(i.se),y:this.Wr.At().Ot(i.ct,n.Vt)},a=i.O,o=this.Wr.W().lineWidth,s=Ze(this.Zr(),a);this.Ht.it({Cr:a,Tr:o,Pr:s.Pr,Rr:s.Rr,ot:s.ot,Xe:r})}}}},{key:"qr",value:function(){var t=this.Ht.He();if(null!==t){var e=Ze(this.Zr(),t.Cr);t.Pr=e.Pr,t.Rr=e.Rr,t.ot=e.ot}}},{key:"Zr",value:function(){return this.Ur()?performance.now()-this.Nr:2599}}]),t}();function Oe(t,e){return jt(Math.min(Math.max(t,12),30)*e)}function Me(t,e){switch(t){case"arrowDown":case"arrowUp":return Oe(e,1);case"circle":return Oe(e,.8);case"square":return Oe(e,.7)}}function Le(t){return function(t){var e=Math.ceil(t);return e%2!=0?e-1:e}(Oe(t,1))}function Ie(t){return Math.max(Oe(t,.1),3)}function Ne(t,e,n,i,r){var a=Me("square",n),o=(a-1)/2,s=t-o,u=e-o;return i>=s&&i<=s+a&&r>=u&&r<=u+a}function De(t,e,n,i,r){var a=(Me("arrowUp",r)-1)/2,o=(jt(r/2)-1)/2;e.beginPath(),t?(e.moveTo(n-a,i),e.lineTo(n,i-a),e.lineTo(n+a,i),e.lineTo(n+o,i),e.lineTo(n+o,i+a),e.lineTo(n-o,i+a),e.lineTo(n-o,i)):(e.moveTo(n-a,i),e.lineTo(n,i+a),e.lineTo(n+a,i),e.lineTo(n+o,i),e.lineTo(n+o,i-a),e.lineTo(n-o,i-a),e.lineTo(n-o,i)),e.fill()}var Re=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Lt=null,t.lr=new ke,t.j=-1,t.H="",t.Gr="",t}return(0,f.Z)(n,[{key:"it",value:function(t){this.Lt=t}},{key:"ar",value:function(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Gr=nt(t,e),this.lr.ir())}},{key:"br",value:function(t,e){if(null===this.Lt||null===this.Lt.nt)return null;for(var n=this.Lt.nt.from;n<this.Lt.nt.to;n++){var i=this.Lt.st[n];if(Fe(i,t,e))return{gr:i.Jr,wr:i.wr}}return null}},{key:"Z",value:function(t,e,n){var i=t.context;if(null!==this.Lt&&null!==this.Lt.nt){i.textBaseline="middle",i.font=this.Gr;for(var r=this.Lt.nt.from;r<this.Lt.nt.to;r++){var a=this.Lt.st[r];void 0!==a.Jt&&(a.Jt.$i=this.lr.Si(i,a.Jt.Qr),a.Jt.zt=this.j,a.Jt.et=a.et-a.Jt.$i/2),Pe(a,i)}}}}]),n}(at);function Pe(t,e){e.fillStyle=t.O,void 0!==t.Jt&&function(t,e,n,i){t.fillText(e,n,i)}(e,t.Jt.Qr,t.Jt.et,t.Jt.rt),function(t,e){if(0!==t.Ks){switch(t.th){case"arrowDown":return void De(!1,e,t.et,t.rt,t.Ks);case"arrowUp":return void De(!0,e,t.et,t.rt,t.Ks);case"circle":return void function(t,e,n,i){var r=(Me("circle",i)-1)/2;t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.fill()}(e,t.et,t.rt,t.Ks);case"square":return void function(t,e,n,i){var r=Me("square",i),a=(r-1)/2,o=e-a,s=n-a;t.fillRect(o,s,r,r)}(e,t.et,t.rt,t.Ks)}t.th}}(t,e)}function Fe(t,e,n){return!(void 0===t.Jt||!function(t,e,n,i,r,a){var o=i/2;return r>=t&&r<=t+n&&a>=e-o&&a<=e+o}(t.Jt.et,t.Jt.rt,t.Jt.$i,t.Jt.zt,e,n))||function(t,e,n){if(0===t.Ks)return!1;switch(t.th){case"arrowDown":case"arrowUp":return function(t,e,n,i,r,a){return Ne(e,n,i,r,a)}(0,t.et,t.rt,t.Ks,e,n);case"circle":return function(t,e,n,i,r){var a=2+Me("circle",n)/2,o=t-i,s=e-r;return Math.sqrt(o*o+s*s)<=a}(t.et,t.rt,t.Ks,e,n);case"square":return Ne(t.et,t.rt,t.Ks,e,n)}}(t,e,n)}function Ue(t,e,n,i,r,a,o,s,u){var l=G(n)?n:n.xe,c=G(n)?n:n.ge,h=G(n)?n:n.Me,f=G(e.size)?Math.max(e.size,0):1,v=Le(s.he())*f,d=v/2;switch(t.Ks=v,e.position){case"inBar":return t.rt=o.Ot(l,u),void(void 0!==t.Jt&&(t.Jt.rt=t.rt+d+a+.6*r));case"aboveBar":return t.rt=o.Ot(c,u)-d-i.ih,void 0!==t.Jt&&(t.Jt.rt=t.rt-d-.6*r,i.ih+=1.2*r),void(i.ih+=v+a);case"belowBar":return t.rt=o.Ot(h,u)+d+i.nh,void 0!==t.Jt&&(t.Jt.rt=t.rt+d+a+.6*r,i.nh+=1.2*r),void(i.nh+=v+a)}e.position}var Ve=function(){function t(e,n){(0,h.Z)(this,t),this.bt=!0,this.sh=!0,this.eh=!0,this.rh=null,this.Ht=new Re,this.Wr=e,this.Ui=n,this.Lt={st:[],nt:null}}return(0,f.Z)(t,[{key:"gt",value:function(t){this.bt=!0,this.eh=!0,"data"===t&&(this.sh=!0)}},{key:"xt",value:function(t){if(!this.Wr.Tt())return null;this.bt&&this.hh();var e=this.Ui.W().layout;return this.Ht.ar(e.fontSize,e.fontFamily),this.Ht.it(this.Lt),this.Ht}},{key:"lh",value:function(){if(this.eh){if(this.Wr.ah().length>0){var t=this.Ui.yt().he(),e=Ie(t),n=1.5*Le(t)+2*e;this.rh={above:n,below:n}}else this.rh=null;this.eh=!1}return this.rh}},{key:"hh",value:function(){var t=this.Wr.At(),e=this.Ui.yt(),n=this.Wr.ah();this.sh&&(this.Lt.st=n.map((function(t){return{ut:t.time,et:0,rt:0,Ks:0,th:t.shape,O:t.color,Jr:t.Jr,wr:t.id,Jt:void 0}})),this.sh=!1);var i=this.Ui.W().layout;this.Lt.nt=null;var r=e.Xs();if(null!==r){var a=this.Wr.Pt();if(null!==a&&0!==this.Lt.st.length){var o=NaN,s=Ie(e.he()),u={ih:s,nh:s};this.Lt.nt=te(this.Lt.st,r,!0);for(var l=this.Lt.nt.from;l<this.Lt.nt.to;l++){var c=n[l];c.time!==o&&(u.ih=s,u.nh=s,o=c.time);var h=this.Lt.st[l];h.et=e.Et(c.time),void 0!==c.text&&c.text.length>0&&(h.Jt={Qr:c.text,et:0,rt:0,$i:0,zt:0});var f=this.Wr.oh(c.time);null!==f&&Ue(h,c,f,u,i.fontSize,s,t,e,a.Vt)}this.bt=!1}}}}]),t}(),Be=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t){return(0,h.Z)(this,n),e.call(this,t)}return(0,f.Z)(n,[{key:"kr",value:function(){var t=this.Mr;t.Tt=!1;var e=this.Es.W();if(e.priceLineVisible&&this.Es.Tt()){var n=this.Es.Yr(0===e.priceLineSource);n.Xr||(t.Tt=!0,t.rt=n.yi,t.O=this.Es._h(n.O),t.ht=e.priceLineWidth,t.Wt=e.priceLineStyle)}}}]),n}(Ee),ze=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,h.Z)(this,n),(i=e.call(this)).$t=t,i}return(0,f.Z)(n,[{key:"Ei",value:function(t,e,n){t.Tt=!1,e.Tt=!1;var i=this.$t;if(i.Tt()){var r=i.W(),a=r.lastValueVisible,o=""!==i.uh(),s=0===r.seriesLastValueMode,u=i.Yr(!1);if(!u.Xr){a&&(t.Jt=this.dh(u,a,s),t.Tt=0!==t.Jt.length),(o||s)&&(e.Jt=this.fh(u,a,o,s),e.Tt=e.Jt.length>0);var l=i._h(u.O),c=W(l);n.t=c.t,n.yi=u.yi,e.Bt=i.qt().It(u.yi/i.At().zt()),t.Bt=l,t.O=c.i,e.O=c.i}}}},{key:"fh",value:function(t,e,n,i){var r="",a=this.$t.uh();return n&&0!==a.length&&(r+="".concat(a," ")),e&&i&&(r+=this.$t.At().ph()?t.mh:t.bh),r.trim()}},{key:"dh",value:function(t,e,n){return e?n?this.$t.At().ph()?t.bh:t.mh:t.Jt:""}}]),n}(wt);function je(t,e,n,i){var r=Number.isFinite(e),a=Number.isFinite(n);return r&&a?t(e,n):r||a?r?e:n:i}var qe,We=function(){function t(e,n){(0,h.Z)(this,t),this.wh=e,this.gh=n}return(0,f.Z)(t,[{key:"Mh",value:function(t){return null!==t&&this.wh===t.wh&&this.gh===t.gh}},{key:"xh",value:function(){return new t(this.wh,this.gh)}},{key:"Sh",value:function(){return this.wh}},{key:"kh",value:function(){return this.gh}},{key:"yh",value:function(){return this.gh-this.wh}},{key:"Fi",value:function(){return this.gh===this.wh||Number.isNaN(this.gh)||Number.isNaN(this.wh)}},{key:"ts",value:function(e){return null===e?this:new t(je(Math.min,this.Sh(),e.Sh(),-1/0),je(Math.max,this.kh(),e.kh(),1/0))}},{key:"Ch",value:function(t){if(G(t)&&0!==this.gh-this.wh){var e=.5*(this.gh+this.wh),n=this.gh-e,i=this.wh-e;n*=t,i*=t,this.gh=e+n,this.wh=e+i}}},{key:"Th",value:function(t){G(t)&&(this.gh+=t,this.wh+=t)}},{key:"Ph",value:function(){return{minValue:this.wh,maxValue:this.gh}}}],[{key:"Rh",value:function(e){return null===e?null:new t(e.minValue,e.maxValue)}}]),t}(),He=function(){function t(e,n){(0,h.Z)(this,t),this.Dh=e,this.Oh=n||null}return(0,f.Z)(t,[{key:"Ah",value:function(){return this.Dh}},{key:"Vh",value:function(){return this.Oh}},{key:"Ph",value:function(){return null===this.Dh?null:{priceRange:this.Dh.Ph(),margins:this.Oh||void 0}}}],[{key:"Rh",value:function(e){return null===e?null:new t(We.Rh(e.priceRange),e.margins)}}]),t}(),Ke=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){var r;return(0,h.Z)(this,n),(r=e.call(this,t)).Bh=i,r}return(0,f.Z)(n,[{key:"kr",value:function(){var t=this.Mr;t.Tt=!1;var e=this.Bh.W();if(this.Es.Tt()&&e.lineVisible){var n=this.Bh.Ih();null!==n&&(t.Tt=!0,t.rt=n,t.O=e.color,t.ht=e.lineWidth,t.Wt=e.lineStyle,t.wr=this.Bh.W().id)}}}]),n}(Ee),Ge=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){var r;return(0,h.Z)(this,n),(r=e.call(this)).Wr=t,r.Bh=i,r}return(0,f.Z)(n,[{key:"Ei",value:function(t,e,n){t.Tt=!1,e.Tt=!1;var i=this.Bh.W(),r=i.axisLabelVisible,a=""!==i.title,o=this.Wr;if(r&&o.Tt()){var s=this.Bh.Ih();if(null!==s){a&&(e.Jt=i.title,e.Tt=!0),e.Bt=o.qt().It(s/o.At().zt()),t.Jt=this.zh(i.price),t.Tt=!0;var u=W(i.axisLabelColor||i.color);n.t=u.t;var l=i.axisLabelTextColor||u.i;t.O=l,e.O=l,n.yi=s}}}},{key:"zh",value:function(t){var e=this.Wr.Pt();return null===e?"":this.Wr.At().Wi(t,e.Vt)}}]),n}(wt),Qe=function(){function t(e,n){(0,h.Z)(this,t),this.Wr=e,this.cn=n,this.Eh=new Ke(e,this),this._r=new Ge(e,this),this.Lh=new we(this._r,e,e.qt())}return(0,f.Z)(t,[{key:"Nh",value:function(t){K(this.cn,t),this.gt(),this.Wr.qt().Fh()}},{key:"W",value:function(){return this.cn}},{key:"Wh",value:function(){return this.Eh}},{key:"jh",value:function(){return this.Lh}},{key:"Hh",value:function(){return this._r}},{key:"gt",value:function(){this.Eh.gt(),this._r.gt()}},{key:"Ih",value:function(){var t=this.Wr,e=t.At();if(t.qt().yt().Fi()||e.Fi())return null;var n=t.Pt();return null===n?null:e.Ot(this.cn.price,n.Vt)}}]),t}(),Je=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,h.Z)(this,n),(i=e.call(this)).Ui=t,i}return(0,f.Z)(n,[{key:"qt",value:function(){return this.Ui}}]),n}(Tt),Xe={Bar:function(t,e,n,i){var r,a=e.upColor,o=e.downColor,s=D(t(n,i)),u=R(s.Vt[0])<=R(s.Vt[3]);return{ue:null!==(r=s.O)&&void 0!==r?r:u?a:o}},Candlestick:function(t,e,n,i){var r,a,o,s=e.upColor,u=e.downColor,l=e.borderUpColor,c=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,v=D(t(n,i)),d=R(v.Vt[0])<=R(v.Vt[3]);return{ue:null!==(r=v.O)&&void 0!==r?r:d?s:u,Le:null!==(a=v.Bt)&&void 0!==a?a:d?l:c,Ee:null!==(o=v.$h)&&void 0!==o?o:d?h:f}},Custom:function(t,e,n,i){var r;return{ue:null!==(r=D(t(n,i)).O)&&void 0!==r?r:e.color}},Area:function(t,e,n,i){var r,a,o,s,u=D(t(n,i));return{ue:null!==(r=u._t)&&void 0!==r?r:e.lineColor,_t:null!==(a=u._t)&&void 0!==a?a:e.lineColor,Ts:null!==(o=u.Ts)&&void 0!==o?o:e.topColor,Ps:null!==(s=u.Ps)&&void 0!==s?s:e.bottomColor}},Baseline:function(t,e,n,i){var r,a,o,s,u,l,c=D(t(n,i));return{ue:c.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Pe:null!==(r=c.Pe)&&void 0!==r?r:e.topLineColor,Re:null!==(a=c.Re)&&void 0!==a?a:e.bottomLineColor,Se:null!==(o=c.Se)&&void 0!==o?o:e.topFillColor1,ke:null!==(s=c.ke)&&void 0!==s?s:e.topFillColor2,ye:null!==(u=c.ye)&&void 0!==u?u:e.bottomFillColor1,Ce:null!==(l=c.Ce)&&void 0!==l?l:e.bottomFillColor2}},Line:function(t,e,n,i){var r,a,o=D(t(n,i));return{ue:null!==(r=o.O)&&void 0!==r?r:e.color,_t:null!==(a=o.O)&&void 0!==a?a:e.color}},Histogram:function(t,e,n,i){var r;return{ue:null!==(r=D(t(n,i)).O)&&void 0!==r?r:e.color}}},Ye=function(){function t(e){var n=this;(0,h.Z)(this,t),this.Uh=function(t,e){return void 0!==e?e.Vt:n.Wr.In().qh(t)},this.Wr=e,this.Yh=Xe[e.Xh()]}return(0,f.Z)(t,[{key:"Hs",value:function(t,e){return this.Yh(this.Uh,this.Wr.W(),t,e)}}]),t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(qe||(qe={}));var $e=30,tn=function(){function t(){(0,h.Z)(this,t),this.Kh=[],this.Zh=new Map,this.Gh=new Map}return(0,f.Z)(t,[{key:"Jh",value:function(){return this.Ks()>0?this.Kh[this.Kh.length-1]:null}},{key:"Qh",value:function(){return this.Ks()>0?this.tl(0):null}},{key:"Bn",value:function(){return this.Ks()>0?this.tl(this.Kh.length-1):null}},{key:"Ks",value:function(){return this.Kh.length}},{key:"Fi",value:function(){return 0===this.Ks()}},{key:"Kr",value:function(t){return null!==this.il(t,0)}},{key:"qh",value:function(t){return this.nl(t)}},{key:"nl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.il(t,e);return null===n?null:Object.assign(Object.assign({},this.sl(n)),{se:this.tl(n)})}},{key:"ie",value:function(){return this.Kh}},{key:"el",value:function(t,e,n){if(this.Fi())return null;var i,r=null,a=(0,o.Z)(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;r=en(r,this.rl(t,e,s))}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"it",value:function(t){this.Gh.clear(),this.Zh.clear(),this.Kh=t}},{key:"tl",value:function(t){return this.Kh[t].se}},{key:"sl",value:function(t){return this.Kh[t]}},{key:"il",value:function(t,e){var n=this.hl(t);if(null===n&&0!==e)switch(e){case-1:return this.ll(t);case 1:return this.al(t);default:throw new TypeError("Unknown search mode")}return n}},{key:"ll",value:function(t){var e=this.ol(t);return e>0&&(e-=1),e!==this.Kh.length&&this.tl(e)<t?e:null}},{key:"al",value:function(t){var e=this._l(t);return e!==this.Kh.length&&t<this.tl(e)?e:null}},{key:"hl",value:function(t){var e=this.ol(t);return e===this.Kh.length||t<this.Kh[e].se?null:e}},{key:"ol",value:function(t){return Jt(this.Kh,t,(function(t,e){return t.se<e}))}},{key:"_l",value:function(t){return Xt(this.Kh,t,(function(t,e){return t.se>e}))}},{key:"ul",value:function(t,e,n){for(var i=null,r=t;r<e;r++){var a=this.Kh[r].Vt[n];Number.isNaN(a)||(null===i?i={cl:a,dl:a}:(a<i.cl&&(i.cl=a),a>i.dl&&(i.dl=a)))}return i}},{key:"rl",value:function(t,e,n){if(this.Fi())return null;var i=null,r=D(this.Qh()),a=D(this.Bn()),o=Math.max(t,r),s=Math.min(e,a),u=Math.ceil(o/$e)*$e,l=Math.max(u,Math.floor(s/$e)*$e),c=this.ol(o),h=this._l(Math.min(s,u,e));i=en(i,this.ul(c,h,n));var f=this.Zh.get(n);void 0===f&&(f=new Map,this.Zh.set(n,f));for(var v=Math.max(u+1,o);v<l;v+=$e){var d=Math.floor(v/$e),p=f.get(d);if(void 0===p){var y=this.ol(d*$e),m=this._l((d+1)*$e-1);p=this.ul(y,m,n),f.set(d,p)}i=en(i,p)}var g=this.ol(l),k=this._l(s);return i=en(i,this.ul(g,k,n))}}]),t}();function en(t,e){return null===t?e:null===e?t:{cl:Math.min(t.cl,e.cl),dl:Math.max(t.dl,e.dl)}}var nn=function(){function t(e){(0,h.Z)(this,t),this.fl=e}return(0,f.Z)(t,[{key:"K",value:function(t,e,n){this.fl.draw(t)}},{key:"G",value:function(t,e,n){var i,r;null===(r=(i=this.fl).drawBackground)||void 0===r||r.call(i,t)}}]),t}(),rn=function(){function t(e){(0,h.Z)(this,t),this.Qe=null,this.wn=e}return(0,f.Z)(t,[{key:"xt",value:function(){var t,e=this.wn.renderer();if(null===e)return null;if((null===(t=this.Qe)||void 0===t?void 0:t.vl)===e)return this.Qe.pl;var n=new nn(e);return this.Qe={vl:e,pl:n},n}},{key:"ml",value:function(){var t,e,n;return null!==(n=null===(e=(t=this.wn).zOrder)||void 0===e?void 0:e.call(t))&&void 0!==n?n:"normal"}}]),t}();function an(t){var e,n,i,r,a;return{Jt:t.text(),yi:t.coordinate(),ki:null===(e=t.fixedCoordinate)||void 0===e?void 0:e.call(t),O:t.textColor(),t:t.backColor(),Tt:null===(i=null===(n=t.visible)||void 0===n?void 0:n.call(t))||void 0===i||i,ai:null===(a=null===(r=t.tickVisible)||void 0===r?void 0:r.call(t))||void 0===a||a}}var on=function(){function t(e,n){(0,h.Z)(this,t),this.Ht=new St,this.bl=e,this.wl=n}return(0,f.Z)(t,[{key:"xt",value:function(){return this.Ht.it(Object.assign({$i:this.wl.$i()},an(this.bl))),this.Ht}}]),t}(),sn=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){var r;return(0,h.Z)(this,n),(r=e.call(this)).bl=t,r.Li=i,r}return(0,f.Z)(n,[{key:"Ei",value:function(t,e,n){var i=an(this.bl);n.t=i.t,t.O=i.O;var r=2/12*this.Li.P();n.gi=r,n.Mi=r,n.yi=i.yi,n.ki=i.ki,t.Jt=i.Jt,t.Tt=i.Tt,t.ai=i.ai}}]),n}(wt),un=function(){function t(e,n){(0,h.Z)(this,t),this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=e,this.Wr=n}return(0,f.Z)(t,[{key:"Cl",value:function(){return this.yl}},{key:"On",value:function(){var t,e;null===(e=(t=this.yl).updateAllViews)||void 0===e||e.call(t)}},{key:"Pn",value:function(){var t,e,n,i,r=null!==(n=null===(e=(t=this.yl).paneViews)||void 0===e?void 0:e.call(t))&&void 0!==n?n:[];if((null===(i=this.gl)||void 0===i?void 0:i.vl)===r)return this.gl.pl;var a=r.map((function(t){return new rn(t)}));return this.gl={vl:r,pl:a},a}},{key:"tn",value:function(){var t,e,n,i,r=null!==(n=null===(e=(t=this.yl).timeAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==n?n:[];if((null===(i=this.Ml)||void 0===i?void 0:i.vl)===r)return this.Ml.pl;var a=this.Wr.qt().yt(),o=r.map((function(t){return new on(t,a)}));return this.Ml={vl:r,pl:o},o}},{key:"Rn",value:function(){var t,e,n,i,r=null!==(n=null===(e=(t=this.yl).priceAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==n?n:[];if((null===(i=this.xl)||void 0===i?void 0:i.vl)===r)return this.xl.pl;var a=this.Wr.At(),o=r.map((function(t){return new sn(t,a)}));return this.xl={vl:r,pl:o},o}},{key:"Tl",value:function(){var t,e,n,i,r=null!==(n=null===(e=(t=this.yl).priceAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==n?n:[];if((null===(i=this.Sl)||void 0===i?void 0:i.vl)===r)return this.Sl.pl;var a=r.map((function(t){return new rn(t)}));return this.Sl={vl:r,pl:a},a}},{key:"Pl",value:function(){var t,e,n,i,r=null!==(n=null===(e=(t=this.yl).timeAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==n?n:[];if((null===(i=this.kl)||void 0===i?void 0:i.vl)===r)return this.kl.pl;var a=r.map((function(t){return new rn(t)}));return this.kl={vl:r,pl:a},a}},{key:"Rl",value:function(t,e){var n,i,r;return null!==(r=null===(i=(n=this.yl).autoscaleInfo)||void 0===i?void 0:i.call(n,t,e))&&void 0!==r?r:null}},{key:"br",value:function(t,e){var n,i,r;return null!==(r=null===(i=(n=this.yl).hitTest)||void 0===i?void 0:i.call(n,t,e))&&void 0!==r?r:null}}]),t}();function ln(t,e,n,i){t.forEach((function(t){e(t).forEach((function(t){t.ml()===n&&i.push(t)}))}))}function cn(t){return t.Pn()}function hn(t){return t.Tl()}function fn(t){return t.Pl()}var vn=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i,r,a,o){var u;(0,h.Z)(this,n),(u=e.call(this,t)).Lt=new tn,u.Eh=new Be((0,s.Z)(u)),u.Dl=[],u.Ol=new Se((0,s.Z)(u)),u.Al=null,u.Vl=null,u.Bl=[],u.Il=[],u.zl=null,u.El=[],u.cn=i,u.Ll=r;var l=new ze((0,s.Z)(u));return u.hn=[l],u.Lh=new we(l,(0,s.Z)(u),t),"Area"!==r&&"Line"!==r&&"Baseline"!==r||(u.Al=new Ae((0,s.Z)(u))),u.Nl(),u.Fl(o),u}return(0,f.Z)(n,[{key:"S",value:function(){null!==this.zl&&clearTimeout(this.zl)}},{key:"_h",value:function(t){return this.cn.priceLineColor||t}},{key:"Yr",value:function(t){var e={Xr:!0},n=this.At();if(this.qt().yt().Fi()||n.Fi()||this.Lt.Fi())return e;var i,r,a=this.qt().yt().Xs(),o=this.Pt();if(null===a||null===o)return e;if(t){var s=this.Lt.Jh();if(null===s)return e;i=s,r=s.se}else{var u=this.Lt.nl(a.di(),-1);if(null===u)return e;if(null===(i=this.Lt.qh(u.se)))return e;r=u.se}var l=i.Vt[3],c=this.$s().Hs(r,{Vt:i}),h=n.Ot(l,o.Vt);return{Xr:!1,ct:l,Jt:n.Wi(l,o.Vt),mh:n.Wl(l),bh:n.jl(l,o.Vt),O:c.ue,yi:h,se:r}}},{key:"$s",value:function(){return null!==this.Vl||(this.Vl=new Ye(this)),this.Vl}},{key:"W",value:function(){return this.cn}},{key:"Nh",value:function(t){var e=t.priceScaleId;void 0!==e&&e!==this.cn.priceScaleId&&this.qt().Hl(this,e),K(this.cn,t),void 0!==t.priceFormat&&(this.Nl(),this.qt().$l()),this.qt().Ul(this),this.qt().ql(),this.wn.gt("options")}},{key:"it",value:function(t,e){this.Lt.it(t),this.Yl(),this.wn.gt("data"),this.dn.gt("data"),null!==this.Al&&(e&&e.Xl?this.Al.Hr():0===t.length&&this.Al.jr());var n=this.qt().cr(this);this.qt().Kl(n),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}},{key:"Zl",value:function(t){this.Bl=t,this.Yl();var e=this.qt().cr(this);this.dn.gt("data"),this.qt().Kl(e),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}},{key:"Gl",value:function(){return this.Bl}},{key:"ah",value:function(){return this.Il}},{key:"Jl",value:function(t){var e=new Qe(this,t);return this.Dl.push(e),this.qt().Ul(this),e}},{key:"Ql",value:function(t){var e=this.Dl.indexOf(t);-1!==e&&this.Dl.splice(e,1),this.qt().Ul(this)}},{key:"Xh",value:function(){return this.Ll}},{key:"Pt",value:function(){var t=this.ta();return null===t?null:{Vt:t.Vt[3],ia:t.ut}}},{key:"ta",value:function(){var t=this.qt().yt().Xs();if(null===t)return null;var e=t.Os();return this.Lt.nl(e,1)}},{key:"In",value:function(){return this.Lt}},{key:"oh",value:function(t){var e=this.Lt.qh(t);return null===e?null:"Bar"===this.Ll||"Candlestick"===this.Ll||"Custom"===this.Ll?{we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3]}:e.Vt[3]}},{key:"na",value:function(t){var e=this,n=[];ln(this.El,cn,"top",n);var i=this.Al;return null!==i&&i.Tt()?(null===this.zl&&i.Ur()&&(this.zl=setTimeout((function(){e.zl=null,e.qt().sa()}),0)),i.$r(),n.push(i),n):n}},{key:"Pn",value:function(){var t=[];this.ea()||t.push(this.Ol),t.push(this.wn,this.Eh,this.dn);var e=this.Dl.map((function(t){return t.Wh()}));return t.push.apply(t,(0,c.Z)(e)),ln(this.El,cn,"normal",t),t}},{key:"ra",value:function(){return this.ha(cn,"bottom")}},{key:"la",value:function(t){return this.ha(hn,t)}},{key:"aa",value:function(t){return this.ha(fn,t)}},{key:"oa",value:function(t,e){return this.El.map((function(n){return n.br(t,e)})).filter((function(t){return null!==t}))}},{key:"Qi",value:function(t){return[this.Lh].concat((0,c.Z)(this.Dl.map((function(t){return t.jh()}))))}},{key:"Rn",value:function(t,e){if(e!==this.Xi&&!this.ea())return[];var n,i=(0,c.Z)(this.hn),r=(0,o.Z)(this.Dl);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.push(a.Hh())}}catch(s){r.e(s)}finally{r.f()}return this.El.forEach((function(t){i.push.apply(i,(0,c.Z)(t.Rn()))})),i}},{key:"tn",value:function(){var t=[];return this.El.forEach((function(e){t.push.apply(t,(0,c.Z)(e.tn()))})),t}},{key:"Rl",value:function(t,e){var n=this;if(void 0!==this.cn.autoscaleInfoProvider){var i=this.cn.autoscaleInfoProvider((function(){var i=n._a(t,e);return null===i?null:i.Ph()}));return He.Rh(i)}return this._a(t,e)}},{key:"ua",value:function(){return this.cn.priceFormat.minMove}},{key:"ca",value:function(){return this.da}},{key:"On",value:function(){var t;this.wn.gt(),this.dn.gt();var e,n=(0,o.Z)(this.hn);try{for(n.s();!(e=n.n()).done;){e.value.gt()}}catch(a){n.e(a)}finally{n.f()}var i,r=(0,o.Z)(this.Dl);try{for(r.s();!(i=r.n()).done;){i.value.gt()}}catch(a){r.e(a)}finally{r.f()}this.Eh.gt(),this.Ol.gt(),null===(t=this.Al)||void 0===t||t.gt(),this.El.forEach((function(t){return t.On()}))}},{key:"At",value:function(){return D((0,r.Z)((0,a.Z)(n.prototype),"At",this).call(this))}},{key:"Ct",value:function(t){if("Line"!==this.Ll&&"Area"!==this.Ll&&"Baseline"!==this.Ll||!this.cn.crosshairMarkerVisible)return null;var e=this.Lt.qh(t);return null===e?null:{ct:e.Vt[3],ot:this.fa(),Bt:this.va(),Dt:this.pa(),Rt:this.ma(t)}}},{key:"uh",value:function(){return this.cn.title}},{key:"Tt",value:function(){return this.cn.visible}},{key:"ba",value:function(t){this.El.push(new un(t,this))}},{key:"wa",value:function(t){this.El=this.El.filter((function(e){return e.Cl()!==t}))}},{key:"ga",value:function(){var t=this;if(this.wn instanceof ve!=0)return function(e){return t.wn.Fe(e)}}},{key:"Ma",value:function(){var t=this;if(this.wn instanceof ve!=0)return function(e){return t.wn.We(e)}}},{key:"ea",value:function(){return!Zt(this.At().xa())}},{key:"_a",value:function(t,e){if(!Q(t)||!Q(e)||this.Lt.Fi())return null;var n="Line"===this.Ll||"Area"===this.Ll||"Baseline"===this.Ll||"Histogram"===this.Ll?[3]:[2,1],i=this.Lt.el(t,e,n),r=null!==i?new We(i.cl,i.dl):null;if("Histogram"===this.Xh()){var a=this.cn.base,o=new We(a,a);r=null!==r?r.ts(o):o}var s=this.dn.lh();return this.El.forEach((function(n){var i,a,o,u,l=n.Rl(t,e);if(null==l?void 0:l.priceRange){var c=new We(l.priceRange.minValue,l.priceRange.maxValue);r=null!==r?r.ts(c):c}(null==l?void 0:l.margins)&&(i=s,a=l.margins,s={above:Math.max(null!==(o=null==i?void 0:i.above)&&void 0!==o?o:0,a.above),below:Math.max(null!==(u=null==i?void 0:i.below)&&void 0!==u?u:0,a.below)})})),new He(r,s)}},{key:"fa",value:function(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}},{key:"va",value:function(){switch(this.Ll){case"Line":case"Area":case"Baseline":var t=this.cn.crosshairMarkerBorderColor;if(0!==t.length)return t}return null}},{key:"pa",value:function(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}},{key:"ma",value:function(t){switch(this.Ll){case"Line":case"Area":case"Baseline":var e=this.cn.crosshairMarkerBackgroundColor;if(0!==e.length)return e}return this.$s().Hs(t).ue}},{key:"Nl",value:function(){switch(this.cn.priceFormat.type){case"custom":this.da={format:this.cn.priceFormat.formatter};break;case"volume":this.da=new It(this.cn.priceFormat.precision);break;case"percent":this.da=new Lt(this.cn.priceFormat.precision);break;default:var t=Math.pow(10,this.cn.priceFormat.precision);this.da=new Mt(t,this.cn.priceFormat.minMove*t)}null!==this.Xi&&this.Xi.Sa()}},{key:"Yl",value:function(){var t=this,e=this.qt().yt();if(e.ka()&&!this.Lt.Fi()){var n=D(this.Lt.Qh());this.Il=this.Bl.map((function(i,r){var a=D(e.ya(i.time,!0)),o=a<n?1:-1;return{time:D(t.Lt.nl(a,o)).se,position:i.position,shape:i.shape,color:i.color,id:i.id,Jr:r,text:i.text,size:i.size,originalTime:i.originalTime}}))}else this.Il=[]}},{key:"Fl",value:function(t){switch(this.dn=new Ve(this,this.qt()),this.Ll){case"Bar":this.wn=new oe(this,this.qt());break;case"Candlestick":this.wn=new he(this,this.qt());break;case"Line":this.wn=new me(this,this.qt());break;case"Custom":this.wn=new ve(this,this.qt(),N(t));break;case"Area":this.wn=new ie(this,this.qt());break;case"Baseline":this.wn=new le(this,this.qt());break;case"Histogram":this.wn=new ye(this,this.qt());break;default:throw Error("Unknown chart style assigned: "+this.Ll)}}},{key:"ha",value:function(t,e){var n=[];return ln(this.El,t,e,n),n}}]),n}(Je),dn=function(){function t(e){(0,h.Z)(this,t),this.cn=e}return(0,f.Z)(t,[{key:"Ca",value:function(t,e,n){var i=t;if(0===this.cn.mode)return i;var r=n.vn(),a=r.Pt();if(null===a)return i;var o=r.Ot(t,a),s=n.Ta().filter((function(t){return t instanceof vn})).reduce((function(t,i){if(n.dr(i)||!i.Tt())return t;var r=i.At(),a=i.In();if(r.Fi()||!a.Kr(e))return t;var o=a.qh(e);if(null===o)return t;var s=R(i.Pt());return t.concat([r.Ot(o.Vt[3],s.Vt)])}),[]);if(0===s.length)return i;s.sort((function(t,e){return Math.abs(t-o)-Math.abs(e-o)}));var u=s[0];return i=r.pn(u,a)}}]),t}(),pn=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;return(0,h.Z)(this,n),(t=e.apply(this,arguments)).Lt=null,t}return(0,f.Z)(n,[{key:"it",value:function(t){this.Lt=t}},{key:"Z",value:function(t){var e=this,n=t.context,i=t.bitmapSize,r=t.horizontalPixelRatio,a=t.verticalPixelRatio;if(null!==this.Lt){var s=Math.max(1,Math.floor(r));n.lineWidth=s,function(t,e){t.save(),t.lineWidth%2&&t.translate(.5,.5),e(),t.restore()}(n,(function(){var t=D(e.Lt);if(t.Pa){n.strokeStyle=t.Ra,M(n,t.Da),n.beginPath();var u,l=(0,o.Z)(t.Oa);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=Math.round(c.Aa*r);n.moveTo(h,-s),n.lineTo(h,i.height+s)}}catch(y){l.e(y)}finally{l.f()}n.stroke()}if(t.Va){n.strokeStyle=t.Ba,M(n,t.Ia),n.beginPath();var f,v=(0,o.Z)(t.za);try{for(v.s();!(f=v.n()).done;){var d=f.value,p=Math.round(d.Aa*a);n.moveTo(-s,p),n.lineTo(i.width+s,p)}}catch(y){v.e(y)}finally{v.f()}n.stroke()}}))}}}]),n}(ct),yn=function(){function t(e){(0,h.Z)(this,t),this.Ht=new pn,this.bt=!0,this.nn=e}return(0,f.Z)(t,[{key:"gt",value:function(){this.bt=!0}},{key:"xt",value:function(){if(this.bt){var t=this.nn.qt().W().grid,e={Va:t.horzLines.visible,Pa:t.vertLines.visible,Ba:t.horzLines.color,Ra:t.vertLines.color,Ia:t.horzLines.style,Da:t.vertLines.style,za:this.nn.vn().Ea(),Oa:(this.nn.qt().yt().Ea()||[]).map((function(t){return{Aa:t.coord}}))};this.Ht.it(e),this.bt=!1}return this.Ht}}]),t}(),mn=function(){function t(e){(0,h.Z)(this,t),this.wn=new yn(e)}return(0,f.Z)(t,[{key:"Wh",value:function(){return this.wn}}]),t}(),gn={La:4,Na:1e-4};function kn(t,e){var n=100*(t-e)/e;return e<0?-n:n}function bn(t,e){var n=kn(t.Sh(),e),i=kn(t.kh(),e);return new We(n,i)}function wn(t,e){var n=100*(t-e)/e+100;return e<0?-n:n}function _n(t,e){var n=wn(t.Sh(),e),i=wn(t.kh(),e);return new We(n,i)}function En(t,e){var n=Math.abs(t);if(n<1e-15)return 0;var i=Math.log10(n+e.Na)+e.La;return t<0?-i:i}function Sn(t,e){var n=Math.abs(t);if(n<1e-15)return 0;var i=Math.pow(10,n-e.La)-e.Na;return t<0?-i:i}function Cn(t,e){if(null===t)return null;var n=En(t.Sh(),e),i=En(t.kh(),e);return new We(n,i)}function Tn(t,e){if(null===t)return null;var n=Sn(t.Sh(),e),i=Sn(t.kh(),e);return new We(n,i)}function xn(t){if(null===t)return gn;var e=Math.abs(t.kh()-t.Sh());if(e>=1||e<1e-15)return gn;var n=Math.ceil(Math.abs(Math.log10(e))),i=gn.La+n;return{La:i,Na:1/Math.pow(10,i)}}var Zn,An=function(){function t(e,n){if((0,h.Z)(this,t),this.Fa=e,this.Wa=n,function(t){if(t<0)return!1;for(var e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(var i=this.Fa;1!==i;){if(i%2==0)this.ja.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),i/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}return(0,f.Z)(t,[{key:"Ha",value:function(t,e,n){for(var i,r=0===this.Fa?0:1/this.Fa,a=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,s=this.Wa[0];;){var u=zt(a,r,1e-14)&&a>r+1e-14,l=zt(a,n*s,1e-14),c=zt(a,1,1e-14);if(!(u&&l&&c))break;a/=s,s=this.Wa[++o%this.Wa.length]}if(a<=r+1e-14&&(a=r),a=Math.max(1,a),this.ja.length>0&&(i=a,1,1e-14,Math.abs(i-1)<1e-14))for(o=0,s=this.ja[0];zt(a,n*s,1e-14)&&a>r+1e-14;)a/=s,s=this.ja[++o%this.ja.length];return a}}]),t}(),On=function(){function t(e,n,i,r){(0,h.Z)(this,t),this.$a=[],this.Li=e,this.Fa=n,this.Ua=i,this.qa=r}return(0,f.Z)(t,[{key:"Ha",value:function(t,e){if(t<e)throw new Error("high < low");var n=this.Li.zt(),i=(t-e)*this.Ya()/n,r=new An(this.Fa,[2,2.5,2]),a=new An(this.Fa,[2,2,2.5]),o=new An(this.Fa,[2.5,2,2]),s=[];return s.push(r.Ha(t,e,i),a.Ha(t,e,i),o.Ha(t,e,i)),function(t){if(t.length<1)throw Error("array is empty");for(var e=t[0],n=1;n<t.length;++n)t[n]<e&&(e=t[n]);return e}(s)}},{key:"Xa",value:function(){var t=this.Li,e=t.Pt();if(null!==e){var n=t.zt(),i=this.Ua(n-1,e),r=this.Ua(0,e),a=this.Li.W().entireTextOnly?this.Ka()/2:0,o=a,s=n-1-a,u=Math.max(i,r),l=Math.min(i,r);if(u!==l){for(var c=this.Ha(u,l),h=u%c,f=u>=l?1:-1,v=null,d=0,p=u-(h+=h<0?c:0);p>l;p-=c){var y=this.qa(p,e,!0);null!==v&&Math.abs(y-v)<this.Ya()||y<o||y>s||(d<this.$a.length?(this.$a[d].Aa=y,this.$a[d].Za=t.Ga(p)):this.$a.push({Aa:y,Za:t.Ga(p)}),d++,v=y,t.Ja()&&(c=this.Ha(p*f,l)))}this.$a.length=d}else this.$a=[]}else this.$a=[]}},{key:"Ea",value:function(){return this.$a}},{key:"Ka",value:function(){return this.Li.P()}},{key:"Ya",value:function(){return Math.ceil(2.5*this.Ka())}}]),t}();function Mn(t){return t.slice().sort((function(t,e){return D(t.Zi())-D(e.Zi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Zn||(Zn={}));var Ln=new Lt,In=new Mt(100,1),Nn=function(){function t(e,n,i,r){(0,h.Z)(this,t),this.Qa=0,this.io=null,this.Dh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new H,this.oo=new H,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=In,this.vo=xn(null),this.po=e,this.cn=n,this.mo=i,this.bo=r,this.wo=new On(this,100,this.Mo.bind(this),this.xo.bind(this))}return(0,f.Z)(t,[{key:"xa",value:function(){return this.po}},{key:"W",value:function(){return this.cn}},{key:"Nh",value:function(t){if(K(this.cn,t),this.Sa(),void 0!==t.mode&&this.So({yr:t.mode}),void 0!==t.scaleMargins){var e=N(t.scaleMargins.top),n=N(t.scaleMargins.bottom);if(e<0||e>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(e));if(n<0||n>1||e+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n));if(e+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(e+n));this.ko(),this.co=null}}},{key:"yo",value:function(){return this.cn.autoScale}},{key:"Ja",value:function(){return 1===this.cn.mode}},{key:"ph",value:function(){return 2===this.cn.mode}},{key:"Co",value:function(){return 3===this.cn.mode}},{key:"yr",value:function(){return{Wn:this.cn.autoScale,To:this.cn.invertScale,yr:this.cn.mode}}},{key:"So",value:function(t){var e=this.yr(),n=null;void 0!==t.Wn&&(this.cn.autoScale=t.Wn),void 0!==t.yr&&(this.cn.mode=t.yr,2!==t.yr&&3!==t.yr||(this.cn.autoScale=!0),this.so.eo=!1),1===e.yr&&t.yr!==e.yr&&(function(t,e){if(null===t)return!1;var n=Sn(t.Sh(),e),i=Sn(t.kh(),e);return isFinite(n)&&isFinite(i)}(this.Dh,this.vo)?null!==(n=Tn(this.Dh,this.vo))&&this.Po(n):this.cn.autoScale=!0),1===t.yr&&t.yr!==e.yr&&(null!==(n=Cn(this.Dh,this.vo))&&this.Po(n));var i=e.yr!==this.cn.mode;i&&(2===e.yr||this.ph())&&this.Sa(),i&&(3===e.yr||this.Co())&&this.Sa(),void 0!==t.To&&e.To!==t.To&&(this.cn.invertScale=t.To,this.Ro()),this.oo.m(e,this.yr())}},{key:"Do",value:function(){return this.oo}},{key:"P",value:function(){return this.mo.fontSize}},{key:"zt",value:function(){return this.Qa}},{key:"Oo",value:function(t){this.Qa!==t&&(this.Qa=t,this.ko(),this.co=null)}},{key:"Ao",value:function(){if(this.io)return this.io;var t=this.zt()-this.Vo()-this.Bo();return this.io=t,t}},{key:"Ah",value:function(){return this.Io(),this.Dh}},{key:"Po",value:function(t,e){var n=this.Dh;(e||null===n&&null!==t||null!==n&&!n.Mh(t))&&(this.co=null,this.Dh=t)}},{key:"Fi",value:function(){return this.Io(),0===this.Qa||!this.Dh||this.Dh.Fi()}},{key:"zo",value:function(t){return this.To()?t:this.zt()-1-t}},{key:"Ot",value:function(t,e){return this.ph()?t=kn(t,e):this.Co()&&(t=wn(t,e)),this.xo(t,e)}},{key:"Qs",value:function(t,e,n){this.Io();for(var i=this.Bo(),r=D(this.Ah()),a=r.Sh(),o=r.kh(),s=this.Ao()-1,u=this.To(),l=s/(o-a),c=void 0===n?0:n.from,h=void 0===n?t.length:n.to,f=this.Eo(),v=c;v<h;v++){var d=t[v],p=d.ct;if(!isNaN(p)){var y=p;null!==f&&(y=f(d.ct,e));var m=i+l*(y-a),g=u?m:this.Qa-1-m;d.rt=g}}}},{key:"me",value:function(t,e,n){this.Io();for(var i=this.Bo(),r=D(this.Ah()),a=r.Sh(),o=r.kh(),s=this.Ao()-1,u=this.To(),l=s/(o-a),c=void 0===n?0:n.from,h=void 0===n?t.length:n.to,f=this.Eo(),v=c;v<h;v++){var d=t[v],p=d.we,y=d.ge,m=d.Me,g=d.xe;null!==f&&(p=f(d.we,e),y=f(d.ge,e),m=f(d.Me,e),g=f(d.xe,e));var k=i+l*(p-a),b=u?k:this.Qa-1-k;d.ve=b,k=i+l*(y-a),b=u?k:this.Qa-1-k,d.ce=b,k=i+l*(m-a),b=u?k:this.Qa-1-k,d.de=b,k=i+l*(g-a),b=u?k:this.Qa-1-k,d.pe=b}}},{key:"pn",value:function(t,e){var n=this.Mo(t,e);return this.Lo(n,e)}},{key:"Lo",value:function(t,e){var n=t;return this.ph()?n=function(t,e){return e<0&&(t=-t),t/100*e+e}(n,e):this.Co()&&(n=function(t,e){return t-=100,e<0&&(t=-t),t/100*e+e}(n,e)),n}},{key:"Ta",value:function(){return this._o}},{key:"No",value:function(){if(this.uo)return this.uo;for(var t=[],e=0;e<this._o.length;e++){var n=this._o[e];null===n.Zi()&&n.Gi(e+1),t.push(n)}return t=Mn(t),this.uo=t,this.uo}},{key:"Fo",value:function(t){-1===this._o.indexOf(t)&&(this._o.push(t),this.Sa(),this.Wo())}},{key:"jo",value:function(t){var e=this._o.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this._o.splice(e,1),0===this._o.length&&(this.So({Wn:!0}),this.Po(null)),this.Sa(),this.Wo()}},{key:"Pt",value:function(){var t,e=null,n=(0,o.Z)(this._o);try{for(n.s();!(t=n.n()).done;){var i=t.value.Pt();null!==i&&(null===e||i.ia<e.ia)&&(e=i)}}catch(r){n.e(r)}finally{n.f()}return null===e?null:e.Vt}},{key:"To",value:function(){return this.cn.invertScale}},{key:"Ea",value:function(){var t=null===this.Pt();if(null!==this.co&&(t||this.co.Ho===t))return this.co.Ea;this.wo.Xa();var e=this.wo.Ea();return this.co={Ea:e,Ho:t},this.ao.m(),e}},{key:"$o",value:function(){return this.ao}},{key:"Uo",value:function(t){this.ph()||this.Co()||null===this.do&&null===this.no&&(this.Fi()||(this.do=this.Qa-t,this.no=D(this.Ah()).xh()))}},{key:"qo",value:function(t){if(!this.ph()&&!this.Co()&&null!==this.do){this.So({Wn:!1}),(t=this.Qa-t)<0&&(t=0);var e=(this.do+.2*(this.Qa-1))/(t+.2*(this.Qa-1)),n=D(this.no).xh();e=Math.max(e,.1),n.Ch(e),this.Po(n)}}},{key:"Yo",value:function(){this.ph()||this.Co()||(this.do=null,this.no=null)}},{key:"Xo",value:function(t){this.yo()||null===this.fo&&null===this.no&&(this.Fi()||(this.fo=t,this.no=D(this.Ah()).xh()))}},{key:"Ko",value:function(t){if(!this.yo()&&null!==this.fo){var e=D(this.Ah()).yh()/(this.Ao()-1),n=t-this.fo;this.To()&&(n*=-1);var i=n*e,r=D(this.no).xh();r.Th(i),this.Po(r,!0),this.co=null}}},{key:"Zo",value:function(){this.yo()||null!==this.fo&&(this.fo=null,this.no=null)}},{key:"ca",value:function(){return this.da||this.Sa(),this.da}},{key:"Wi",value:function(t,e){switch(this.cn.mode){case 2:return this.Go(kn(t,e));case 3:return this.ca().format(wn(t,e));default:return this.zh(t)}}},{key:"Ga",value:function(t){switch(this.cn.mode){case 2:return this.Go(t);case 3:return this.ca().format(t);default:return this.zh(t)}}},{key:"Wl",value:function(t){return this.zh(t,D(this.Jo()).ca())}},{key:"jl",value:function(t,e){return t=kn(t,e),this.Go(t,Ln)}},{key:"Qo",value:function(){return this._o}},{key:"t_",value:function(t){this.so={ro:t,eo:!1}}},{key:"On",value:function(){this._o.forEach((function(t){return t.On()}))}},{key:"Sa",value:function(){this.co=null;var t=this.Jo(),e=100;null!==t&&(e=Math.round(1/t.ua())),this.da=In,this.ph()?(this.da=Ln,e=100):this.Co()?(this.da=new Mt(100,1),e=100):null!==t&&(this.da=t.ca()),this.wo=new On(this,e,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}},{key:"Wo",value:function(){this.uo=null}},{key:"Jo",value:function(){return this._o[0]||null}},{key:"Vo",value:function(){return this.To()?this.cn.scaleMargins.bottom*this.zt()+this.lo:this.cn.scaleMargins.top*this.zt()+this.ho}},{key:"Bo",value:function(){return this.To()?this.cn.scaleMargins.top*this.zt()+this.ho:this.cn.scaleMargins.bottom*this.zt()+this.lo}},{key:"Io",value:function(){this.so.eo||(this.so.eo=!0,this.i_())}},{key:"ko",value:function(){this.io=null}},{key:"xo",value:function(t,e){if(this.Io(),this.Fi())return 0;t=this.Ja()&&t?En(t,this.vo):t;var n=D(this.Ah()),i=this.Bo()+(this.Ao()-1)*(t-n.Sh())/n.yh();return this.zo(i)}},{key:"Mo",value:function(t,e){if(this.Io(),this.Fi())return 0;var n=this.zo(t),i=D(this.Ah()),r=i.Sh()+i.yh()*((n-this.Bo())/(this.Ao()-1));return this.Ja()?Sn(r,this.vo):r}},{key:"Ro",value:function(){this.co=null,this.wo.Xa()}},{key:"i_",value:function(){var t=this.so.ro;if(null!==t){var e,n,i,r=null,a=this.Qo(),s=0,u=0,l=(0,o.Z)(a);try{for(l.s();!(e=l.n()).done;){var c=e.value;if(c.Tt()){var h=c.Pt();if(null!==h){var f=c.Rl(t.Os(),t.di()),v=f&&f.Ah();if(null!==v){switch(this.cn.mode){case 1:v=Cn(v,this.vo);break;case 2:v=bn(v,h.Vt);break;case 3:v=_n(v,h.Vt)}if(r=null===r?v:r.ts(D(v)),null!==f){var d=f.Vh();null!==d&&(s=Math.max(s,d.above),u=Math.max(s,d.below))}}}}}}catch(b){l.e(b)}finally{l.f()}if(s===this.ho&&u===this.lo||(this.ho=s,this.lo=u,this.co=null,this.ko()),null!==r){if(r.Sh()===r.kh()){var p=this.Jo(),y=5*(null===p||this.ph()||this.Co()?1:p.ua());this.Ja()&&(r=Tn(r,this.vo)),r=new We(r.Sh()-y,r.kh()+y),this.Ja()&&(r=Cn(r,this.vo))}if(this.Ja()){var m=Tn(r,this.vo),g=xn(m);if(n=g,i=this.vo,n.La!==i.La||n.Na!==i.Na){var k=null!==this.no?Tn(this.no,this.vo):null;this.vo=g,r=Cn(m,g),null!==k&&(this.no=Cn(k,g))}}this.Po(r)}else null===this.Dh&&(this.Po(new We(-.5,.5)),this.vo=xn(null));this.so.eo=!0}}},{key:"Eo",value:function(){var t=this;return this.ph()?kn:this.Co()?wn:this.Ja()?function(e){return En(e,t.vo)}:null}},{key:"n_",value:function(t,e,n){return void 0===e?(void 0===n&&(n=this.ca()),n.format(t)):e(t)}},{key:"zh",value:function(t,e){return this.n_(t,this.bo.priceFormatter,e)}},{key:"Go",value:function(t,e){return this.n_(t,this.bo.percentageFormatter,e)}}]),t}(),Dn=function(){function t(e,n){(0,h.Z)(this,t),this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new H,this.wl=e,this.Ui=n,this.l_=new mn(this);var i=n.W();this.a_=this.o_("left",i.leftPriceScale),this.__=this.o_("right",i.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(i)}return(0,f.Z)(t,[{key:"c_",value:function(t){if(t.leftPriceScale&&this.a_.Nh(t.leftPriceScale),t.rightPriceScale&&this.__.Nh(t.rightPriceScale),t.localization&&(this.a_.Sa(),this.__.Sa()),t.overlayPriceScales)for(var e=0,n=Array.from(this.s_.values());e<n.length;e++){var i=D(n[e][0].At());i.Nh(t.overlayPriceScales),t.localization&&i.Sa()}}},{key:"d_",value:function(t){switch(t){case"left":return this.a_;case"right":return this.__}return this.s_.has(t)?N(this.s_.get(t))[0].At():null}},{key:"S",value:function(){this.qt().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach((function(t){t.S&&t.S()})),this.h_.m()}},{key:"v_",value:function(){return this.r_}},{key:"p_",value:function(t){this.r_=t}},{key:"qt",value:function(){return this.Ui}},{key:"$i",value:function(){return this.e_}},{key:"zt",value:function(){return this.Qa}},{key:"m_",value:function(t){this.e_=t,this.b_()}},{key:"Oo",value:function(t){var e=this;this.Qa=t,this.a_.Oo(t),this.__.Oo(t),this._o.forEach((function(n){if(e.dr(n)){var i=n.At();null!==i&&i.Oo(t)}})),this.b_()}},{key:"Ta",value:function(){return this._o}},{key:"dr",value:function(t){var e=t.At();return null===e||this.a_!==e&&this.__!==e}},{key:"Fo",value:function(t,e,n){var i=void 0!==n?n:this.g_().w_+1;this.M_(t,e,i)}},{key:"jo",value:function(t){var e=this._o.indexOf(t);I(-1!==e,"removeDataSource: invalid data source"),this._o.splice(e,1);var n=D(t.At()).xa();if(this.s_.has(n)){var i=N(this.s_.get(n)),r=i.indexOf(t);-1!==r&&(i.splice(r,1),0===i.length&&this.s_.delete(n))}var a=t.At();a&&a.Ta().indexOf(t)>=0&&a.jo(t),null!==a&&(a.Wo(),this.x_(a)),this.uo=null}},{key:"pr",value:function(t){return t===this.a_?"left":t===this.__?"right":"overlay"}},{key:"S_",value:function(){return this.a_}},{key:"k_",value:function(){return this.__}},{key:"y_",value:function(t,e){t.Uo(e)}},{key:"C_",value:function(t,e){t.qo(e),this.b_()}},{key:"T_",value:function(t){t.Yo()}},{key:"P_",value:function(t,e){t.Xo(e)}},{key:"R_",value:function(t,e){t.Ko(e),this.b_()}},{key:"D_",value:function(t){t.Zo()}},{key:"b_",value:function(){this._o.forEach((function(t){t.On()}))}},{key:"vn",value:function(){var t=null;return this.Ui.W().rightPriceScale.visible&&0!==this.__.Ta().length?t=this.__:this.Ui.W().leftPriceScale.visible&&0!==this.a_.Ta().length?t=this.a_:0!==this._o.length&&(t=this._o[0].At()),null===t&&(t=this.__),t}},{key:"vr",value:function(){var t=null;return this.Ui.W().rightPriceScale.visible?t=this.__:this.Ui.W().leftPriceScale.visible&&(t=this.a_),t}},{key:"x_",value:function(t){null!==t&&t.yo()&&this.O_(t)}},{key:"A_",value:function(t){var e=this.wl.Xs();t.So({Wn:!0}),null!==e&&t.t_(e),this.b_()}},{key:"V_",value:function(){this.O_(this.a_),this.O_(this.__)}},{key:"B_",value:function(){var t=this;this.x_(this.a_),this.x_(this.__),this._o.forEach((function(e){t.dr(e)&&t.x_(e.At())})),this.b_(),this.Ui.Fh()}},{key:"No",value:function(){return null===this.uo&&(this.uo=Mn(this._o)),this.uo}},{key:"I_",value:function(){return this.h_}},{key:"z_",value:function(){return this.l_}},{key:"O_",value:function(t){var e=t.Qo();if(e&&e.length>0&&!this.wl.Fi()){var n=this.wl.Xs();null!==n&&t.t_(n)}t.On()}},{key:"g_",value:function(){var t=this.No();if(0===t.length)return{E_:0,w_:0};for(var e=0,n=0,i=0;i<t.length;i++){var r=t[i].Zi();null!==r&&(r<e&&(e=r),r>n&&(n=r))}return{E_:e,w_:n}}},{key:"M_",value:function(t,e,n){var i=this.d_(e);if(null===i&&(i=this.o_(e,this.Ui.W().overlayPriceScales)),this._o.push(t),!Zt(e)){var r=this.s_.get(e)||[];r.push(t),this.s_.set(e,r)}i.Fo(t),t.Ji(i),t.Gi(n),this.x_(i),this.uo=null}},{key:"u_",value:function(t,e,n){e.yr!==n.yr&&this.O_(t)}},{key:"o_",value:function(t,e){var n=Object.assign({visible:!0,autoScale:!0},Y(e)),i=new Nn(t,n,this.Ui.W().layout,this.Ui.W().localization);return i.Oo(this.zt()),i}}]),t}(),Rn=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;(0,h.Z)(this,t),this.Ke=0,this.Ze=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.L_=e,this.N_=n,this.tr=i}return(0,f.Z)(t,[{key:"F_",value:function(t){var e=t.time,n=this.N_.cacheKey(e),i=this.Qe.get(n);if(void 0!==i)return i.W_;if(this.Ke===this.tr){var r=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(N(r)),this.Ge++,this.Ke--}var a=this.L_(t);return this.Qe.set(n,{W_:a,er:this.Ze}),this.Je.set(this.Ze,n),this.Ke++,this.Ze++,a}}]),t}(),Pn=function(){function t(e,n){(0,h.Z)(this,t),I(e<=n,"right should be >= left"),this.j_=e,this.H_=n}return(0,f.Z)(t,[{key:"Os",value:function(){return this.j_}},{key:"di",value:function(){return this.H_}},{key:"U_",value:function(){return this.H_-this.j_+1}},{key:"Kr",value:function(t){return this.j_<=t&&t<=this.H_}},{key:"Mh",value:function(t){return this.j_===t.Os()&&this.H_===t.di()}}]),t}();function Fn(t,e){return null===t||null===e?t===e:t.Mh(e)}var Un=function(){function t(){(0,h.Z)(this,t),this.q_=new Map,this.Qe=null,this.Y_=!1}return(0,f.Z)(t,[{key:"X_",value:function(t){this.Y_=t,this.Qe=null}},{key:"K_",value:function(t,e){this.Z_(e),this.Qe=null;for(var n=e;n<t.length;++n){var i=t[n],r=this.q_.get(i.timeWeight);void 0===r&&(r=[],this.q_.set(i.timeWeight,r)),r.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}},{key:"G_",value:function(t,e){var n=Math.ceil(e/t);return null!==this.Qe&&this.Qe.J_===n||(this.Qe={Ea:this.Q_(n),J_:n}),this.Qe.Ea}},{key:"Z_",value:function(t){if(0!==t){var e=[];this.q_.forEach((function(n,i){t<=n[0].index?e.push(i):n.splice(Jt(n,t,(function(e){return e.index<t})),1/0)}));for(var n=0,i=e;n<i.length;n++){var r=i[n];this.q_.delete(r)}}else this.q_.clear()}},{key:"Q_",value:function(t){var e,n=[],i=(0,o.Z)(Array.from(this.q_.keys()).sort((function(t,e){return e-t})));try{for(i.s();!(e=i.n()).done;){var r=e.value;if(this.q_.get(r)){var a=n;n=[];for(var s=a.length,u=0,l=N(this.q_.get(r)),c=l.length,h=1/0,f=-1/0,v=0;v<c;v++){for(var d=l[v],p=d.index;u<s;){var y=a[u],m=y.index;if(!(m<p)){h=m;break}u++,n.push(y),f=m,h=1/0}if(h-p>=t&&p-f>=t)n.push(d),f=p;else if(this.Y_)return a}for(;u<s;u++)n.push(a[u])}}}catch(g){i.e(g)}finally{i.f()}return n}}]),t}(),Vn=function(){function t(e){(0,h.Z)(this,t),this.tu=e}return(0,f.Z)(t,[{key:"iu",value:function(){return null===this.tu?null:new Pn(Math.floor(this.tu.Os()),Math.ceil(this.tu.di()))}},{key:"nu",value:function(){return this.tu}}],[{key:"su",value:function(){return new t(null)}}]),t}();function Bn(t,e){return t.weight>e.weight?t:e}var zn,jn,qn,Wn,Hn,Kn=function(){function t(e,n,i,r){(0,h.Z)(this,t),this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new Un,this.lu=new Map,this.au=Vn.su(),this.ou=!0,this._u=new H,this.uu=new H,this.cu=new H,this.du=null,this.fu=null,this.vu=[],this.cn=n,this.bo=i,this.pu=n.rightOffset,this.mu=n.barSpacing,this.Ui=e,this.N_=r,this.bu(),this.hu.X_(n.uniformDistribution)}return(0,f.Z)(t,[{key:"W",value:function(){return this.cn}},{key:"wu",value:function(t){K(this.bo,t),this.gu(),this.bu()}},{key:"Nh",value:function(t,e){var n;K(this.cn,t),this.cn.fixLeftEdge&&this.Mu(),this.cn.fixRightEdge&&this.xu(),void 0!==t.barSpacing&&this.Ui.Gn(t.barSpacing),void 0!==t.rightOffset&&this.Ui.Jn(t.rightOffset),void 0!==t.minBarSpacing&&this.Ui.Gn(null!==(n=t.barSpacing)&&void 0!==n?n:this.mu),this.gu(),this.bu(),this.cu.m()}},{key:"mn",value:function(t){var e,n;return null!==(n=null===(e=this.ru[t])||void 0===e?void 0:e.time)&&void 0!==n?n:null}},{key:"qi",value:function(t){var e;return null!==(e=this.ru[t])&&void 0!==e?e:null}},{key:"ya",value:function(t,e){var n=this;if(this.ru.length<1)return null;if(this.N_.key(t)>this.N_.key(this.ru[this.ru.length-1].time))return e?this.ru.length-1:null;var i=Jt(this.ru,this.N_.key(t),(function(t,e){return n.N_.key(t.time)<e}));return this.N_.key(t)<this.N_.key(this.ru[i].time)?e?i:null:i}},{key:"Fi",value:function(){return 0===this.e_||0===this.ru.length||null===this.eu}},{key:"ka",value:function(){return this.ru.length>0}},{key:"Xs",value:function(){return this.Su(),this.au.iu()}},{key:"ku",value:function(){return this.Su(),this.au.nu()}},{key:"yu",value:function(){var t=this.Xs();if(null===t)return null;var e={from:t.Os(),to:t.di()};return this.Cu(e)}},{key:"Cu",value:function(t){var e=Math.round(t.from),n=Math.round(t.to),i=D(this.Tu()),r=D(this.Bn());return{from:D(this.qi(Math.max(i,e))),to:D(this.qi(Math.min(r,n)))}}},{key:"Pu",value:function(t){return{from:D(this.ya(t.from,!0)),to:D(this.ya(t.to,!0))}}},{key:"$i",value:function(){return this.e_}},{key:"m_",value:function(t){if(isFinite(t)&&!(t<=0)&&this.e_!==t){var e=this.ku(),n=this.e_;if(this.e_=t,this.ou=!0,this.cn.lockVisibleTimeRangeOnResize&&0!==n){var i=this.mu*t/n;this.mu=i}if(this.cn.fixLeftEdge&&null!==e&&e.Os()<=0){var r=n-t;this.pu-=Math.round(r/this.mu)+1,this.ou=!0}this.Ru(),this.Du()}}},{key:"Et",value:function(t){if(this.Fi()||!Q(t))return 0;var e=this.Ou()+this.pu-t;return this.e_-(e+.5)*this.mu-1}},{key:"Js",value:function(t,e){for(var n=this.Ou(),i=void 0===e?0:e.from,r=void 0===e?t.length:e.to,a=i;a<r;a++){var o=t[a].ut,s=n+this.pu-o,u=this.e_-(s+.5)*this.mu-1;t[a].et=u}}},{key:"Au",value:function(t){return Math.ceil(this.Vu(t))}},{key:"Jn",value:function(t){this.ou=!0,this.pu=t,this.Du(),this.Ui.Bu(),this.Ui.Fh()}},{key:"he",value:function(){return this.mu}},{key:"Gn",value:function(t){this.Iu(t),this.Du(),this.Ui.Bu(),this.Ui.Fh()}},{key:"zu",value:function(){return this.pu}},{key:"Ea",value:function(){if(this.Fi())return null;if(null!==this.fu)return this.fu;var t,e=this.mu,n=5*(this.Ui.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(n/e),r=D(this.Xs()),a=Math.max(r.Os(),r.Os()-i),s=Math.max(r.di(),r.di()-i),u=this.hu.G_(e,n),l=this.Tu()+i,c=this.Bn()-i,h=this.Eu(),f=this.cn.fixLeftEdge||h,v=this.cn.fixRightEdge||h,d=0,p=(0,o.Z)(u);try{for(p.s();!(t=p.n()).done;){var y=t.value;if(a<=y.index&&y.index<=s){var m=void 0;d<this.vu.length?((m=this.vu[d]).coord=this.Et(y.index),m.label=this.Lu(y),m.weight=y.weight):(m={needAlignCoordinate:!1,coord:this.Et(y.index),label:this.Lu(y),weight:y.weight},this.vu.push(m)),this.mu>n/2&&!h?m.needAlignCoordinate=!1:m.needAlignCoordinate=f&&y.index<=l||v&&y.index>=c,d++}}}catch(g){p.e(g)}finally{p.f()}return this.vu.length=d,this.fu=this.vu,this.vu}},{key:"Nu",value:function(){this.ou=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}},{key:"Fu",value:function(t){this.ou=!0,this.eu=t,this.Du(),this.Mu()}},{key:"Wu",value:function(t,e){var n=this.Vu(t),i=this.he(),r=i+e*(i/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.zu()+(n-this.Vu(t)))}},{key:"Uo",value:function(t){this.fo&&this.Zo(),null===this.do&&null===this.du&&(this.Fi()||(this.do=t,this.ju()))}},{key:"qo",value:function(t){if(null!==this.du){var e=Bt(this.e_-t,0,this.e_),n=Bt(this.e_-D(this.do),0,this.e_);0!==e&&0!==n&&this.Gn(this.du.he*e/n)}}},{key:"Yo",value:function(){null!==this.do&&(this.do=null,this.Hu())}},{key:"Xo",value:function(t){null===this.fo&&null===this.du&&(this.Fi()||(this.fo=t,this.ju()))}},{key:"Ko",value:function(t){if(null!==this.fo){var e=(this.fo-t)/this.he();this.pu=D(this.du).zu+e,this.ou=!0,this.Du()}}},{key:"Zo",value:function(){null!==this.fo&&(this.fo=null,this.Hu())}},{key:"$u",value:function(){this.Uu(this.cn.rightOffset)}},{key:"Uu",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var n=this.pu,i=performance.now();this.Ui.Xn({qu:function(t){return(t-i)/e>=1},Yu:function(r){var a=(r-i)/e;return a>=1?t:n+(t-n)*a}})}},{key:"gt",value:function(t,e){this.ou=!0,this.ru=t,this.hu.K_(t,e),this.Du()}},{key:"Xu",value:function(){return this._u}},{key:"Ku",value:function(){return this.uu}},{key:"Zu",value:function(){return this.cu}},{key:"Ou",value:function(){return this.eu||0}},{key:"Gu",value:function(t){var e=t.U_();this.Iu(this.e_/e),this.pu=t.di()-this.Ou(),this.Du(),this.ou=!0,this.Ui.Bu(),this.Ui.Fh()}},{key:"Ju",value:function(){var t=this.Tu(),e=this.Bn();null!==t&&null!==e&&this.Gu(new Pn(t,e+this.cn.rightOffset))}},{key:"Qu",value:function(t){var e=new Pn(t.from,t.to);this.Gu(e)}},{key:"Yi",value:function(t){return void 0!==this.bo.timeFormatter?this.bo.timeFormatter(t.originalTime):this.N_.formatHorzItem(t.time)}},{key:"Bn",value:function(){return 0===this.ru.length?null:this.ru.length-1}},{key:"Eu",value:function(){var t=this.Ui.W(),e=t.handleScroll,n=t.handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}},{key:"Tu",value:function(){return 0===this.ru.length?null:0}},{key:"tc",value:function(t){return(this.e_-1-t)/this.mu}},{key:"Vu",value:function(t){var e=this.tc(t),n=this.Ou()+this.pu-e;return Math.round(1e6*n)/1e6}},{key:"Iu",value:function(t){var e=this.mu;this.mu=t,this.Ru(),e!==this.mu&&(this.ou=!0,this.ic())}},{key:"Su",value:function(){if(this.ou)if(this.ou=!1,this.Fi())this.nc(Vn.su());else{var t=this.Ou(),e=this.e_/this.mu,n=this.pu+t,i=new Pn(n-e+1,n);this.nc(new Vn(i))}}},{key:"Ru",value:function(){var t=this.sc();if(this.mu<t&&(this.mu=t,this.ou=!0),0!==this.e_){var e=.5*this.e_;this.mu>e&&(this.mu=e,this.ou=!0)}}},{key:"sc",value:function(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&0!==this.ru.length?this.e_/this.ru.length:this.cn.minBarSpacing}},{key:"Du",value:function(){var t=this.ec();this.pu>t&&(this.pu=t,this.ou=!0);var e=this.rc();null!==e&&this.pu<e&&(this.pu=e,this.ou=!0)}},{key:"rc",value:function(){var t=this.Tu(),e=this.eu;return null===t||null===e?null:t-e-1+(this.cn.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}},{key:"ec",value:function(){return this.cn.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}},{key:"ju",value:function(){this.du={he:this.he(),zu:this.zu()}}},{key:"Hu",value:function(){this.du=null}},{key:"Lu",value:function(t){var e=this,n=this.lu.get(t.weight);return void 0===n&&(n=new Rn((function(t){return e.hc(t)}),this.N_),this.lu.set(t.weight,n)),n.F_(t)}},{key:"hc",value:function(t){return this.N_.formatTickmark(t,this.bo)}},{key:"nc",value:function(t){var e=this.au;this.au=t,Fn(e.iu(),this.au.iu())||this._u.m(),Fn(e.nu(),this.au.nu())||this.uu.m(),this.ic()}},{key:"ic",value:function(){this.fu=null}},{key:"gu",value:function(){this.ic(),this.lu.clear()}},{key:"bu",value:function(){this.N_.updateFormatter(this.bo)}},{key:"Mu",value:function(){if(this.cn.fixLeftEdge){var t=this.Tu();if(null!==t){var e=this.Xs();if(null!==e){var n=e.Os()-t;if(n<0){var i=this.pu-n-1;this.Jn(i)}this.Ru()}}}}},{key:"xu",value:function(){this.Du(),this.Ru()}}]),t}(),Gn=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,h.Z)(this,n),(i=e.call(this)).lc=new Map,i.Lt=t,i}return(0,f.Z)(n,[{key:"Z",value:function(t){}},{key:"J",value:function(t){if(this.Lt.Tt){var e,n=t.context,i=t.mediaSize,r=0,a=(0,o.Z)(this.Lt.ac);try{for(a.s();!(e=a.n()).done;){var s=e.value;if(0!==s.Jt.length){n.font=s.R;var u=this.oc(n,s.Jt);u>i.width?s.Wu=i.width/u:s.Wu=1,r+=s._c*s.Wu}}}catch(d){a.e(d)}finally{a.f()}var l=0;switch(this.Lt.uc){case"top":l=0;break;case"center":l=Math.max((i.height-r)/2,0);break;case"bottom":l=Math.max(i.height-r,0)}n.fillStyle=this.Lt.O;var c,h=(0,o.Z)(this.Lt.ac);try{for(h.s();!(c=h.n()).done;){var f=c.value;n.save();var v=0;switch(this.Lt.cc){case"left":n.textAlign="left",v=f._c/2;break;case"center":n.textAlign="center",v=i.width/2;break;case"right":n.textAlign="right",v=i.width-1-f._c/2}n.translate(v,l),n.textBaseline="top",n.font=f.R,n.scale(f.Wu,f.Wu),n.fillText(f.Jt,0,f.dc),n.restore(),l+=f._c*f.Wu}}catch(d){h.e(d)}finally{h.f()}}}},{key:"oc",value:function(t,e){var n=this.fc(t.font),i=n.get(e);return void 0===i&&(i=t.measureText(e).width,n.set(e,i)),i}},{key:"fc",value:function(t){var e=this.lc.get(t);return void 0===e&&(e=new Map,this.lc.set(t,e)),e}}]),n}(at),Qn=function(){function t(e){(0,h.Z)(this,t),this.bt=!0,this.jt={Tt:!1,O:"",ac:[],uc:"center",cc:"center"},this.Ht=new Gn(this.jt),this.$t=e}return(0,f.Z)(t,[{key:"gt",value:function(){this.bt=!0}},{key:"xt",value:function(){return this.bt&&(this.St(),this.bt=!1),this.Ht}},{key:"St",value:function(){var t=this.$t.W(),e=this.jt;e.Tt=t.visible,e.Tt&&(e.O=t.color,e.cc=t.horzAlign,e.uc=t.vertAlign,e.ac=[{Jt:t.text,R:nt(t.fontSize,t.fontFamily,t.fontStyle),_c:1.2*t.fontSize,dc:0,Wu:0}])}}]),t}(),Jn=function(t){(0,u.Z)(n,t);var e=(0,l.Z)(n);function n(t,i){var r;return(0,h.Z)(this,n),(r=e.call(this)).cn=i,r.wn=new Qn((0,s.Z)(r)),r}return(0,f.Z)(n,[{key:"Rn",value:function(){return[]}},{key:"Pn",value:function(){return[this.wn]}},{key:"W",value:function(){return this.cn}},{key:"On",value:function(){this.wn.gt()}}]),n}(Tt);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(zn||(zn={}));var Xn=function(){function t(e,n,i){(0,h.Z)(this,t),this.vc=[],this.mc=[],this.e_=0,this.bc=null,this.wc=new H,this.gc=new H,this.Mc=null,this.xc=e,this.cn=n,this.N_=i,this.Sc=new it(this),this.wl=new Kn(this,n.timeScale,this.cn.localization,i),this.wt=new xt(this,n.crosshair),this.kc=new dn(n.crosshair),this.yc=new Jn(this,n.watermark),this.Cc(),this.vc[0].p_(2e3),this.Tc=this.Pc(0),this.Rc=this.Pc(1)}return(0,f.Z)(t,[{key:"$l",value:function(){this.Dc(At.es())}},{key:"Fh",value:function(){this.Dc(At.ss())}},{key:"sa",value:function(){this.Dc(new At(1))}},{key:"Ul",value:function(t){var e=this.Oc(t);this.Dc(e)}},{key:"Ac",value:function(){return this.bc}},{key:"Vc",value:function(t){var e=this.bc;this.bc=t,null!==e&&this.Ul(e.Bc),null!==t&&this.Ul(t.Bc)}},{key:"W",value:function(){return this.cn}},{key:"Nh",value:function(t){K(this.cn,t),this.vc.forEach((function(e){return e.c_(t)})),void 0!==t.timeScale&&this.wl.Nh(t.timeScale),void 0!==t.localization&&this.wl.wu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.wc.m(),this.Tc=this.Pc(0),this.Rc=this.Pc(1),this.$l()}},{key:"Ic",value:function(t,e){if("left"!==t)if("right"!==t){var n=this.zc(t);null!==n&&(n.At.Nh(e),this.wc.m())}else this.Nh({rightPriceScale:e});else this.Nh({leftPriceScale:e})}},{key:"zc",value:function(t){var e,n=(0,o.Z)(this.vc);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=i.d_(t);if(null!==r)return{Ut:i,At:r}}}catch(a){n.e(a)}finally{n.f()}return null}},{key:"yt",value:function(){return this.wl}},{key:"Ec",value:function(){return this.vc}},{key:"Lc",value:function(){return this.yc}},{key:"Nc",value:function(){return this.wt}},{key:"Fc",value:function(){return this.gc}},{key:"Wc",value:function(t,e){t.Oo(e),this.Bu()}},{key:"m_",value:function(t){this.e_=t,this.wl.m_(this.e_),this.vc.forEach((function(e){return e.m_(t)})),this.Bu()}},{key:"Cc",value:function(t){var e=new Dn(this.wl,this);void 0!==t?this.vc.splice(t,0,e):this.vc.push(e);var n=void 0===t?this.vc.length-1:t,i=At.es();return i.Nn(n,{Fn:0,Wn:!0}),this.Dc(i),e}},{key:"y_",value:function(t,e,n){t.y_(e,n)}},{key:"C_",value:function(t,e,n){t.C_(e,n),this.ql(),this.Dc(this.jc(t,2))}},{key:"T_",value:function(t,e){t.T_(e),this.Dc(this.jc(t,2))}},{key:"P_",value:function(t,e,n){e.yo()||t.P_(e,n)}},{key:"R_",value:function(t,e,n){e.yo()||(t.R_(e,n),this.ql(),this.Dc(this.jc(t,2)))}},{key:"D_",value:function(t,e){e.yo()||(t.D_(e),this.Dc(this.jc(t,2)))}},{key:"A_",value:function(t,e){t.A_(e),this.Dc(this.jc(t,2))}},{key:"Hc",value:function(t){this.wl.Uo(t)}},{key:"$c",value:function(t,e){var n=this.yt();if(!n.Fi()&&0!==e){var i=n.$i();t=Math.max(1,Math.min(t,i)),n.Wu(t,e),this.Bu()}}},{key:"Uc",value:function(t){this.qc(0),this.Yc(t),this.Xc()}},{key:"Kc",value:function(t){this.wl.qo(t),this.Bu()}},{key:"Zc",value:function(){this.wl.Yo(),this.Fh()}},{key:"qc",value:function(t){this.wl.Xo(t)}},{key:"Yc",value:function(t){this.wl.Ko(t),this.Bu()}},{key:"Xc",value:function(){this.wl.Zo(),this.Fh()}},{key:"Mt",value:function(){return this.mc}},{key:"Gc",value:function(t,e,n,i,r){this.wt.gn(t,e);var a=NaN,o=this.wl.Au(t),s=this.wl.Xs();null!==s&&(o=Math.min(Math.max(s.Os(),o),s.di()));var u=i.vn(),l=u.Pt();null!==l&&(a=u.pn(e,l)),a=this.kc.Ca(a,o,i),this.wt.kn(o,a,i),this.sa(),r||this.gc.m(this.wt.kt(),{x:t,y:e},n)}},{key:"Jc",value:function(t,e,n){var i=n.vn(),r=i.Pt(),a=i.Ot(t,D(r)),o=this.wl.ya(e,!0),s=this.wl.Et(D(o));this.Gc(s,a,null,n,!0)}},{key:"Qc",value:function(t){this.Nc().Cn(),this.sa(),t||this.gc.m(null,null,null)}},{key:"ql",value:function(){var t=this.wt.Ut();if(null!==t){var e=this.wt.xn(),n=this.wt.Sn();this.Gc(e,n,null,t)}this.wt.On()}},{key:"td",value:function(t,e,n){var i=this.wl.mn(0),r=this.wl.Bn();void 0!==e&&void 0!==n&&this.wl.gt(e,n);var a=this.wl.mn(0),o=this.wl.Ou(),s=this.wl.Xs();if(null!==s&&null!==i&&null!==a){var u=s.Kr(o),l=this.N_.key(i)>this.N_.key(a),c=null!==t&&t>o&&!l,h=this.wl.Bn(),f=u&&!(h===r)&&this.wl.W().shiftVisibleRangeOnNewBar;if(c&&!f){var v=t-o;this.wl.Jn(this.wl.zu()-v)}}this.wl.Fu(t)}},{key:"Kl",value:function(t){null!==t&&t.B_()}},{key:"cr",value:function(t){var e=this.vc.find((function(e){return e.No().includes(t)}));return void 0===e?null:e}},{key:"Bu",value:function(){this.yc.On(),this.vc.forEach((function(t){return t.B_()})),this.ql()}},{key:"S",value:function(){this.vc.forEach((function(t){return t.S()})),this.vc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}},{key:"nd",value:function(){return this.Sc}},{key:"mr",value:function(){return this.Sc.W()}},{key:"f_",value:function(){return this.wc}},{key:"sd",value:function(t,e,n){var i=this.vc[0],r=this.ed(e,t,i,n);return this.mc.push(r),1===this.mc.length?this.$l():this.Fh(),r}},{key:"rd",value:function(t){var e=this.cr(t),n=this.mc.indexOf(t);I(-1!==n,"Series not found"),this.mc.splice(n,1),D(e).jo(t),t.S&&t.S()}},{key:"Hl",value:function(t,e){var n=D(this.cr(t));n.jo(t);var i=this.zc(e);if(null===i){var r=t.Zi();n.Fo(t,e,r)}else{var a=i.Ut===n?t.Zi():void 0;i.Ut.Fo(t,e,a)}}},{key:"Ju",value:function(){var t=At.ss();t.$n(),this.Dc(t)}},{key:"hd",value:function(t){var e=At.ss();e.Yn(t),this.Dc(e)}},{key:"Zn",value:function(){var t=At.ss();t.Zn(),this.Dc(t)}},{key:"Gn",value:function(t){var e=At.ss();e.Gn(t),this.Dc(e)}},{key:"Jn",value:function(t){var e=At.ss();e.Jn(t),this.Dc(e)}},{key:"Xn",value:function(t){var e=At.ss();e.Xn(t),this.Dc(e)}},{key:"Un",value:function(){var t=At.ss();t.Un(),this.Dc(t)}},{key:"ld",value:function(){return this.cn.rightPriceScale.visible?"right":"left"}},{key:"ad",value:function(){return this.Rc}},{key:"q",value:function(){return this.Tc}},{key:"It",value:function(t){var e=this.Rc,n=this.Tc;if(e===n)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Mc||this.Mc.Ts!==n||this.Mc.Ps!==e)this.Mc={Ts:n,Ps:e,od:new Map};else{var r=this.Mc.od.get(t);if(void 0!==r)return r}var a=function(t,e,n){var r=q(t),a=(0,i.Z)(r,4),o=a[0],s=a[1],u=a[2],l=a[3],c=q(e),h=(0,i.Z)(c,4),f=h[0],v=h[1],d=h[2],p=h[3],y=[F(o+n*(f-o)),F(s+n*(v-s)),F(u+n*(d-u)),U(l+n*(p-l))];return"rgba(".concat(y[0],", ").concat(y[1],", ").concat(y[2],", ").concat(y[3],")")}(n,e,t/100);return this.Mc.od.set(t,a),a}},{key:"jc",value:function(t,e){var n=new At(e);if(null!==t){var i=this.vc.indexOf(t);n.Nn(i,{Fn:e})}return n}},{key:"Oc",value:function(t,e){return void 0===e&&(e=2),this.jc(this.cr(t),e)}},{key:"Dc",value:function(t){this.xc&&this.xc(t),this.vc.forEach((function(t){return t.z_().Wh().gt()}))}},{key:"ed",value:function(t,e,n,i){var r=new vn(this,t,e,n,i),a=void 0!==t.priceScaleId?t.priceScaleId:this.ld();return n.Fo(r,a),Zt(a)||r.Nh(t),r}},{key:"Pc",value:function(t){var e=this.cn.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}}]),t}();function Yn(t){return!G(t)&&!J(t)}function $n(t){return G(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(jn||(jn={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(qn||(qn={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Wn||(Wn={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Hn||(Hn={}));var ti=function(t){return t.getUTCFullYear()};var ei=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";(0,h.Z)(this,t),this._d=e,this.ud=n}return(0,f.Z)(t,[{key:"F_",value:function(t){return function(t,e,n){return e.replace(/yyyy/g,function(t){return Ot(ti(t),4)}(t)).replace(/yy/g,function(t){return Ot(ti(t)%100,2)}(t)).replace(/MMMM/g,function(t,e){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"long"})}(t,n)).replace(/MMM/g,function(t,e){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"})}(t,n)).replace(/MM/g,function(t){return Ot(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return Ot(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this._d,this.ud)}}]),t}(),ni=function(){function t(e){(0,h.Z)(this,t),this.dd=e||"%h:%m:%s"}return(0,f.Z)(t,[{key:"F_",value:function(t){return this.dd.replace("%h",Ot(t.getUTCHours(),2)).replace("%m",Ot(t.getUTCMinutes(),2)).replace("%s",Ot(t.getUTCSeconds(),2))}}]),t}(),ii={fd:"yyyy-MM-dd",vd:"%h:%m:%s",pd:" ",md:"default"},ri=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.Z)(this,t);var n=Object.assign(Object.assign({},ii),e);this.bd=new ei(n.fd,n.md),this.wd=new ni(n.vd),this.gd=n.pd}return(0,f.Z)(t,[{key:"F_",value:function(t){return"".concat(this.bd.F_(t)).concat(this.gd).concat(this.wd.F_(t))}}]),t}();function ai(t){return 60*t*60*1e3}function oi(t){return 60*t*1e3}var si=[{Md:(1,1e3),xd:10},{Md:oi(1),xd:20},{Md:oi(5),xd:21},{Md:oi(30),xd:22},{Md:ai(1),xd:30},{Md:ai(3),xd:31},{Md:ai(6),xd:32},{Md:ai(12),xd:33}];function ui(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(var n=si.length-1;n>=0;--n)if(Math.floor(e.getTime()/si[n].Md)!==Math.floor(t.getTime()/si[n].Md))return si[n].xd;return 0}function li(t){var e=t;if(J(t)&&(e=hi(t)),!Yn(e))throw new Error("time must be of type BusinessDay");var n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Sd:Math.round(n.getTime()/1e3),kd:e}}function ci(t){if(!$n(t))throw new Error("time must be of type isUTCTimestamp");return{Sd:t}}function hi(t){var e=new Date(t);if(isNaN(e.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function fi(t){J(t.time)&&(t.time=hi(t.time))}var vi=function(){function t(){(0,h.Z)(this,t)}return(0,f.Z)(t,[{key:"options",value:function(){return this.cn}},{key:"setOptions",value:function(t){this.cn=t,this.updateFormatter(t.localization)}},{key:"preprocessData",value:function(t){Array.isArray(t)?function(t){t.forEach(fi)}(t):fi(t)}},{key:"createConverterToInternalObj",value:function(t){return D(function(t){return 0===t.length?null:Yn(t[0].time)||J(t[0].time)?li:ci}(t))}},{key:"key",value:function(t){return"object"==typeof t&&"Sd"in t?t.Sd:this.key(this.convertHorzItemToInternal(t))}},{key:"cacheKey",value:function(t){var e=t;return void 0===e.kd?new Date(1e3*e.Sd).getTime():new Date(Date.UTC(e.kd.year,e.kd.month-1,e.kd.day)).getTime()}},{key:"convertHorzItemToInternal",value:function(t){return $n(e=t)?ci(e):Yn(e)?li(e):li(hi(e));var e}},{key:"updateFormatter",value:function(t){if(this.cn){var e=t.dateFormat;this.cn.timeScale.timeVisible?this.yd=new ri({fd:e,vd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",pd:"   ",md:t.locale}):this.yd=new ei(e,t.locale)}}},{key:"formatHorzItem",value:function(t){var e=t;return this.yd.F_(new Date(1e3*e.Sd))}},{key:"formatTickmark",value:function(t,e){var n=function(t,e,n){switch(t){case 0:case 10:return e?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(void 0!==i.tickMarkFormatter){var r=i.tickMarkFormatter(t.originalTime,n,e.locale);if(null!==r)return r}return function(t,e,n){var i={};switch(e){case 0:i.year="numeric";break;case 1:i.month="short";break;case 2:i.day="numeric";break;case 3:i.hour12=!1,i.hour="2-digit",i.minute="2-digit";break;case 4:i.hour12=!1,i.hour="2-digit",i.minute="2-digit",i.second="2-digit"}var r=void 0===t.kd?new Date(1e3*t.Sd):new Date(Date.UTC(t.kd.year,t.kd.month-1,t.kd.day));return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()).toLocaleString(n,i)}(t.time,n,e.locale)}},{key:"maxTickMarkWeight",value:function(t){var e=t.reduce(Bn,t[0]).weight;return e>30&&e<50&&(e=30),e}},{key:"fillWeightsForPoints",value:function(t,e){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t.length){for(var n=0===e?null:t[e-1].time.Sd,i=null!==n?new Date(1e3*n):null,r=0,a=e;a<t.length;++a){var o=t[a],s=new Date(1e3*o.time.Sd);null!==i&&(o.timeWeight=ui(s,i)),r+=o.time.Sd-(n||o.time.Sd),n=o.time.Sd,i=s}if(0===e&&t.length>1){var u=Math.ceil(r/(t.length-1)),l=new Date(1e3*(t[0].time.Sd-u));t[0].timeWeight=ui(new Date(1e3*t[0].time.Sd),l)}}}(t,e)}}],[{key:"Cd",value:function(t){return K({localization:{dateFormat:"dd MMM 'yy"}},null!=t?t:{})}}]),t}(),di="undefined"!=typeof window;function pi(){return!!di&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function yi(){return!!di&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function mi(t){return t+t%2}function gi(t,e){return t.Td-e.Td}function ki(t,e,n){var i=(t.Td-e.Td)/(t.ut-e.ut);return Math.sign(i)*Math.min(Math.abs(i),n)}var bi=function(){function t(e,n,i,r){(0,h.Z)(this,t),this.Pd=null,this.Rd=null,this.Dd=null,this.Od=null,this.Ad=null,this.Vd=0,this.Bd=0,this.Id=e,this.zd=n,this.Ed=i,this.rs=r}return(0,f.Z)(t,[{key:"Ld",value:function(t,e){if(null!==this.Pd){if(this.Pd.ut===e)return void(this.Pd.Td=t);if(Math.abs(this.Pd.Td-t)<this.rs)return}this.Od=this.Dd,this.Dd=this.Rd,this.Rd=this.Pd,this.Pd={ut:e,Td:t}}},{key:"Dr",value:function(t,e){if(null!==this.Pd&&null!==this.Rd&&!(e-this.Pd.ut>50)){var n=0,i=ki(this.Pd,this.Rd,this.zd),r=gi(this.Pd,this.Rd),a=[i],o=[r];if(n+=r,null!==this.Dd){var s=ki(this.Rd,this.Dd,this.zd);if(Math.sign(s)===Math.sign(i)){var u=gi(this.Rd,this.Dd);if(a.push(s),o.push(u),n+=u,null!==this.Od){var l=ki(this.Dd,this.Od,this.zd);if(Math.sign(l)===Math.sign(i)){var c=gi(this.Dd,this.Od);a.push(l),o.push(c),n+=c}}}}for(var h=0,f=0;f<a.length;++f)h+=o[f]/n*a[f];Math.abs(h)<this.Id||(this.Ad={Td:t,ut:e},this.Bd=h,this.Vd=function(t,e){var n=Math.log(e);return Math.log(1*n/-t)/n}(Math.abs(h),this.Ed))}}},{key:"Yu",value:function(t){var e=D(this.Ad),n=t-e.ut;return e.Td+this.Bd*(Math.pow(this.Ed,n)-1)/Math.log(this.Ed)}},{key:"qu",value:function(t){return null===this.Ad||this.Nd(t)===this.Vd}},{key:"Nd",value:function(t){var e=t-D(this.Ad).ut;return Math.min(e,this.Vd)}}]),t}();function wi(t,e){var n=D(t.ownerDocument).createElement("canvas");t.appendChild(n);var i=function(t,e){if("device-pixel-content-box"===e.type)return new y(t,e.transform,e.options);throw new Error("Unsupported binding target")}(n,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:function(t,e){return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)}}});return i.resizeCanvasElement(e),i}function _i(t,e,n,i){t.G&&t.G(e,n,i)}function Ei(t,e,n,i){t.K(e,n,i)}function Si(t,e,n,i){var r,a=t(n,i),s=(0,o.Z)(a);try{for(s.s();!(r=s.n()).done;){var u=r.value.xt();null!==u&&e(u)}}catch(l){s.e(l)}finally{s.f()}}var Ci=function(){function t(e,n,i){var r=this;(0,h.Z)(this,t),this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.qd=null,this.Yd=!1,this.Xd=null,this.Kd=null,this.Zd=!1,this.Gd=!1,this.Jd=!1,this.Qd=null,this.tf=null,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=0,this.lf=!1,this.af=!1,this._f=!1,this.uf=0,this.cf=null,this.df=!yi(),this.ff=function(t){r.vf(t)},this.pf=function(t){if(r.mf(t)){var e=r.bf(t);if(++r.Hd,r.$d&&r.Hd>1)r.gf(Zi(t),r.Ud).wf<30&&!r.Jd&&r.Mf(e,r.Sf.xf),r.kf()}else{var n=r.bf(t);if(++r.Fd,r.Wd&&r.Fd>1)r.gf(Zi(t),r.jd).wf<5&&!r.Gd&&r.yf(n,r.Sf.Cf),r.Tf()}},this.Pf=e,this.Sf=n,this.cn=i,this.Rf()}return(0,f.Z)(t,[{key:"S",value:function(){null!==this.Qd&&(this.Qd(),this.Qd=null),null!==this.tf&&(this.tf(),this.tf=null),null!==this.nf&&(this.nf(),this.nf=null),null!==this.sf&&(this.sf(),this.sf=null),null!==this.ef&&(this.ef(),this.ef=null),null!==this.if&&(this.if(),this.if=null),this.Df(),this.Tf()}},{key:"Of",value:function(t){var e=this;this.nf&&this.nf();var n=this.Af.bind(this);if(this.nf=function(){e.Pf.removeEventListener("mousemove",n)},this.Pf.addEventListener("mousemove",n),!this.mf(t)){var i=this.bf(t);this.yf(i,this.Sf.Vf),this.df=!0}}},{key:"Tf",value:function(){null!==this.Wd&&clearTimeout(this.Wd),this.Fd=0,this.Wd=null,this.jd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}},{key:"kf",value:function(){null!==this.$d&&clearTimeout(this.$d),this.Hd=0,this.$d=null,this.Ud={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}},{key:"Af",value:function(t){if(!this._f&&null===this.Kd&&!this.mf(t)){var e=this.bf(t);this.yf(e,this.Sf.Bf),this.df=!0}}},{key:"If",value:function(t){var e=Oi(t.changedTouches,D(this.cf));if(null!==e&&(this.uf=Ai(t),null===this.rf&&!this.af)){this.lf=!0;var n=this.gf(Zi(e),D(this.Kd)),i=n.zf,r=n.Ef,a=n.wf;if(this.Zd||!(a<5)){if(!this.Zd){var o=.5*i,s=r>=o&&!this.cn.Lf(),u=o>r&&!this.cn.Nf();s||u||(this.af=!0),this.Zd=!0,this.Jd=!0,this.Df(),this.kf()}if(!this.af){var l=this.bf(t,e);this.Mf(l,this.Sf.Ff),xi(t)}}}}},{key:"Wf",value:function(t){if(0===t.button&&(this.gf(Zi(t),D(this.Xd)).wf>=5&&(this.Gd=!0,this.Tf()),this.Gd)){var e=this.bf(t);this.yf(e,this.Sf.jf)}}},{key:"gf",value:function(t,e){var n=Math.abs(e.et-t.et),i=Math.abs(e.rt-t.rt);return{zf:n,Ef:i,wf:n+i}}},{key:"Hf",value:function(t){var e=Oi(t.changedTouches,D(this.cf));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null!==e){this.cf=null,this.uf=Ai(t),this.Df(),this.Kd=null,this.ef&&(this.ef(),this.ef=null);var n=this.bf(t,e);if(this.Mf(n,this.Sf.$f),++this.Hd,this.$d&&this.Hd>1)this.gf(Zi(e),this.Ud).wf<30&&!this.Jd&&this.Mf(n,this.Sf.xf),this.kf();else this.Jd||(this.Mf(n,this.Sf.Uf),this.Sf.Uf&&xi(t));0===this.Hd&&xi(t),0===t.touches.length&&this.Yd&&(this.Yd=!1,xi(t))}}},{key:"vf",value:function(t){if(0===t.button){var e=this.bf(t);if(this.Xd=null,this._f=!1,this.sf&&(this.sf(),this.sf=null),pi()&&this.Pf.ownerDocument.documentElement.removeEventListener("mouseleave",this.ff),!this.mf(t))if(this.yf(e,this.Sf.qf),++this.Fd,this.Wd&&this.Fd>1){this.gf(Zi(t),this.jd).wf<5&&!this.Gd&&this.yf(e,this.Sf.Cf),this.Tf()}else this.Gd||this.yf(e,this.Sf.Yf)}}},{key:"Df",value:function(){null!==this.qd&&(clearTimeout(this.qd),this.qd=null)}},{key:"Xf",value:function(t){if(null===this.cf){var e=t.changedTouches[0];this.cf=e.identifier,this.uf=Ai(t);var n=this.Pf.ownerDocument.documentElement;this.Jd=!1,this.Zd=!1,this.af=!1,this.Kd=Zi(e),this.ef&&(this.ef(),this.ef=null);var i=this.If.bind(this),r=this.Hf.bind(this);this.ef=function(){n.removeEventListener("touchmove",i),n.removeEventListener("touchend",r)},n.addEventListener("touchmove",i,{passive:!1}),n.addEventListener("touchend",r,{passive:!1}),this.Df(),this.qd=setTimeout(this.Kf.bind(this,t),240);var a=this.bf(t,e);this.Mf(a,this.Sf.Zf),this.$d||(this.Hd=0,this.$d=setTimeout(this.kf.bind(this),500),this.Ud=Zi(e))}}},{key:"Gf",value:function(t){if(0===t.button){var e=this.Pf.ownerDocument.documentElement;pi()&&e.addEventListener("mouseleave",this.ff),this.Gd=!1,this.Xd=Zi(t),this.sf&&(this.sf(),this.sf=null);var n=this.Wf.bind(this),i=this.vf.bind(this);if(this.sf=function(){e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",i),this._f=!0,!this.mf(t)){var r=this.bf(t);this.yf(r,this.Sf.Jf),this.Wd||(this.Fd=0,this.Wd=setTimeout(this.Tf.bind(this),500),this.jd=Zi(t))}}}},{key:"Rf",value:function(){var t=this;this.Pf.addEventListener("mouseenter",this.Of.bind(this)),this.Pf.addEventListener("touchcancel",this.Df.bind(this));var e=this.Pf.ownerDocument,n=function(e){t.Sf.Qf&&(e.composed&&t.Pf.contains(e.composedPath()[0])||e.target&&t.Pf.contains(e.target)||t.Sf.Qf())};this.tf=function(){e.removeEventListener("touchstart",n)},this.Qd=function(){e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0}),yi()&&(this.if=function(){t.Pf.removeEventListener("dblclick",t.pf)},this.Pf.addEventListener("dblclick",this.pf)),this.Pf.addEventListener("mouseleave",this.tv.bind(this)),this.Pf.addEventListener("touchstart",this.Xf.bind(this),{passive:!0}),function(t){di&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}(this.Pf),this.Pf.addEventListener("mousedown",this.Gf.bind(this)),this.iv(),this.Pf.addEventListener("touchmove",(function(){}),{passive:!1})}},{key:"iv",value:function(){var t=this;void 0===this.Sf.nv&&void 0===this.Sf.sv&&void 0===this.Sf.ev||(this.Pf.addEventListener("touchstart",(function(e){return t.rv(e.touches)}),{passive:!0}),this.Pf.addEventListener("touchmove",(function(e){if(2===e.touches.length&&null!==t.rf&&void 0!==t.Sf.sv){var n=Ti(e.touches[0],e.touches[1])/t.hf;t.Sf.sv(t.rf,n),xi(e)}}),{passive:!1}),this.Pf.addEventListener("touchend",(function(e){t.rv(e.touches)})))}},{key:"rv",value:function(t){1===t.length&&(this.lf=!1),2!==t.length||this.lf||this.Yd?this.hv():this.lv(t)}},{key:"lv",value:function(t){var e=this.Pf.getBoundingClientRect()||{left:0,top:0};this.rf={et:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,rt:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.hf=Ti(t[0],t[1]),void 0!==this.Sf.nv&&this.Sf.nv(),this.Df()}},{key:"hv",value:function(){null!==this.rf&&(this.rf=null,void 0!==this.Sf.ev&&this.Sf.ev())}},{key:"tv",value:function(t){if(this.nf&&this.nf(),!this.mf(t)&&this.df){var e=this.bf(t);this.yf(e,this.Sf.av),this.df=!yi()}}},{key:"Kf",value:function(t){var e=Oi(t.touches,D(this.cf));if(null!==e){var n=this.bf(t,e);this.Mf(n,this.Sf.ov),this.Jd=!0,this.Yd=!0}}},{key:"mf",value:function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Ai(t)<this.uf+500}},{key:"Mf",value:function(t,e){e&&e.call(this.Sf,t)}},{key:"yf",value:function(t,e){e&&e.call(this.Sf,t)}},{key:"bf",value:function(t,e){var n=e||t,i=this.Pf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,_v:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,uv:t.type,cv:n.target,dv:t.view,fv:function(){"touchstart"!==t.type&&xi(t)}}}}]),t}();function Ti(t,e){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function xi(t){t.cancelable&&t.preventDefault()}function Zi(t){return{et:t.pageX,rt:t.pageY}}function Ai(t){return t.timeStamp||performance.now()}function Oi(t,e){for(var n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}function Mi(t){return{Bc:t.Bc,vv:{wr:t.pv.externalId},mv:t.pv.cursorStyle}}function Li(t,e,n){var i,r=(0,o.Z)(t);try{for(r.s();!(i=r.n()).done;){var a=i.value,s=a.xt();if(null!==s&&s.br){var u=s.br(e,n);if(null!==u)return{dv:a,vv:u}}}}catch(l){r.e(l)}finally{r.f()}return null}function Ii(t,e){return function(n){var i,r,a,o;return(null!==(r=null===(i=n.At())||void 0===i?void 0:i.xa())&&void 0!==r?r:"")!==e?[]:null!==(o=null===(a=n.la)||void 0===a?void 0:a.call(n,t))&&void 0!==o?o:[]}}var Ni=function(){function t(e,n,i,r){var a=this;(0,h.Z)(this,t),this.Li=null,this.bv=null,this.wv=!1,this.gv=new ke(200),this.Gr=null,this.Mv=0,this.xv=!1,this.Sv=function(){a.xv||a.nn.kv().qt().Fh()},this.yv=function(){a.xv||a.nn.kv().qt().Fh()},this.nn=e,this.cn=n,this.mo=n.layout,this.Sc=i,this.Cv="left"===r,this.Tv=Ii("normal",r),this.Pv=Ii("top",r),this.Rv=Ii("bottom",r),this.Dv=document.createElement("div"),this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Dv.style.width="25px",this.Dv.style.left="0",this.Dv.style.position="relative",this.Ov=wi(this.Dv,v({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);var o=this.Ov.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Av=wi(this.Dv,v({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);var s=this.Av.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0";var u={Jf:this.Vv.bind(this),Zf:this.Vv.bind(this),jf:this.Bv.bind(this),Ff:this.Bv.bind(this),Qf:this.Iv.bind(this),qf:this.zv.bind(this),$f:this.zv.bind(this),Cf:this.Ev.bind(this),xf:this.Ev.bind(this),Vf:this.Lv.bind(this),av:this.Nv.bind(this)};this.Fv=new Ci(this.Av.canvasElement,u,{Lf:function(){return!1},Nf:function(){return!0}})}return(0,f.Z)(t,[{key:"S",value:function(){this.Fv.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),null!==this.Li&&this.Li.$o().p(this),this.Li=null}},{key:"Wv",value:function(){return this.Dv}},{key:"P",value:function(){return this.mo.fontSize}},{key:"jv",value:function(){var t=this.Sc.W();return this.Gr!==t.R&&(this.gv.ir(),this.Gr=t.R),t}},{key:"Hv",value:function(){if(null===this.Li)return 0;var t=0,e=this.jv(),n=D(this.Ov.canvasElement.getContext("2d"));n.save();var i=this.Li.Ea();n.font=this.$v(),i.length>0&&(t=Math.max(this.gv.Si(n,i[0].Za),this.gv.Si(n,i[i.length-1].Za)));for(var r=this.Uv(),a=r.length;a--;){var o=this.gv.Si(n,r[a].Jt());o>t&&(t=o)}var s=this.Li.Pt();if(null!==s&&null!==this.bv){var u=this.Li.pn(1,s),l=this.Li.pn(this.bv.height-2,s);t=Math.max(t,this.gv.Si(n,this.Li.Wi(Math.floor(Math.min(u,l))+.11111111111111,s)),this.gv.Si(n,this.Li.Wi(Math.ceil(Math.max(u,l))-.11111111111111,s)))}n.restore();var c=t||34;return mi(Math.ceil(e.C+e.T+e.B+e.I+5+c))}},{key:"qv",value:function(t){null!==this.bv&&d(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width="".concat(t.width,"px"),this.Dv.style.height="".concat(t.height,"px"))}},{key:"Yv",value:function(){return D(this.bv).width}},{key:"Ji",value:function(t){this.Li!==t&&(null!==this.Li&&this.Li.$o().p(this),this.Li=t,t.$o().l(this.ao.bind(this),this))}},{key:"At",value:function(){return this.Li}},{key:"ir",value:function(){var t=this.nn.Xv();this.nn.kv().qt().A_(t,D(this.At()))}},{key:"Kv",value:function(t){var e=this;if(null!==this.bv){if(1!==t){this.Zv(),this.Ov.applySuggestedBitmapSize();var n=k(this.Ov);null!==n&&(n.useBitmapCoordinateSpace((function(t){e.Gv(t),e.Be(t)})),this.nn.Jv(n,this.Rv),this.Qv(n),this.nn.Jv(n,this.Tv),this.tp(n))}this.Av.applySuggestedBitmapSize();var i=k(this.Av);null!==i&&(i.useBitmapCoordinateSpace((function(t){var e=t.context,n=t.bitmapSize;e.clearRect(0,0,n.width,n.height)})),this.ip(i),this.nn.Jv(i,this.Pv))}}},{key:"np",value:function(){return this.Ov.bitmapSize}},{key:"sp",value:function(t,e,n){var i=this.np();i.width>0&&i.height>0&&t.drawImage(this.Ov.canvasElement,e,n)}},{key:"gt",value:function(){var t;null===(t=this.Li)||void 0===t||t.Ea()}},{key:"Vv",value:function(t){if(null!==this.Li&&!this.Li.Fi()&&this.cn.handleScale.axisPressedMouseMove.price){var e=this.nn.kv().qt(),n=this.nn.Xv();this.wv=!0,e.y_(n,this.Li,t.localY)}}},{key:"Bv",value:function(t){if(null!==this.Li&&this.cn.handleScale.axisPressedMouseMove.price){var e=this.nn.kv().qt(),n=this.nn.Xv(),i=this.Li;e.C_(n,i,t.localY)}}},{key:"Iv",value:function(){if(null!==this.Li&&this.cn.handleScale.axisPressedMouseMove.price){var t=this.nn.kv().qt(),e=this.nn.Xv(),n=this.Li;this.wv&&(this.wv=!1,t.T_(e,n))}}},{key:"zv",value:function(t){if(null!==this.Li&&this.cn.handleScale.axisPressedMouseMove.price){var e=this.nn.kv().qt(),n=this.nn.Xv();this.wv=!1,e.T_(n,this.Li)}}},{key:"Ev",value:function(t){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}},{key:"Lv",value:function(t){null!==this.Li&&(!this.nn.kv().qt().W().handleScale.axisPressedMouseMove.price||this.Li.ph()||this.Li.Co()||this.ep(1))}},{key:"Nv",value:function(t){this.ep(0)}},{key:"Uv",value:function(){var t=this,e=[],n=null===this.Li?void 0:this.Li;return function(i){for(var r=0;r<i.length;++r)for(var a=i[r].Rn(t.nn.Xv(),n),o=0;o<a.length;o++)e.push(a[o])}(this.nn.Xv().No()),e}},{key:"Gv",value:function(t){var e=t.context,n=t.bitmapSize,i=n.width,r=n.height,a=this.nn.Xv().qt(),o=a.q(),s=a.ad();o===s?dt(e,0,0,i,r,o):gt(e,0,0,i,r,o,s)}},{key:"Be",value:function(t){var e=t.context,n=t.bitmapSize,i=t.horizontalPixelRatio;if(null!==this.bv&&null!==this.Li&&this.Li.W().borderVisible){e.fillStyle=this.Li.W().borderColor;var r,a=Math.max(1,Math.floor(this.jv().C*i));r=this.Cv?n.width-a:0,e.fillRect(r,0,a,n.height)}}},{key:"Qv",value:function(t){var e=this;if(null!==this.bv&&null!==this.Li){var n=this.Li.Ea(),i=this.Li.W(),r=this.jv(),a=this.Cv?this.bv.width-r.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((function(t){var e=t.context,s=t.horizontalPixelRatio,u=t.verticalPixelRatio;e.fillStyle=i.borderColor;var l=Math.max(1,Math.floor(u)),c=Math.floor(.5*u),h=Math.round(r.T*s);e.beginPath();var f,v=(0,o.Z)(n);try{for(v.s();!(f=v.n()).done;){var d=f.value;e.rect(Math.floor(a*s),Math.round(d.Aa*u)-c,h,l)}}catch(p){v.e(p)}finally{v.f()}e.fill()})),t.useMediaCoordinateSpace((function(t){var o,s=t.context;s.font=e.$v(),s.fillStyle=null!==(o=i.textColor)&&void 0!==o?o:e.mo.textColor,s.textAlign=e.Cv?"right":"left",s.textBaseline="middle";for(var u=e.Cv?Math.round(a-r.B):Math.round(a+r.T+r.B),l=n.map((function(t){return e.gv.xi(s,t.Za)})),c=n.length;c--;){var h=n[c];s.fillText(h.Za,u,h.Aa+l[c])}}))}}},{key:"Zv",value:function(){if(null!==this.bv&&null!==this.Li){var t=this.bv.height/2,e=[],n=this.Li.No().slice(),i=this.nn.Xv(),r=this.jv();this.Li===i.vr()&&this.nn.Xv().No().forEach((function(t){i.dr(t)&&n.push(t)}));var a=this.Li.Ta()[0],o=this.Li;n.forEach((function(n){var r=n.Rn(i,o);r.forEach((function(t){t.Vi(null),t.Bi()&&e.push(t)})),a===n&&r.length>0&&(t=r[0].yi())})),e.forEach((function(t){return t.Vi(t.yi())})),this.Li.W().alignLabels&&this.rp(e,r,t)}}},{key:"rp",value:function(t,e,n){if(null!==this.bv){var i=t.filter((function(t){return t.yi()<=n})),r=t.filter((function(t){return t.yi()>n}));i.sort((function(t,e){return e.yi()-t.yi()})),i.length&&r.length&&r.push(i[0]),r.sort((function(t,e){return t.yi()-e.yi()}));var a,s=(0,o.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=Math.floor(u.zt(e)/2),c=u.yi();c>-l&&c<l&&u.Vi(l),c>this.bv.height-l&&c<this.bv.height+l&&u.Vi(this.bv.height-l)}}catch(E){s.e(E)}finally{s.f()}for(var h=1;h<i.length;h++){var f=i[h],v=i[h-1],d=v.zt(e,!1),p=f.yi(),y=v.Ai();p>y-d&&f.Vi(y-d)}for(var m=1;m<r.length;m++){var g=r[m],k=r[m-1],b=k.zt(e,!0),w=g.yi(),_=k.Ai();w<_+b&&g.Vi(_+b)}}}},{key:"tp",value:function(t){var e=this;if(null!==this.bv){var n=this.Uv(),i=this.jv(),r=this.Cv?"right":"left";n.forEach((function(n){n.Ii()&&n.xt(D(e.Li)).K(t,i,e.gv,r)}))}}},{key:"ip",value:function(t){var e=this;if(null!==this.bv&&null!==this.Li){var n=this.nn.kv().qt(),i=[],r=this.nn.Xv(),a=n.Nc().Rn(r,this.Li);a.length&&i.push(a);var o=this.jv(),s=this.Cv?"right":"left";i.forEach((function(n){n.forEach((function(n){n.xt(D(e.Li)).K(t,o,e.gv,s)}))}))}}},{key:"ep",value:function(t){this.Dv.style.cursor=1===t?"ns-resize":"default"}},{key:"ao",value:function(){var t=this.Hv();this.Mv<t&&this.nn.kv().qt().$l(),this.Mv=t}},{key:"$v",value:function(){return nt(this.mo.fontSize,this.mo.fontFamily)}}]),t}();function Di(t,e){var n,i;return null!==(i=null===(n=t.ra)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:[]}function Ri(t,e){var n,i;return null!==(i=null===(n=t.Pn)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:[]}function Pi(t,e){var n,i;return null!==(i=null===(n=t.Qi)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:[]}function Fi(t,e){var n,i;return null!==(i=null===(n=t.na)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:[]}var Ui=function(){function t(e,n){var i=this;(0,h.Z)(this,t),this.bv=v({width:0,height:0}),this.hp=null,this.lp=null,this.ap=null,this.op=!1,this._p=new H,this.up=new H,this.cp=0,this.dp=!1,this.fp=null,this.vp=!1,this.pp=null,this.mp=null,this.xv=!1,this.Sv=function(){i.xv||null===i.bp||i.Ui().Fh()},this.yv=function(){i.xv||null===i.bp||i.Ui().Fh()},this.wp=e,this.bp=n,this.bp.I_().l(this.gp.bind(this),this,!0),this.Mp=document.createElement("td"),this.Mp.style.padding="0",this.Mp.style.position="relative";var r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.xp=document.createElement("td"),this.xp.style.padding="0",this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Mp.appendChild(r),this.Ov=wi(r,v({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);var a=this.Ov.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Av=wi(r,v({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);var o=this.Av.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.kp=document.createElement("tr"),this.kp.appendChild(this.xp),this.kp.appendChild(this.Mp),this.kp.appendChild(this.Sp),this.yp(),this.Fv=new Ci(this.Av.canvasElement,this,{Lf:function(){return null===i.fp&&!i.wp.W().handleScroll.vertTouchDrag},Nf:function(){return null===i.fp&&!i.wp.W().handleScroll.horzTouchDrag}})}return(0,f.Z)(t,[{key:"S",value:function(){null!==this.hp&&this.hp.S(),null!==this.lp&&this.lp.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose(),null!==this.bp&&this.bp.I_().p(this),this.Fv.S()}},{key:"Xv",value:function(){return D(this.bp)}},{key:"Cp",value:function(e){null!==this.bp&&this.bp.I_().p(this),this.bp=e,null!==this.bp&&this.bp.I_().l(t.prototype.gp.bind(this),this,!0),this.yp()}},{key:"kv",value:function(){return this.wp}},{key:"Wv",value:function(){return this.kp}},{key:"yp",value:function(){if(null!==this.bp&&(this.Tp(),0!==this.Ui().Mt().length)){if(null!==this.hp){var t=this.bp.S_();this.hp.Ji(D(t))}if(null!==this.lp){var e=this.bp.k_();this.lp.Ji(D(e))}}}},{key:"Pp",value:function(){null!==this.hp&&this.hp.gt(),null!==this.lp&&this.lp.gt()}},{key:"v_",value:function(){return null!==this.bp?this.bp.v_():0}},{key:"p_",value:function(t){this.bp&&this.bp.p_(t)}},{key:"Vf",value:function(t){if(this.bp){this.Rp();var e=t.localX,n=t.localY;this.Dp(e,n,t)}}},{key:"Jf",value:function(t){this.Rp(),this.Op(),this.Dp(t.localX,t.localY,t)}},{key:"Bf",value:function(t){var e;if(this.bp){this.Rp();var n=t.localX,i=t.localY;this.Dp(n,i,t);var r=this.br(n,i);this.wp.Ap(null!==(e=null==r?void 0:r.mv)&&void 0!==e?e:null),this.Ui().Vc(r&&{Bc:r.Bc,vv:r.vv})}}},{key:"Yf",value:function(t){null!==this.bp&&(this.Rp(),this.Vp(t))}},{key:"Cf",value:function(t){null!==this.bp&&this.Bp(this.up,t)}},{key:"xf",value:function(t){this.Cf(t)}},{key:"jf",value:function(t){this.Rp(),this.Ip(t),this.Dp(t.localX,t.localY,t)}},{key:"qf",value:function(t){null!==this.bp&&(this.Rp(),this.dp=!1,this.zp(t))}},{key:"Uf",value:function(t){null!==this.bp&&this.Vp(t)}},{key:"ov",value:function(t){if(this.dp=!0,null===this.fp){var e={x:t.localX,y:t.localY};this.Ep(e,e,t)}}},{key:"av",value:function(t){null!==this.bp&&(this.Rp(),this.bp.qt().Vc(null),this.Lp())}},{key:"Np",value:function(){return this._p}},{key:"Fp",value:function(){return this.up}},{key:"nv",value:function(){this.cp=1,this.Ui().Un()}},{key:"sv",value:function(t,e){if(this.wp.W().handleScale.pinch){var n=5*(e-this.cp);this.cp=e,this.Ui().$c(t.et,n)}}},{key:"Zf",value:function(t){this.dp=!1,this.vp=null!==this.fp,this.Op();var e=this.Ui().Nc();null!==this.fp&&e.Tt()&&(this.pp={x:e.Kt(),y:e.Zt()},this.fp={x:t.localX,y:t.localY})}},{key:"Ff",value:function(t){if(null!==this.bp){var e=t.localX,n=t.localY;if(null===this.fp)this.Ip(t);else{this.vp=!1;var i=D(this.pp),r=i.x+(e-this.fp.x),a=i.y+(n-this.fp.y);this.Dp(r,a,t)}}}},{key:"$f",value:function(t){0===this.kv().W().trackingMode.exitMode&&(this.vp=!0),this.Wp(),this.zp(t)}},{key:"br",value:function(t,e){var n=this.bp;return null===n?null:function(t,e,n){var i=t.No(),r=function(t,e,n){var i,r,a,s,u,l,c,h=(0,o.Z)(t);try{for(h.s();!(u=h.n()).done;){var f,v=u.value,d=null!==(r=null===(i=v.oa)||void 0===i?void 0:i.call(v,e,n))&&void 0!==r?r:[],p=(0,o.Z)(d);try{for(p.s();!(f=p.n()).done;){var y=f.value;l=y.zOrder,(!(c=null==a?void 0:a.zOrder)||"top"===l&&"top"!==c||"normal"===l&&"bottom"===c)&&(a=y,s=v)}}catch(m){p.e(m)}finally{p.f()}}}catch(m){h.e(m)}finally{h.f()}return a&&s?{pv:a,Bc:s}:null}(i,e,n);if("top"===(null==r?void 0:r.pv.zOrder))return Mi(r);var a,s=(0,o.Z)(i);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(r&&r.Bc===u&&"bottom"!==r.pv.zOrder&&!r.pv.isBackground)return Mi(r);var l=Li(u.Pn(t),e,n);if(null!==l)return{Bc:u,dv:l.dv,vv:l.vv};if(r&&r.Bc===u&&"bottom"!==r.pv.zOrder&&r.pv.isBackground)return Mi(r)}}catch(c){s.e(c)}finally{s.f()}return(null==r?void 0:r.pv)?Mi(r):null}(n,t,e)}},{key:"jp",value:function(t,e){D("left"===e?this.hp:this.lp).qv(v({width:t,height:this.bv.height}))}},{key:"Hp",value:function(){return this.bv}},{key:"qv",value:function(t){d(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Mp.style.width=t.width+"px",this.Mp.style.height=t.height+"px")}},{key:"$p",value:function(){var t=D(this.bp);t.x_(t.S_()),t.x_(t.k_());var e,n=(0,o.Z)(t.Ta());try{for(n.s();!(e=n.n()).done;){var i=e.value;if(t.dr(i)){var r=i.At();null!==r&&t.x_(r),i.On()}}}catch(a){n.e(a)}finally{n.f()}}},{key:"np",value:function(){return this.Ov.bitmapSize}},{key:"sp",value:function(t,e,n){var i=this.np();i.width>0&&i.height>0&&t.drawImage(this.Ov.canvasElement,e,n)}},{key:"Kv",value:function(t){var e=this;if(0!==t&&null!==this.bp){if(t>1&&this.$p(),null!==this.hp&&this.hp.Kv(t),null!==this.lp&&this.lp.Kv(t),1!==t){this.Ov.applySuggestedBitmapSize();var n=k(this.Ov);null!==n&&(n.useBitmapCoordinateSpace((function(t){e.Gv(t)})),this.bp&&(this.Up(n,Di),this.qp(n),this.Yp(n),this.Up(n,Ri),this.Up(n,Pi)))}this.Av.applySuggestedBitmapSize();var i=k(this.Av);null!==i&&(i.useBitmapCoordinateSpace((function(t){var e=t.context,n=t.bitmapSize;e.clearRect(0,0,n.width,n.height)})),this.Xp(i),this.Up(i,Fi))}}},{key:"Kp",value:function(){return this.hp}},{key:"Zp",value:function(){return this.lp}},{key:"Jv",value:function(t,e){this.Up(t,e)}},{key:"gp",value:function(){null!==this.bp&&this.bp.I_().p(this),this.bp=null}},{key:"Vp",value:function(t){this.Bp(this._p,t)}},{key:"Bp",value:function(t,e){var n=e.localX,i=e.localY;t.M()&&t.m(this.Ui().yt().Au(n),{x:n,y:i},e)}},{key:"Gv",value:function(t){var e=t.context,n=t.bitmapSize,i=n.width,r=n.height,a=this.Ui(),o=a.q(),s=a.ad();o===s?dt(e,0,0,i,r,s):gt(e,0,0,i,r,o,s)}},{key:"qp",value:function(t){var e=D(this.bp).z_().Wh().xt();null!==e&&e.K(t,!1)}},{key:"Yp",value:function(t){var e=this.Ui().Lc();this.Gp(t,Ri,_i,e),this.Gp(t,Ri,Ei,e)}},{key:"Xp",value:function(t){this.Gp(t,Ri,Ei,this.Ui().Nc())}},{key:"Up",value:function(t,e){var n,i=D(this.bp).No(),r=(0,o.Z)(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.Gp(t,e,_i,a)}}catch(c){r.e(c)}finally{r.f()}var s,u=(0,o.Z)(i);try{for(u.s();!(s=u.n()).done;){var l=s.value;this.Gp(t,e,Ei,l)}}catch(c){u.e(c)}finally{u.f()}}},{key:"Gp",value:function(t,e,n,i){var r=D(this.bp),a=r.qt().Ac(),o=null!==a&&a.Bc===i,s=null!==a&&o&&void 0!==a.vv?a.vv.gr:void 0;Si(e,(function(e){return n(e,t,o,s)}),i,r)}},{key:"Tp",value:function(){if(null!==this.bp){var t=this.wp,e=this.bp.S_().W().visible,n=this.bp.k_().W().visible;e||null===this.hp||(this.xp.removeChild(this.hp.Wv()),this.hp.S(),this.hp=null),n||null===this.lp||(this.Sp.removeChild(this.lp.Wv()),this.lp.S(),this.lp=null);var i=t.qt().nd();e&&null===this.hp&&(this.hp=new Ni(this,t.W(),i,"left"),this.xp.appendChild(this.hp.Wv())),n&&null===this.lp&&(this.lp=new Ni(this,t.W(),i,"right"),this.Sp.appendChild(this.lp.Wv()))}}},{key:"Jp",value:function(t){return t._v&&this.dp||null!==this.fp}},{key:"Qp",value:function(t){return Math.max(0,Math.min(t,this.bv.width-1))}},{key:"tm",value:function(t){return Math.max(0,Math.min(t,this.bv.height-1))}},{key:"Dp",value:function(t,e,n){this.Ui().Gc(this.Qp(t),this.tm(e),n,D(this.bp))}},{key:"Lp",value:function(){this.Ui().Qc()}},{key:"Wp",value:function(){this.vp&&(this.fp=null,this.Lp())}},{key:"Ep",value:function(t,e,n){this.fp=t,this.vp=!1,this.Dp(e.x,e.y,n);var i=this.Ui().Nc();this.pp={x:i.Kt(),y:i.Zt()}}},{key:"Ui",value:function(){return this.wp.qt()}},{key:"zp",value:function(t){if(this.op){var e=this.Ui(),n=this.Xv();if(e.D_(n,n.vn()),this.ap=null,this.op=!1,e.Xc(),null!==this.mp){var i=performance.now(),r=e.yt();this.mp.Dr(r.zu(),i),this.mp.qu(i)||e.Xn(this.mp)}}}},{key:"Rp",value:function(){this.fp=null}},{key:"Op",value:function(){if(this.bp){if(this.Ui().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)D(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.bp.vn().Fi()&&this.Ui().yt().Fi()}}},{key:"Ip",value:function(t){if(null!==this.bp){var e=this.Ui(),n=e.yt();if(!n.Fi()){var i=this.wp.W(),r=i.handleScroll,a=i.kineticScroll;if(r.pressedMouseMove&&!t._v||(r.horzTouchDrag||r.vertTouchDrag)&&t._v){var o=this.bp.vn(),s=performance.now();if(null!==this.ap||this.Jp(t)||(this.ap={x:t.clientX,y:t.clientY,Sd:s,im:t.localX,nm:t.localY}),null!==this.ap&&!this.op&&(this.ap.x!==t.clientX||this.ap.y!==t.clientY)){if(t._v&&a.touch||!t._v&&a.mouse){var u=n.he();this.mp=new bi(.2/u,7/u,.997,15/u),this.mp.Ld(n.zu(),this.ap.Sd)}else this.mp=null;o.Fi()||e.P_(this.bp,o,t.localY),e.qc(t.localX),this.op=!0}this.op&&(o.Fi()||e.R_(this.bp,o,t.localY),e.Yc(t.localX),null!==this.mp&&this.mp.Ld(n.zu(),s))}}}}}]),t}(),Vi=function(){function t(e,n,i,r,a){var o=this;(0,h.Z)(this,t),this.bt=!0,this.bv=v({width:0,height:0}),this.Sv=function(){return o.Kv(3)},this.Cv="left"===e,this.Sc=i.nd,this.cn=n,this.sm=r,this.rm=a,this.Dv=document.createElement("div"),this.Dv.style.width="25px",this.Dv.style.height="100%",this.Dv.style.overflow="hidden",this.Ov=wi(this.Dv,v({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv)}return(0,f.Z)(t,[{key:"S",value:function(){this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}},{key:"Wv",value:function(){return this.Dv}},{key:"Hp",value:function(){return this.bv}},{key:"qv",value:function(t){d(this.bv,t)||(this.bv=t,this.Ov.resizeCanvasElement(t),this.Dv.style.width="".concat(t.width,"px"),this.Dv.style.height="".concat(t.height,"px"),this.bt=!0)}},{key:"Kv",value:function(t){var e=this;if((!(t<3)||this.bt)&&0!==this.bv.width&&0!==this.bv.height){this.bt=!1,this.Ov.applySuggestedBitmapSize();var n=k(this.Ov);null!==n&&n.useBitmapCoordinateSpace((function(t){e.Gv(t),e.Be(t)}))}}},{key:"np",value:function(){return this.Ov.bitmapSize}},{key:"sp",value:function(t,e,n){var i=this.np();i.width>0&&i.height>0&&t.drawImage(this.Ov.canvasElement,e,n)}},{key:"Be",value:function(t){var e=t.context,n=t.bitmapSize,i=t.horizontalPixelRatio,r=t.verticalPixelRatio;if(this.sm()){e.fillStyle=this.cn.timeScale.borderColor;var a=Math.floor(this.Sc.W().C*i),o=Math.floor(this.Sc.W().C*r),s=this.Cv?n.width-a:0;e.fillRect(s,0,a,o)}}},{key:"Gv",value:function(t){var e=t.context,n=t.bitmapSize;dt(e,0,0,n.width,n.height,this.rm())}}]),t}();function Bi(t){return function(e){var n,i;return null!==(i=null===(n=e.aa)||void 0===n?void 0:n.call(e,t))&&void 0!==i?i:[]}}var zi,ji=Bi("normal"),qi=Bi("top"),Wi=Bi("bottom"),Hi=function(){function t(e,n){var i=this;(0,h.Z)(this,t),this.hm=null,this.lm=null,this.k=null,this.am=!1,this.bv=v({width:0,height:0}),this.om=new H,this.gv=new ke(5),this.xv=!1,this.Sv=function(){i.xv||i.wp.qt().Fh()},this.yv=function(){i.xv||i.wp.qt().Fh()},this.wp=e,this.N_=n,this.cn=e.W().layout,this._m=document.createElement("tr"),this.um=document.createElement("td"),this.um.style.padding="0",this.dm=document.createElement("td"),this.dm.style.padding="0",this.Dv=document.createElement("td"),this.Dv.style.height="25px",this.Dv.style.padding="0",this.fm=document.createElement("div"),this.fm.style.width="100%",this.fm.style.height="100%",this.fm.style.position="relative",this.fm.style.overflow="hidden",this.Dv.appendChild(this.fm),this.Ov=wi(this.fm,v({width:16,height:16})),this.Ov.subscribeSuggestedBitmapSizeChanged(this.Sv);var r=this.Ov.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Av=wi(this.fm,v({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.yv);var a=this.Av.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this._m.appendChild(this.um),this._m.appendChild(this.Dv),this._m.appendChild(this.dm),this.vm(),this.wp.qt().f_().l(this.vm.bind(this),this),this.Fv=new Ci(this.Av.canvasElement,this,{Lf:function(){return!0},Nf:function(){return!1}})}return(0,f.Z)(t,[{key:"S",value:function(){this.Fv.S(),null!==this.hm&&this.hm.S(),null!==this.lm&&this.lm.S(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.yv),this.Av.dispose(),this.Ov.unsubscribeSuggestedBitmapSizeChanged(this.Sv),this.Ov.dispose()}},{key:"Wv",value:function(){return this._m}},{key:"pm",value:function(){return this.hm}},{key:"bm",value:function(){return this.lm}},{key:"Jf",value:function(t){if(!this.am){this.am=!0;var e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Hc(t.localX)}}},{key:"Zf",value:function(t){this.Jf(t)}},{key:"Qf",value:function(){var t=this.wp.qt();!t.yt().Fi()&&this.am&&(this.am=!1,this.wp.W().handleScale.axisPressedMouseMove.time&&t.Zc())}},{key:"jf",value:function(t){var e=this.wp.qt();!e.yt().Fi()&&this.wp.W().handleScale.axisPressedMouseMove.time&&e.Kc(t.localX)}},{key:"Ff",value:function(t){this.jf(t)}},{key:"qf",value:function(){this.am=!1;var t=this.wp.qt();t.yt().Fi()&&!this.wp.W().handleScale.axisPressedMouseMove.time||t.Zc()}},{key:"$f",value:function(){this.qf()}},{key:"Cf",value:function(){this.wp.W().handleScale.axisDoubleClickReset.time&&this.wp.qt().Zn()}},{key:"xf",value:function(){this.Cf()}},{key:"Vf",value:function(){this.wp.qt().W().handleScale.axisPressedMouseMove.time&&this.ep(1)}},{key:"av",value:function(){this.ep(0)}},{key:"Hp",value:function(){return this.bv}},{key:"wm",value:function(){return this.om}},{key:"gm",value:function(t,e,n){d(this.bv,t)||(this.bv=t,this.xv=!0,this.Ov.resizeCanvasElement(t),this.Av.resizeCanvasElement(t),this.xv=!1,this.Dv.style.width="".concat(t.width,"px"),this.Dv.style.height="".concat(t.height,"px"),this.om.m(t)),null!==this.hm&&this.hm.qv(v({width:e,height:t.height})),null!==this.lm&&this.lm.qv(v({width:n,height:t.height}))}},{key:"Mm",value:function(){var t=this.xm();return Math.ceil(t.C+t.T+t.P+t.L+t.V+t.Sm)}},{key:"gt",value:function(){this.wp.qt().yt().Ea()}},{key:"np",value:function(){return this.Ov.bitmapSize}},{key:"sp",value:function(t,e,n){var i=this.np();i.width>0&&i.height>0&&t.drawImage(this.Ov.canvasElement,e,n)}},{key:"Kv",value:function(t){var e=this;if(0!==t){if(1!==t){this.Ov.applySuggestedBitmapSize();var n=k(this.Ov);null!==n&&(n.useBitmapCoordinateSpace((function(t){e.Gv(t),e.Be(t),e.km(n,Wi)})),this.Qv(n),this.km(n,ji)),null!==this.hm&&this.hm.Kv(t),null!==this.lm&&this.lm.Kv(t)}this.Av.applySuggestedBitmapSize();var i=k(this.Av);null!==i&&(i.useBitmapCoordinateSpace((function(t){var e=t.context,n=t.bitmapSize;e.clearRect(0,0,n.width,n.height)})),this.ym([].concat((0,c.Z)(this.wp.qt().Mt()),[this.wp.qt().Nc()]),i),this.km(i,qi))}}},{key:"km",value:function(t,e){var n,i=this.wp.qt().Mt(),r=(0,o.Z)(i);try{for(r.s();!(n=r.n()).done;){Si(e,(function(e){return _i(e,t,!1,void 0)}),n.value,void 0)}}catch(u){r.e(u)}finally{r.f()}var a,s=(0,o.Z)(i);try{for(s.s();!(a=s.n()).done;){Si(e,(function(e){return Ei(e,t,!1,void 0)}),a.value,void 0)}}catch(u){s.e(u)}finally{s.f()}}},{key:"Gv",value:function(t){var e=t.context,n=t.bitmapSize;dt(e,0,0,n.width,n.height,this.wp.qt().ad())}},{key:"Be",value:function(t){var e=t.context,n=t.bitmapSize,i=t.verticalPixelRatio;if(this.wp.W().timeScale.borderVisible){e.fillStyle=this.Cm();var r=Math.max(1,Math.floor(this.xm().C*i));e.fillRect(0,0,n.width,r)}}},{key:"Qv",value:function(t){var e=this,n=this.wp.qt().yt(),i=n.Ea();if(i&&0!==i.length){var r=this.N_.maxTickMarkWeight(i),a=this.xm(),s=n.W();s.borderVisible&&s.ticksVisible&&t.useBitmapCoordinateSpace((function(t){var n=t.context,r=t.horizontalPixelRatio,o=t.verticalPixelRatio;n.strokeStyle=e.Cm(),n.fillStyle=e.Cm();var s=Math.max(1,Math.floor(r)),u=Math.floor(.5*r);n.beginPath();for(var l=Math.round(a.T*o),c=i.length;c--;){var h=Math.round(i[c].coord*r);n.rect(h-u,0,s,l)}n.fill()})),t.useMediaCoordinateSpace((function(t){var n=t.context,s=a.C+a.T+a.L+a.P/2;n.textAlign="center",n.textBaseline="middle",n.fillStyle=e.$(),n.font=e.$v();var u,l=(0,o.Z)(i);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.weight<r){var h=c.needAlignCoordinate?e.Tm(n,c.coord,c.label):c.coord;n.fillText(c.label,h,s)}}}catch(y){l.e(y)}finally{l.f()}n.font=e.Pm();var f,v=(0,o.Z)(i);try{for(v.s();!(f=v.n()).done;){var d=f.value;if(d.weight>=r){var p=d.needAlignCoordinate?e.Tm(n,d.coord,d.label):d.coord;n.fillText(d.label,p,s)}}}catch(y){v.e(y)}finally{v.f()}}))}}},{key:"Tm",value:function(t,e,n){var i=this.gv.Si(t,n),r=i/2,a=Math.floor(e-r)+.5;return a<0?e+=Math.abs(0-a):a+i>this.bv.width&&(e-=Math.abs(this.bv.width-(a+i))),e}},{key:"ym",value:function(t,e){var n,i=this.xm(),r=(0,o.Z)(t);try{for(r.s();!(n=r.n()).done;){var a,s=n.value,u=(0,o.Z)(s.tn());try{for(u.s();!(a=u.n()).done;){a.value.xt().K(e,i)}}catch(l){u.e(l)}finally{u.f()}}}catch(l){r.e(l)}finally{r.f()}}},{key:"Cm",value:function(){return this.wp.W().timeScale.borderColor}},{key:"$",value:function(){return this.cn.textColor}},{key:"j",value:function(){return this.cn.fontSize}},{key:"$v",value:function(){return nt(this.j(),this.cn.fontFamily)}},{key:"Pm",value:function(){return nt(this.j(),this.cn.fontFamily,"bold")}},{key:"xm",value:function(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Hi:NaN,T:5,P:NaN,R:"",ji:new ke,Sm:0});var t=this.k,e=this.$v();if(t.R!==e){var n=this.j();t.P=n,t.R=e,t.L=3*n/12,t.V=3*n/12,t.Hi=9*n/12,t.N=0,t.Sm=4*n/12,t.ji.ir()}return this.k}},{key:"ep",value:function(t){this.Dv.style.cursor=1===t?"ew-resize":"default"}},{key:"vm",value:function(){var t=this.wp.qt(),e=t.W();e.leftPriceScale.visible||null===this.hm||(this.um.removeChild(this.hm.Wv()),this.hm.S(),this.hm=null),e.rightPriceScale.visible||null===this.lm||(this.dm.removeChild(this.lm.Wv()),this.lm.S(),this.lm=null);var n={nd:this.wp.qt().nd()},i=function(){return e.leftPriceScale.borderVisible&&t.yt().W().borderVisible},r=function(){return t.ad()};e.leftPriceScale.visible&&null===this.hm&&(this.hm=new Vi("left",e,n,i,r),this.um.appendChild(this.hm.Wv())),e.rightPriceScale.visible&&null===this.lm&&(this.lm=new Vi("right",e,n,i,r),this.dm.appendChild(this.lm.Wv()))}}]),t}(),Ki=!!di&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((function(t){return t.brand.includes("Chromium")}))&&!!di&&((null===(zi=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===zi?void 0:zi.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0),Gi=function(){function t(e,n,i){var r;(0,h.Z)(this,t),this.Rm=[],this.Dm=0,this.Qa=0,this.e_=0,this.Om=0,this.Am=0,this.Vm=null,this.Bm=!1,this._p=new H,this.up=new H,this.gc=new H,this.Im=null,this.zm=null,this.Em=e,this.cn=n,this.N_=i,this._m=document.createElement("div"),this._m.classList.add("tv-lightweight-charts"),this._m.style.overflow="hidden",this._m.style.direction="ltr",this._m.style.width="100%",this._m.style.height="100%",(r=this._m).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.Lm=document.createElement("table"),this.Lm.setAttribute("cellspacing","0"),this._m.appendChild(this.Lm),this.Nm=this.Fm.bind(this),Qi(this.cn)&&this.Wm(!0),this.Ui=new Xn(this.xc.bind(this),this.cn,i),this.qt().Fc().l(this.jm.bind(this),this),this.Hm=new Hi(this,this.N_),this.Lm.appendChild(this.Hm.Wv());var a=n.autoSize&&this.$m(),o=this.cn.width,s=this.cn.height;if(a||0===o||0===s){var u=e.getBoundingClientRect();o=o||u.width,s=s||u.height}this.Um(o,s),this.qm(),e.appendChild(this._m),this.Ym(),this.Ui.yt().Zu().l(this.Ui.$l.bind(this.Ui),this),this.Ui.f_().l(this.Ui.$l.bind(this.Ui),this)}return(0,f.Z)(t,[{key:"qt",value:function(){return this.Ui}},{key:"W",value:function(){return this.cn}},{key:"Xm",value:function(){return this.Rm}},{key:"Km",value:function(){return this.Hm}},{key:"S",value:function(){this.Wm(!1),0!==this.Dm&&window.cancelAnimationFrame(this.Dm),this.Ui.Fc().p(this),this.Ui.yt().Zu().p(this),this.Ui.f_().p(this),this.Ui.S();var t,e=(0,o.Z)(this.Rm);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.Lm.removeChild(n.Wv()),n.Np().p(this),n.Fp().p(this),n.S()}}catch(i){e.e(i)}finally{e.f()}this.Rm=[],D(this.Hm).S(),null!==this._m.parentElement&&this._m.parentElement.removeChild(this._m),this.gc.S(),this._p.S(),this.up.S(),this.Zm()}},{key:"Um",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.Qa!==e||this.e_!==t){var i=function(t){var e=Math.floor(t.width),n=Math.floor(t.height);return v({width:e-e%2,height:n-n%2})}(v({width:t,height:e}));this.Qa=i.height,this.e_=i.width;var r=this.Qa+"px",a=this.e_+"px";D(this._m).style.height=r,D(this._m).style.width=a,this.Lm.style.height=r,this.Lm.style.width=a,n?this.Gm(At.es(),performance.now()):this.Ui.$l()}}},{key:"Kv",value:function(t){void 0===t&&(t=At.es());for(var e=0;e<this.Rm.length;e++)this.Rm[e].Kv(t.Hn(e).Fn);this.cn.timeScale.visible&&this.Hm.Kv(t.jn())}},{key:"Nh",value:function(t){var e=Qi(this.cn);this.Ui.Nh(t);var n=Qi(this.cn);n!==e&&this.Wm(n),this.Ym(),this.Jm(t)}},{key:"Np",value:function(){return this._p}},{key:"Fp",value:function(){return this.up}},{key:"Fc",value:function(){return this.gc}},{key:"Qm",value:function(){null!==this.Vm&&(this.Gm(this.Vm,performance.now()),this.Vm=null);var t=this.tb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=D(e.getContext("2d"));return this.tb(n),e}},{key:"ib",value:function(t){return("left"!==t||this.nb())&&("right"!==t||this.sb())?0===this.Rm.length?0:D("left"===t?this.Rm[0].Kp():this.Rm[0].Zp()).Yv():0}},{key:"eb",value:function(){return this.cn.autoSize&&null!==this.Im}},{key:"rb",value:function(){return this._m}},{key:"Ap",value:function(t){this.zm=t,this.zm?this.rb().style.setProperty("cursor",t):this.rb().style.removeProperty("cursor")}},{key:"hb",value:function(){return this.zm}},{key:"lb",value:function(){return N(this.Rm[0]).Hp()}},{key:"Jm",value:function(t){(void 0!==t.autoSize||!this.Im||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Im&&this.$m(),!1===t.autoSize&&null!==this.Im&&this.Zm(),t.autoSize||void 0===t.width&&void 0===t.height||this.Um(t.width||this.e_,t.height||this.Qa))}},{key:"tb",value:function(t){var e=this,n=0,i=0,r=this.Rm[0],a=function(n,i){for(var r=0,a=0;a<e.Rm.length;a++){var o=e.Rm[a],s=D("left"===n?o.Kp():o.Zp()),u=s.np();null!==t&&s.sp(t,i,r),r+=u.height}};this.nb()&&(a("left",0),n+=D(r.Kp()).np().width);for(var o=0;o<this.Rm.length;o++){var s=this.Rm[o],u=s.np();null!==t&&s.sp(t,n,i),i+=u.height}n+=r.np().width,this.sb()&&(a("right",n),n+=D(r.Zp()).np().width);var l=function(n,i,r){D("left"===n?e.Hm.pm():e.Hm.bm()).sp(D(t),i,r)};if(this.cn.timeScale.visible){var c=this.Hm.np();if(null!==t){var h=0;this.nb()&&(l("left",h,i),h=D(r.Kp()).np().width),this.Hm.sp(t,h,i),h+=c.width,this.sb()&&l("right",h,i)}i+=c.height}return v({width:n,height:i})}},{key:"ab",value:function(){var t,e=0,n=0,i=0,r=(0,o.Z)(this.Rm);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.nb()&&(n=Math.max(n,D(a.Kp()).Hv(),this.cn.leftPriceScale.minimumWidth)),this.sb()&&(i=Math.max(i,D(a.Zp()).Hv(),this.cn.rightPriceScale.minimumWidth)),e+=a.v_()}}catch(_){r.e(_)}finally{r.f()}n=mi(n),i=mi(i);for(var s,u=this.e_,l=this.Qa,c=Math.max(u-n-i,0),h=this.cn.timeScale.visible,f=h?Math.max(this.Hm.Mm(),this.cn.timeScale.minimumHeight):0,d=0+(f=(s=f)+s%2),p=l<d?0:l-d,y=p/e,m=0,g=0;g<this.Rm.length;++g){var k=this.Rm[g];k.Cp(this.Ui.Ec()[g]);var b,w;w=g===this.Rm.length-1?p-m:Math.round(k.v_()*y),m+=b=Math.max(w,2),k.qv(v({width:c,height:b})),this.nb()&&k.jp(n,"left"),this.sb()&&k.jp(i,"right"),k.Xv()&&this.Ui.Wc(k.Xv(),b)}this.Hm.gm(v({width:h?c:0,height:f}),h?n:0,h?i:0),this.Ui.m_(c),this.Om!==n&&(this.Om=n),this.Am!==i&&(this.Am=i)}},{key:"Wm",value:function(t){t?this._m.addEventListener("wheel",this.Nm,{passive:!1}):this._m.removeEventListener("wheel",this.Nm)}},{key:"ob",value:function(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Ki?1/window.devicePixelRatio:1}},{key:"Fm",value:function(t){if(0!==t.deltaX&&this.cn.handleScroll.mouseWheel||0!==t.deltaY&&this.cn.handleScale.mouseWheel){var e=this.ob(t),n=e*t.deltaX/100,i=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==i&&this.cn.handleScale.mouseWheel){var r=Math.sign(i)*Math.min(1,Math.abs(i)),a=t.clientX-this._m.getBoundingClientRect().left;this.qt().$c(a,r)}0!==n&&this.cn.handleScroll.mouseWheel&&this.qt().Uc(-80*n)}}},{key:"Gm",value:function(t,e){var n,i=t.jn();3===i&&this._b(),3!==i&&2!==i||(this.ub(t),this.cb(t,e),this.Hm.gt(),this.Rm.forEach((function(t){t.Pp()})),3===(null===(n=this.Vm)||void 0===n?void 0:n.jn())&&(this.Vm.ts(t),this._b(),this.ub(this.Vm),this.cb(this.Vm,e),t=this.Vm,this.Vm=null)),this.Kv(t)}},{key:"cb",value:function(t,e){var n,i=(0,o.Z)(t.Qn());try{for(i.s();!(n=i.n()).done;){var r=n.value;this.ns(r,e)}}catch(a){i.e(a)}finally{i.f()}}},{key:"ub",value:function(t){for(var e=this.Ui.Ec(),n=0;n<e.length;n++)t.Hn(n).Wn&&e[n].V_()}},{key:"ns",value:function(t,e){var n=this.Ui.yt();switch(t.qn){case 0:n.Ju();break;case 1:n.Qu(t.Vt);break;case 2:n.Gn(t.Vt);break;case 3:n.Jn(t.Vt);break;case 4:n.Nu();break;case 5:t.Vt.qu(e)||n.Jn(t.Vt.Yu(e))}}},{key:"xc",value:function(t){var e=this;null!==this.Vm?this.Vm.ts(t):this.Vm=t,this.Bm||(this.Bm=!0,this.Dm=window.requestAnimationFrame((function(t){if(e.Bm=!1,e.Dm=0,null!==e.Vm){var n=e.Vm;e.Vm=null,e.Gm(n,t);var i,r=(0,o.Z)(n.Qn());try{for(r.s();!(i=r.n()).done;){var a=i.value;if(5===a.qn&&!a.Vt.qu(t)){e.qt().Xn(a.Vt);break}}}catch(s){r.e(s)}finally{r.f()}}})))}},{key:"_b",value:function(){this.qm()}},{key:"qm",value:function(){for(var t=this.Ui.Ec(),e=t.length,n=this.Rm.length,i=e;i<n;i++){var r=N(this.Rm.pop());this.Lm.removeChild(r.Wv()),r.Np().p(this),r.Fp().p(this),r.S()}for(var a=n;a<e;a++){var o=new Ui(this,t[a]);o.Np().l(this.fb.bind(this),this),o.Fp().l(this.vb.bind(this),this),this.Rm.push(o),this.Lm.insertBefore(o.Wv(),this.Hm.Wv())}for(var s=0;s<e;s++){var u=t[s],l=this.Rm[s];l.Xv()!==u?l.Cp(u):l.yp()}this.Ym(),this.ab()}},{key:"pb",value:function(t,e,n){var i,r,a=new Map;if(null!==t&&this.Ui.Mt().forEach((function(e){var n=e.In().nl(t);null!==n&&a.set(e,n)})),null!==t){var o=null===(i=this.Ui.yt().qi(t))||void 0===i?void 0:i.originalTime;void 0!==o&&(r=o)}var s=this.qt().Ac(),u=null!==s&&s.Bc instanceof vn?s.Bc:void 0,l=null!==s&&void 0!==s.vv?s.vv.wr:void 0;return{mb:r,se:null!=t?t:void 0,bb:null!=e?e:void 0,wb:u,gb:a,Mb:l,xb:null!=n?n:void 0}}},{key:"fb",value:function(t,e,n){var i=this;this._p.m((function(){return i.pb(t,e,n)}))}},{key:"vb",value:function(t,e,n){var i=this;this.up.m((function(){return i.pb(t,e,n)}))}},{key:"jm",value:function(t,e,n){var i=this;this.gc.m((function(){return i.pb(t,e,n)}))}},{key:"Ym",value:function(){var t=this.cn.timeScale.visible?"":"none";this.Hm.Wv().style.display=t}},{key:"nb",value:function(){return this.Rm[0].Xv().S_().W().visible}},{key:"sb",value:function(){return this.Rm[0].Xv().k_().W().visible}},{key:"$m",value:function(){var t=this;return"ResizeObserver"in window&&(this.Im=new ResizeObserver((function(e){var n=e.find((function(e){return e.target===t.Em}));n&&t.Um(n.contentRect.width,n.contentRect.height)})),this.Im.observe(this.Em,{box:"border-box"}),!0)}},{key:"Zm",value:function(){null!==this.Im&&this.Im.disconnect(),this.Im=null}}]),t}();function Qi(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Ji(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function Xi(t,e,n,i){var r=n.value,a={se:e,ut:t,Vt:[r,r,r,r],mb:i};return void 0!==n.color&&(a.O=n.color),a}function Yi(t,e,n,i){var r=n.value,a={se:e,ut:t,Vt:[r,r,r,r],mb:i};return void 0!==n.lineColor&&(a._t=n.lineColor),void 0!==n.topColor&&(a.Ts=n.topColor),void 0!==n.bottomColor&&(a.Ps=n.bottomColor),a}function $i(t,e,n,i){var r=n.value,a={se:e,ut:t,Vt:[r,r,r,r],mb:i};return void 0!==n.topLineColor&&(a.Pe=n.topLineColor),void 0!==n.bottomLineColor&&(a.Re=n.bottomLineColor),void 0!==n.topFillColor1&&(a.Se=n.topFillColor1),void 0!==n.topFillColor2&&(a.ke=n.topFillColor2),void 0!==n.bottomFillColor1&&(a.ye=n.bottomFillColor1),void 0!==n.bottomFillColor2&&(a.Ce=n.bottomFillColor2),a}function tr(t,e,n,i){var r={se:e,ut:t,Vt:[n.open,n.high,n.low,n.close],mb:i};return void 0!==n.color&&(r.O=n.color),r}function er(t,e,n,i){var r={se:e,ut:t,Vt:[n.open,n.high,n.low,n.close],mb:i};return void 0!==n.color&&(r.O=n.color),void 0!==n.borderColor&&(r.Bt=n.borderColor),void 0!==n.wickColor&&(r.$h=n.wickColor),r}function nr(t,e,n,i,r){var a=N(r)(n),o=Math.max.apply(Math,(0,c.Z)(a)),s=Math.min.apply(Math,(0,c.Z)(a)),u=a[a.length-1],l=[u,o,s,u],h=n,f=(h.time,h.color);return{se:e,ut:t,Vt:l,mb:i,He:Ji(h,["time","color"]),O:f}}function ir(t){return void 0!==t.Vt}function rr(t,e){return void 0!==e.customValues&&(t.Sb=e.customValues),t}function ar(t){return function(e,n,i,r,a,o){return function(t,e){return e?e(t):void 0===(n=t).open&&void 0===n.value;var n}(i,o)?rr({ut:e,se:n,mb:r},i):rr(t(e,n,i,r,a),i)}}function or(t){return{Candlestick:ar(er),Bar:ar(tr),Area:ar(Yi),Baseline:ar($i),Histogram:ar(Xi),Line:ar(Xi),Custom:ar(nr)}[t]}function sr(t){return{se:0,kb:new Map,ia:t}}function ur(t,e){if(void 0!==t&&0!==t.length)return{yb:e.key(t[0].ut),Cb:e.key(t[t.length-1].ut)}}function lr(t){var e;return t.forEach((function(t){void 0===e&&(e=t.mb)})),N(e)}var cr=function(){function t(e){(0,h.Z)(this,t),this.Tb=new Map,this.Pb=new Map,this.Rb=new Map,this.Db=[],this.N_=e}return(0,f.Z)(t,[{key:"S",value:function(){this.Tb.clear(),this.Pb.clear(),this.Rb.clear(),this.Db=[]}},{key:"Ob",value:function(t,e){var n=this,i=0!==this.Tb.size,r=!1,a=this.Pb.get(t);if(void 0!==a)if(1===this.Pb.size)i=!1,r=!0,this.Tb.clear();else{var s,u=(0,o.Z)(this.Db);try{for(u.s();!(s=u.n()).done;){s.value.pointData.kb.delete(t)&&(r=!0)}}catch(m){u.e(m)}finally{u.f()}}var l=[];if(0!==e.length){var c=e.map((function(t){return t.time})),h=this.N_.createConverterToInternalObj(e),f=or(t.Xh()),v=t.ga(),d=t.Ma();l=e.map((function(e,i){var a=h(e.time),o=n.N_.key(a),s=n.Tb.get(o);void 0===s&&(s=sr(a),n.Tb.set(o,s),r=!0);var u=f(a,s.se,e,c[i],v,d);return s.kb.set(t,u),u}))}i&&this.Ab(),this.Vb(t,l);var p=-1;if(r){var y=[];this.Tb.forEach((function(t){y.push({timeWeight:0,time:t.ia,pointData:t,originalTime:lr(t.kb)})})),y.sort((function(t,e){return n.N_.key(t.time)-n.N_.key(e.time)})),p=this.Bb(y)}return this.Ib(t,p,function(t,e,n){var i=ur(t,n),r=ur(e,n);if(void 0!==i&&void 0!==r)return{Xl:i.Cb>=r.Cb&&i.yb>=r.yb}}(this.Pb.get(t),a,this.N_))}},{key:"rd",value:function(t){return this.Ob(t,[])}},{key:"zb",value:function(t,e){var n=this,i=e;!function(t){void 0===t.mb&&(t.mb=t.time)}(i),this.N_.preprocessData(e);var r=this.N_.createConverterToInternalObj([e])(e.time),a=this.Rb.get(t);if(void 0!==a&&this.N_.key(r)<this.N_.key(a))throw new Error("Cannot update oldest data, last time=".concat(a,", new time=").concat(r));var o=this.Tb.get(this.N_.key(r)),s=void 0===o;void 0===o&&(o=sr(r),this.Tb.set(this.N_.key(r),o));var u=or(t.Xh()),l=t.ga(),c=t.Ma(),h=u(r,o.se,e,i.mb,l,c);o.kb.set(t,h),this.Eb(t,h);var f={Xl:ir(h)};if(!s)return this.Ib(t,-1,f);var v={timeWeight:0,time:o.ia,pointData:o,originalTime:lr(o.kb)},d=Jt(this.Db,this.N_.key(v.time),(function(t,e){return n.N_.key(t.time)<e}));this.Db.splice(d,0,v);for(var p=d;p<this.Db.length;++p)hr(this.Db[p].pointData,p);return this.N_.fillWeightsForPoints(this.Db,d),this.Ib(t,d,f)}},{key:"Eb",value:function(t,e){var n=this.Pb.get(t);void 0===n&&(n=[],this.Pb.set(t,n));var i=0!==n.length?n[n.length-1]:null;null===i||this.N_.key(e.ut)>this.N_.key(i.ut)?ir(e)&&n.push(e):ir(e)?n[n.length-1]=e:n.splice(-1,1),this.Rb.set(t,e.ut)}},{key:"Vb",value:function(t,e){0!==e.length?(this.Pb.set(t,e.filter(ir)),this.Rb.set(t,e[e.length-1].ut)):(this.Pb.delete(t),this.Rb.delete(t))}},{key:"Ab",value:function(){var t,e=(0,o.Z)(this.Db);try{for(e.s();!(t=e.n()).done;){var n=t.value;0===n.pointData.kb.size&&this.Tb.delete(this.N_.key(n.time))}}catch(i){e.e(i)}finally{e.f()}}},{key:"Bb",value:function(t){for(var e=-1,n=0;n<this.Db.length&&n<t.length;++n){var i=this.Db[n],r=t[n];if(this.N_.key(i.time)!==this.N_.key(r.time)){e=n;break}r.timeWeight=i.timeWeight,hr(r.pointData,n)}if(-1===e&&this.Db.length!==t.length&&(e=Math.min(this.Db.length,t.length)),-1===e)return-1;for(var a=e;a<t.length;++a)hr(t[a].pointData,a);return this.N_.fillWeightsForPoints(t,e),this.Db=t,e}},{key:"Lb",value:function(){if(0===this.Pb.size)return null;var t=0;return this.Pb.forEach((function(e){0!==e.length&&(t=Math.max(t,e[e.length-1].se))})),t}},{key:"Ib",value:function(t,e,n){var i={Nb:new Map,yt:{Ou:this.Lb()}};if(-1!==e)this.Pb.forEach((function(e,r){i.Nb.set(r,{He:e,Fb:r===t?n:void 0})})),this.Pb.has(t)||i.Nb.set(t,{He:[],Fb:n}),i.yt.Wb=this.Db,i.yt.jb=e;else{var r=this.Pb.get(t);i.Nb.set(t,{He:r||[],Fb:n})}return i}}]),t}();function hr(t,e){t.se=e,t.kb.forEach((function(t){t.se=e}))}function fr(t){var e={value:t.Vt[3],time:t.mb};return void 0!==t.Sb&&(e.customValues=t.Sb),e}function vr(t){var e=fr(t);return void 0!==t.O&&(e.color=t.O),e}function dr(t){var e=fr(t);return void 0!==t._t&&(e.lineColor=t._t),void 0!==t.Ts&&(e.topColor=t.Ts),void 0!==t.Ps&&(e.bottomColor=t.Ps),e}function pr(t){var e=fr(t);return void 0!==t.Pe&&(e.topLineColor=t.Pe),void 0!==t.Re&&(e.bottomLineColor=t.Re),void 0!==t.Se&&(e.topFillColor1=t.Se),void 0!==t.ke&&(e.topFillColor2=t.ke),void 0!==t.ye&&(e.bottomFillColor1=t.ye),void 0!==t.Ce&&(e.bottomFillColor2=t.Ce),e}function yr(t){var e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.mb};return void 0!==t.Sb&&(e.customValues=t.Sb),e}function mr(t){var e=yr(t);return void 0!==t.O&&(e.color=t.O),e}function gr(t){var e=yr(t),n=t.O,i=t.Bt,r=t.$h;return void 0!==n&&(e.color=n),void 0!==i&&(e.borderColor=i),void 0!==r&&(e.wickColor=r),e}function kr(t){return{Area:dr,Line:vr,Baseline:pr,Histogram:vr,Bar:mr,Candlestick:gr,Custom:br}[t]}function br(t){var e=t.mb;return Object.assign(Object.assign({},t.He),{time:e})}var wr={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},_r={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Er={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:et},Sr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},Cr={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0},Tr={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:et,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function xr(){return{width:0,height:0,autoSize:!1,layout:Er,crosshair:wr,grid:_r,overlayPriceScales:Object.assign({},Sr),leftPriceScale:Object.assign(Object.assign({},Sr),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Sr),{visible:!0}),timeScale:Cr,watermark:Tr,localization:{locale:di?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}var Zr=function(){function t(e,n){(0,h.Z)(this,t),this.Hb=e,this.$b=n}return(0,f.Z)(t,[{key:"applyOptions",value:function(t){this.Hb.qt().Ic(this.$b,t)}},{key:"options",value:function(){return this.Li().W()}},{key:"width",value:function(){return Zt(this.$b)?this.Hb.ib(this.$b):0}},{key:"Li",value:function(){return D(this.Hb.qt().zc(this.$b)).At}}]),t}();function Ar(t,e,n){var i=Ji(t,["time","originalTime"]),r=Object.assign({time:e},i);return void 0!==n&&(r.originalTime=n),r}var Or={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Mr=function(){function t(e){(0,h.Z)(this,t),this.Bh=e}return(0,f.Z)(t,[{key:"applyOptions",value:function(t){this.Bh.Nh(t)}},{key:"options",value:function(){return this.Bh.W()}},{key:"Ub",value:function(){return this.Bh}}]),t}(),Lr=function(){function t(e,n,i,r,a){(0,h.Z)(this,t),this.qb=new H,this.Es=e,this.Yb=n,this.Xb=i,this.N_=a,this.Kb=r}return(0,f.Z)(t,[{key:"S",value:function(){this.qb.S()}},{key:"priceFormatter",value:function(){return this.Es.ca()}},{key:"priceToCoordinate",value:function(t){var e=this.Es.Pt();return null===e?null:this.Es.At().Ot(t,e.Vt)}},{key:"coordinateToPrice",value:function(t){var e=this.Es.Pt();return null===e?null:this.Es.At().pn(t,e.Vt)}},{key:"barsInLogicalRange",value:function(t){if(null===t)return null;var e=new Vn(new Pn(t.from,t.to)).iu(),n=this.Es.In();if(n.Fi())return null;var i=n.nl(e.Os(),1),r=n.nl(e.di(),-1),a=D(n.Qh()),o=D(n.Bn());if(null!==i&&null!==r&&i.se>r.se)return{barsBefore:t.from-a,barsAfter:o-t.to};var s={barsBefore:null===i||i.se===a?t.from-a:i.se-a,barsAfter:null===r||r.se===o?o-t.to:o-r.se};return null!==i&&null!==r&&(s.from=i.mb,s.to=r.mb),s}},{key:"setData",value:function(t){this.N_,this.Es.Xh(),this.Yb.Zb(this.Es,t),this.Gb("full")}},{key:"update",value:function(t){this.Es.Xh(),this.Yb.Jb(this.Es,t),this.Gb("update")}},{key:"dataByIndex",value:function(t,e){var n=this.Es.In().nl(t,e);return null===n?null:kr(this.seriesType())(n)}},{key:"data",value:function(){var t=kr(this.seriesType());return this.Es.In().ie().map((function(e){return t(e)}))}},{key:"subscribeDataChanged",value:function(t){this.qb.l(t)}},{key:"unsubscribeDataChanged",value:function(t){this.qb.v(t)}},{key:"setMarkers",value:function(t){var e=this;this.N_;var n=t.map((function(t){return Ar(t,e.N_.convertHorzItemToInternal(t.time),t.time)}));this.Es.Zl(n)}},{key:"markers",value:function(){return this.Es.Gl().map((function(t){return Ar(t,t.originalTime,void 0)}))}},{key:"applyOptions",value:function(t){this.Es.Nh(t)}},{key:"options",value:function(){return Y(this.Es.W())}},{key:"priceScale",value:function(){return this.Xb.priceScale(this.Es.At().xa())}},{key:"createPriceLine",value:function(t){var e=K(Y(Or),t),n=this.Es.Jl(e);return new Mr(n)}},{key:"removePriceLine",value:function(t){this.Es.Ql(t.Ub())}},{key:"seriesType",value:function(){return this.Es.Xh()}},{key:"attachPrimitive",value:function(t){var e=this;this.Es.ba(t),t.attached&&t.attached({chart:this.Kb,series:this,requestUpdate:function(){return e.Es.qt().$l()}})}},{key:"detachPrimitive",value:function(t){this.Es.wa(t),t.detached&&t.detached()}},{key:"Gb",value:function(t){this.qb.M()&&this.qb.m(t)}}]),t}(),Ir=function(){function t(e,n,i){(0,h.Z)(this,t),this.Qb=new H,this.uu=new H,this.om=new H,this.Ui=e,this.wl=e.yt(),this.Hm=n,this.wl.Xu().l(this.tw.bind(this)),this.wl.Ku().l(this.iw.bind(this)),this.Hm.wm().l(this.nw.bind(this)),this.N_=i}return(0,f.Z)(t,[{key:"S",value:function(){this.wl.Xu().p(this),this.wl.Ku().p(this),this.Hm.wm().p(this),this.Qb.S(),this.uu.S(),this.om.S()}},{key:"scrollPosition",value:function(){return this.wl.zu()}},{key:"scrollToPosition",value:function(t,e){e?this.wl.Uu(t,1e3):this.Ui.Jn(t)}},{key:"scrollToRealTime",value:function(){this.wl.$u()}},{key:"getVisibleRange",value:function(){var t=this.wl.yu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}},{key:"setVisibleRange",value:function(t){var e={from:this.N_.convertHorzItemToInternal(t.from),to:this.N_.convertHorzItemToInternal(t.to)},n=this.wl.Pu(e);this.Ui.hd(n)}},{key:"getVisibleLogicalRange",value:function(){var t=this.wl.ku();return null===t?null:{from:t.Os(),to:t.di()}}},{key:"setVisibleLogicalRange",value:function(t){I(t.from<=t.to,"The from index cannot be after the to index."),this.Ui.hd(t)}},{key:"resetTimeScale",value:function(){this.Ui.Zn()}},{key:"fitContent",value:function(){this.Ui.Ju()}},{key:"logicalToCoordinate",value:function(t){var e=this.Ui.yt();return e.Fi()?null:e.Et(t)}},{key:"coordinateToLogical",value:function(t){return this.wl.Fi()?null:this.wl.Au(t)}},{key:"timeToCoordinate",value:function(t){var e=this.N_.convertHorzItemToInternal(t),n=this.wl.ya(e,!1);return null===n?null:this.wl.Et(n)}},{key:"coordinateToTime",value:function(t){var e=this.Ui.yt(),n=e.Au(t),i=e.qi(n);return null===i?null:i.originalTime}},{key:"width",value:function(){return this.Hm.Hp().width}},{key:"height",value:function(){return this.Hm.Hp().height}},{key:"subscribeVisibleTimeRangeChange",value:function(t){this.Qb.l(t)}},{key:"unsubscribeVisibleTimeRangeChange",value:function(t){this.Qb.v(t)}},{key:"subscribeVisibleLogicalRangeChange",value:function(t){this.uu.l(t)}},{key:"unsubscribeVisibleLogicalRangeChange",value:function(t){this.uu.v(t)}},{key:"subscribeSizeChange",value:function(t){this.om.l(t)}},{key:"unsubscribeSizeChange",value:function(t){this.om.v(t)}},{key:"applyOptions",value:function(t){this.wl.Nh(t)}},{key:"options",value:function(){return Object.assign(Object.assign({},Y(this.wl.W())),{barSpacing:this.wl.he()})}},{key:"tw",value:function(){this.Qb.M()&&this.Qb.m(this.getVisibleRange())}},{key:"iw",value:function(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}},{key:"nw",value:function(t){this.om.m(t.width,t.height)}}]),t}();function Nr(t){return function(t){if(X(t.handleScale)){var e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){var n=t.handleScale,i=n.axisPressedMouseMove,r=n.axisDoubleClickReset;X(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),X(r)&&(t.handleScale.axisDoubleClickReset={time:r,price:r})}var a=t.handleScroll;X(a)&&(t.handleScroll={horzTouchDrag:a,vertTouchDrag:a,mouseWheel:a,pressedMouseMove:a})}(t),t}var Dr=function(){function t(e,n,i){var r=this;(0,h.Z)(this,t),this.sw=new Map,this.ew=new Map,this.rw=new H,this.hw=new H,this.lw=new H,this.aw=new cr(n);var a=void 0===i?Y(xr()):K(Y(xr()),Nr(i));this.N_=n,this.Hb=new Gi(e,a,n),this.Hb.Np().l((function(t){r.rw.M()&&r.rw.m(r.ow(t()))}),this),this.Hb.Fp().l((function(t){r.hw.M()&&r.hw.m(r.ow(t()))}),this),this.Hb.Fc().l((function(t){r.lw.M()&&r.lw.m(r.ow(t()))}),this);var o=this.Hb.qt();this._w=new Ir(o,this.Hb.Km(),this.N_)}return(0,f.Z)(t,[{key:"remove",value:function(){this.Hb.Np().p(this),this.Hb.Fp().p(this),this.Hb.Fc().p(this),this._w.S(),this.Hb.S(),this.sw.clear(),this.ew.clear(),this.rw.S(),this.hw.S(),this.lw.S(),this.aw.S()}},{key:"resize",value:function(t,e,n){this.autoSizeActive()||this.Hb.Um(t,e,n)}},{key:"addCustomSeries",value:function(t,e){var n=R(t),i=Object.assign(Object.assign({},A),n.defaultOptions());return this.uw("Custom",i,e,n)}},{key:"addAreaSeries",value:function(t){return this.uw("Area",T,t)}},{key:"addBaselineSeries",value:function(t){return this.uw("Baseline",x,t)}},{key:"addBarSeries",value:function(t){return this.uw("Bar",S,t)}},{key:"addCandlestickSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(t),this.uw("Candlestick",E,t)}},{key:"addHistogramSeries",value:function(t){return this.uw("Histogram",Z,t)}},{key:"addLineSeries",value:function(t){return this.uw("Line",C,t)}},{key:"removeSeries",value:function(t){var e=N(this.sw.get(t)),n=this.aw.rd(e);this.Hb.qt().rd(e),this.cw(n),this.sw.delete(t),this.ew.delete(e)}},{key:"Zb",value:function(t,e){this.cw(this.aw.Ob(t,e))}},{key:"Jb",value:function(t,e){this.cw(this.aw.zb(t,e))}},{key:"subscribeClick",value:function(t){this.rw.l(t)}},{key:"unsubscribeClick",value:function(t){this.rw.v(t)}},{key:"subscribeCrosshairMove",value:function(t){this.lw.l(t)}},{key:"unsubscribeCrosshairMove",value:function(t){this.lw.v(t)}},{key:"subscribeDblClick",value:function(t){this.hw.l(t)}},{key:"unsubscribeDblClick",value:function(t){this.hw.v(t)}},{key:"priceScale",value:function(t){return new Zr(this.Hb,t)}},{key:"timeScale",value:function(){return this._w}},{key:"applyOptions",value:function(t){this.Hb.Nh(Nr(t))}},{key:"options",value:function(){return this.Hb.W()}},{key:"takeScreenshot",value:function(){return this.Hb.Qm()}},{key:"autoSizeActive",value:function(){return this.Hb.eb()}},{key:"chartElement",value:function(){return this.Hb.rb()}},{key:"paneSize",value:function(){var t=this.Hb.lb();return{height:t.height,width:t.width}}},{key:"setCrosshairPosition",value:function(t,e,n){var i=this.sw.get(n);if(void 0!==i){var r=this.Hb.qt().cr(i);null!==r&&this.Hb.qt().Jc(t,e,r)}}},{key:"clearCrosshairPosition",value:function(){this.Hb.qt().Qc(!0)}},{key:"uw",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;!function(t){if(void 0!==t&&"custom"!==t.type){var e=t;void 0!==e.minMove&&void 0===e.precision&&(e.precision=function(t){if(t>=1)return 0;for(var e=0;e<8;e++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}(e.minMove))}}(n.priceFormat);var r=K(Y(O),Y(e),n),a=this.Hb.qt().sd(t,r,i),o=new Lr(a,this,this,this,this.N_);return this.sw.set(o,a),this.ew.set(a,o),o}},{key:"cw",value:function(t){var e=this.Hb.qt();e.td(t.yt.Ou,t.yt.Wb,t.yt.jb),t.Nb.forEach((function(t,e){return e.it(t.He,t.Fb)})),e.Bu()}},{key:"dw",value:function(t){return N(this.ew.get(t))}},{key:"ow",value:function(t){var e=this,n=new Map;t.gb.forEach((function(t,i){var r=i.Xh(),a=kr(r)(t);if("Custom"!==r)I(function(t){return void 0!==t.open||void 0!==t.value}(a));else{var o=i.Ma();I(!o||!1===o(a))}n.set(e.dw(i),a)}));var i=void 0===t.wb?void 0:this.dw(t.wb);return{time:t.mb,logical:t.se,point:t.bb,hoveredSeries:i,hoveredObjectId:t.Mb,seriesData:n,sourceEvent:t.xb}}}]),t}();function Rr(t,e){return function(t,e,n){var i;if(J(t)){var r=document.getElementById(t);I(null!==r,"Cannot find element in DOM with id=".concat(t)),i=r}else i=t;var a=new Dr(i,e,n);return e.setOptions(a.options()),a}(t,new vi,vi.Cd(e))}Object.assign(Object.assign({},O),A)}}]);
//# sourceMappingURL=170.8078b834.chunk.js.map